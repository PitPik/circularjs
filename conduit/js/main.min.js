/* CircularJS */
!function(e){"use strict";var t=e.Math.random,n=document.createElement("a"),r=e.document.createDocumentFragment(),o=0,i=h.modules={},a={};function s(){return"_module_"+(t()+t())}function c(e){var t,r=/(?:^\!|^http[s]*:|.*\.js$)/.test(e)?"":".js";return e=(h.paths[e]||e).replace(/^\!/,""),t=function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search}((h.baseUrl||".")+"/"+e+r).replace(/^.\//,""),h.mapPath?h.mapPath(e,r,t):t}function l(e){var t={mapPath:"function",baseUrl:"string"},n=["lookaheadMap","paths","options","mapPath","baseUrl"];if(!h[n[0]])for(var r=n.length;r--;)h[n[r]]="string"===t[n[r]]?"":"function"===t[n[r]]?null:{};for(var o in e)if(-1!==n.indexOf(o))if(t[o])h[o]=e[o];else for(var i in e[o])h[o][i]=e[o][i];return h}function u(e){var t=h.lookaheadMap[e],n=h.options.minifyPrefix;if(t&&-1===(h.paths[e]||"").indexOf(n)){h(t);for(var r=0,o=t.length;r<o;r++)i[t[r]]||u(t[r])}}function p(e){for(var t=e.deps,n=!0,r=t.length;r--;)i[t[r]]&&void 0===i[t[r]].done&&(n=!1);n&&f(e)}function f(e){var t=e.parents||[];e.factory&&!e.isFile?(e.done=e.factory.apply(null,e.deps.map(function(e){return i[e].done})),delete e.factory):void 0===e.done&&delete i[e.name];for(var n=t.length;n--;)i[t[n]]&&p(i[t[n]])}function d(t,n){var r,o=e.document.createElement("script");return o.type="text/javascript",o.async=o.defer=!n,o.charset="utf-8",o.onload=o.onreadystatechange=(r=t,function(e){var t=e.currentTarget||e.srcElement;"load"!==e.type&&"complete"!==t.readyState||(o.onload=o.onreadystatechange=null,function(e){var e=i[e.name];if(0===a.name.indexOf("_module_")){e.done=a.done,e.factory=a.factory,e.deps=a.deps;for(var t=e.deps.length,n={};t--;)(n=i[e.deps[t]].parents)[n.indexOf(a.name)]=e.name;delete i[a.name]}p(e)}(r))}),o.src=t.path,o}function h(e,t,n){e.constructor===Array?v(s(),e,t,n):v(s(),[],e,t)}function v(e,t,n,l){var v={};if("string"!=typeof e)return h(e,t,n);e=e||s(),v=i[e],function(e,t,n){for(var a=t.length,s={},l="";a--;)l=t[a],i[l]?i[l].parents.push(e):(s=i[l]={name:l,isFile:"!"===l.charAt(0),path:c(l),parents:[e]}).isFile?h.getFile(s,f):(p=d(s,n),r.appendChild(p),clearTimeout(o),o=setTimeout(function(){document.head.appendChild(r)}),u(l));var p}(e,t,l),v?(v.deps=t,v.factory=n):p(v=i[e]={name:e,deps:t,factory:n,parents:[]}),a=v}v.amd={},h.config=l,h.getFile=function(e,t){return e},e.define=v,e.require=h,l({})}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,t){"use strict";var n=document.createElement("a"),r={undefined:t,null:null,NaN:NaN,true:!0,false:!1},o={convertToType:function(e){return r.hasOwnProperty(e)?r[e]:e.toString&&+e.toString()===e?+e:e},closest:function(e,t,n){if(e.closest)o.closest=function(e,t){return e.closest(t)};else{var r=e.msMatchesSelector||e.webkitMatchesSelector||e.matches;o.closest=function(e,t){if(!(n||document.documentElement).contains(e))return null;do{if(r.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}}return o.closest(e,t,n)},$create:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return(t||document).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArray:Array.isArray||function(e){return e&&e.constructor===Array},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&o.removeClass(e,n),t&&o.addClass(t,r||n)},addEvents:function(e,t,n,r){for(var i=[],a=e.length;a--;)i.push(o.addEvent(e[a],t,n,r));return i},removeEvents:function(e){for(var t=e.length;t--;)e[t]()},addEvent:function(e,n,r,o){return o=o!==t?o:!!/(?:focus|blur|mouseenter|mouseleave)/.test(n),e.addEventListener(n,r,o),function(){e.removeEventListener(n,r,o)}},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){o.lazy(function(){o.storageHelper.save(e,t)},n||o.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var o=e[n].toUpperCase(),i=t[n].toUpperCase();return r?o<i?1:o>i?-1:0:o<i?-1:o>i?1:0},normalizePath:function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search},ajax:function(e,n){var r,i,s=null,c=(new Date).getTime();return n=n||{},e=o.normalizePath(e),i=a[e]&&a[e].time||0,s=(s=(r=!0===n.cache?c+1e8:n.cache?i>c?i:c+n.cache:0)&&!n.resetCache&&i>c?a[e]:null)||new o.Promise(function(r,o){var i,a,s=new XMLHttpRequest,c=(n.method||n.type||"GET").toUpperCase();if(s||o("Giving up :( Cannot create an XMLHTTP instance"),n||(e=(n=e).url),s.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||e.status>299))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,n.dataType,o);if(e!==t){if("json"===n.dataType)try{e=JSON.parse(e)}catch(e){return void o("Caught Exception: "+e.stack)}r(e)}},s.open(c,e,n.async||!0,n.username,n.password),"xml"===n.dataType&&s.setRequestHeader("Content-Type","text/xml"),"GET"!==c&&n.csrf&&s.setRequestHeader("X-CSRF-Token",(i=n.csrf,(a=document.cookie.split(i+"=")[1])&&a.split(";")[0])),n.headers)for(var l in n.headers)s.setRequestHeader(l,n.headers[l]);return s.send(n.data),function(){s.abort()}}),r?(a[e]=s,a[e].time=r):delete a[e],s},errorHandler:function(e){console.error(e)},Promise:s};function i(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n}e.Event=e.Event||i,e.CustomEvent=e.CustomEvent||i;var a={};function s(e){this._state=0,this._handled=!1,this._value=t,this._deferreds=[],this._returnFn=f(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,setTimeout(function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){try{n=r(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,n)}else(1===e._state?l:u)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return f(n.bind(t),e)}e._state=1,e._value=t,p(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function f(e,t){var n=!1,r=function(e){n||(n=!0,u(t,e))};try{return e(function(e){n||(n=!0,l(t,e))},r)}catch(e){r(e)}}return s._cache={},s.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},s.prototype.then=function(e,t){var n=this._returnFn,r=new s(function(){return n});return c(this,{onFulfilled:e||null,onRejected:t||null,promise:r}),r},s.prototype.cancel=function(e){var t=s._cache[e];return s._cache[e]=this,t?(1!==t._state&&(t._returnFn&&"function"==typeof t._returnFn&&t._returnFn(),t._deferreds=[],t.then=t.catch=function(){},t._handled=!0,t._state=1),t._returnFn=null,this):this},s.all=function(e){var t=[];return e.reduce(function(e,n){return e.then(function(){return n}).then(function(e){return t.push(e)})},new s(function(e,t){e(null)})).then(function(){return t})},e.require&&(require.getFile=function(e,t){o.ajax(e.path,{cache:"!!"!==e.name.substr(0,2)}).then(function(n){e.done=n,t(e)})}),o}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this&&this.window||global,function(e,t){"use strict";var n=Object.keys||function(e){var t=function(e,t,n){e.hasOwnProperty(t)&&n.push(t)},n=[];for(var r in e)t(e,r,n);return n},r=function(e,t){var n=function(e,t,n){t[n]=e[n]};for(var r in e)n(e,t,r);return t},o=function(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t},i=function(e,t){this.version="1.5.0",this.partials={},this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},helpers:{},partials:{},self:"self",nameCharacters:"",escapeHTML:!0,renderHook:null},a(this,t||{},e)},a=function(e,t,r){for(var o in t)e.options[o]=t[o];for(var i in s(e,(t=e.options).tags),e.entityRegExp=new RegExp("["+n(t.entityMap).join("")+"]","g"),e.helpers=t.helpers,t.partials)e.registerPartial(i,t.partials[i]);r&&e.parse(r)};return i.prototype={render:function(e,t){return this.partials[this.options.self](function(e,t){return{extra:t,scopes:[{scope:e,helpers:{},level:{"@root":e},path:[]}]}}(e,t||{}))},parse:function(e){return this.registerPartial(this.options.self,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,n){return this.partials[e]=this.partials[e]||(n.constructor===Function?n:function e(n,r,o){var i=function(r,i,a,s,c,l,u,p,f){return"#*"===a?n.registerPartial(c.replace(/['"]/g,""),e(n,u,o))&&"":function(e,n,r,o,i,a,s,c,l){var u=i.split(c),p=S(e,c,l,s||"",r,null),f=function(e,n,r,o,i,a){for(var s=0,c=n.length,l=!1,u=[];s<c;s+=4)l=u[1]!==t?u[1]:i[0],u=n[1+s]?_(n[1+s],n[3+s]):[i[1]],a.push(S(e,n[2+s-4]||"","","",0!==s?n[1+s-4]||"":o,j(e,E(n[s],l,u[0]),r,[],[])));return a}(e,a.split(e.elseSplitter),n,r,_(o,u[0]),[]);return n.push(function(t){return N(e,p,t,f)}),r+"-block- "+(n.length-1)+u[1]}(n,o,i,l,f,u,a,s,c)};for(;r!==(r=r.replace(n.sectionRegExp,i)););return j(n,r,o,[],[])}(this,n,[]))},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){s(this,e)}},i;function s(e,t){var n="{{"===t[0]?["({{2,3}~*)","(~*}{2,3})"]:t,r=e.options.nameCharacters+"!-;=?@[-`|",o=(n[0]+"\\/\\3"+n[1]).replace(/[()]/g,"");e.inlineRegExp=new RegExp(n[0]+"([>!&=])*\\s*([\\w\\"+r+"<>|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp(n[0]+"([#^][*%]*)\\s*([\\w"+r+"~]*)(?:\\s+([\\w$\\s|.\\/"+r+"]*))*"+n[1]+"(?:\\n*)((?:(?!"+n[0]+"[#])[\\S\\s])*?)("+o+")","g"),e.elseSplitter=new RegExp(n[0]+"(?:else|\\^)\\s*(.*?)"+n[1])}function c(e,t,n){return n&&t.options.escapeHTML?String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]}):e}function l(e,t,n,r,o){return{"@index":e,"@last":e===n-1,"@first":0===e,"@length":n,"@parent":o,"@key":t,this:r,".":r}}function u(e,t,n,r,i,a,s){return a?t.splice(t.length-2,2,s,""):t.push(s,""),n={scope:n,helpers:r,level:i,path:t},a?(e[0]=n,e):o(e,[n])}function p(e,t,n){for(var r=0,o=t.path.length;r<o;r++)if(!(e=e[t.path[r]]))return;return n?e:e[t.value]}function f(e,n,r){var o=r.root,i=o.variable,a=n.scopes&&n.scopes[i.parentDepth]||{},s=a.scope||{},c=i.value,l=!o.isStrict&&!o.isString&&e.helpers[c]||null,u=r.isPartial&&e.partials[c]||null,f="",h=i.root?function(e,t,n){var r=n.variable.root;return d(e,{key:r,value:e.helpers[r],type:"helper"},t,{vars:n.variable.vars},null)}(e,n,o):o.isString&&i.name||i.isLiteral?c:(f=p(a.level||{},i))!==t?f:(f=p(a.helpers||{},i))!==t?f:(f=p(s,i))!==t?f:l||u||(s[c]!==t?s[c]:o.isString?c:p(n.extra,i)),v=h===t||null===h?"":l?"helper":u?"partial":h.constructor===Array?"array":typeof h,m=n.scopes[0].path;return m.splice(m.length-1,1,function(e,t){var n=e.length?e.length>1?e.join("."):e[0]:"";return n?n+"."+t:t}(i.path,i.value)),{value:h,type:v}}function d(e,t,n,r,o){return"helper"===t.type||"function"===t.type?m(e,t,n,r,[{bodyFn:o}]):t.value}function h(e,t,n,r,o,i,a){for(var s=r.length,c={},l="",u=null,p="";s--;)l=(u=(p=(c=r[s]).variable).root?d(e,t,n,p,null):null)||!p.name?"$"+s:p.name,p.name&&(a[l]=o[l]),o[l]=u||f(e,n,{root:c}).value,i.push(o[l]),c.isAlias&&(n.scopes[0].level[l]=o[l]);return{obj:o,arr:i,restore:a}}function v(e,n,r,o,i){return e.root.isAlias&&(r[n.name||n.value]=i,o!==t&&(r[e.root.aliasKey||"@key"]=o)),r}function m(e,t,n,r,o){return r.isHelper=!0,t.value.apply({name:r.root?r.root.variable.value:"",scope:n.scopes[0].scope,rootScope:n.scopes[n.scopes.length-1].scope,getBody:function(){return o[0]?o[0].bodyFn(n):""},getData:function(t){return f(e,n,{root:O(t)}).value},escape:function(t){return c(t,e,!0)}},h(e,t,n,r.vars,{},[],{}).arr)}function g(e,t,n,r,o,i){for(var a=0,s=o[a],c=!r.helper||"if"===r.helper,l=!1,u=d(e,t,n,r,s.bodyFn);!(l=c&&!!u||!c&&!u)&&o[a+1];)c=!(s=o[++a]).helper||"if"===s.helper,u=d(e,t=s.root?f(e,n,s):{value:c},n,s,s.bodyFn);return i.fnIdx=a,l?s.bodyFn(n):""}function b(e,t,r,o,i){for(var a="",s="array"===t.type,c=s?t.value||[]:n(t.value||{}),p=0,f=c.length,d="";p<f;p++)d=s?p:c[p],r.scopes=u(r.scopes,r.scopes[0].path,t.value[d],l(p,d,f,s?c[p]:t.value[d],t.value),v(o,o.root.variable,{},d,t.value[d]),!!p,p),a+=i[0].bodyFn(r);return c.length&&(r.scopes.shift(),r.scopes[0].path.splice(r.scopes[0].path.length-3,3)),a}function y(e,n,o,i,a){var s=i.root.variable,c=o.scopes[0],l=s.value,f=r({".":n.value,this:n.value},c.level);return o.scopes=u(o.scopes,o.scopes[0].path,n.value,{"@parent":p(o.scopes[s.parentDepth],s,!0)},v(i,s,f,t,n.value),!1,l),[a[0].bodyFn(o),o.scopes.shift(),o.scopes[0].path.splice(o.scopes[0].path.length-2,2)][0]}function x(e,t,n,r,o,i,a,s){return e.options.renderHook?e.options.renderHook.call(e,o,n,t,r,s,t.scopes[0].path.join("."),n.root?n.root.variable.value:"",t.scopes[0]&&p(t.scopes[0].scope,n.root.variable,!0)||{},function(r){return i(e,n,t,a||r&&{value:r}||f(e,t,n),s)}):o}function C(e,n,o,i){return i.value===t?"":n.isPartial?function(e,t,n,o){var i=n.scopes[0].helpers,a=h(e,t,n,o.vars,i,[],{});return[t.value(n),r(a.restore,i)][0]}(e,i,o,n):c("helper"===i.type||"function"===i.type?m(e,i,o,n,[]):i.value,e,"boolean"!==i.type&&"number"!==i.type&&n.isEscaped)}function N(e,n,r,o,i){var a=f(e,r,n),s=n.helper,c="if"===s||"unless"===s,l=i||{fnIdx:0},u=("helper"===a.type||"function"===a.type&&!s?m:c||a.value===t?g:"with"===s||!s&&"array"!==a.type?y:b)(e,a,r,n,o,l);return i?u:x(e,r,n,!0,u,N,o,l)}function E(e,t,n){var r=t||n?t?n?"^\\s*|\\s*$":"^\\s*":"\\s*$":"";return r?e.replace(new RegExp(r,"g"),""):e}function _(e,t){return[-1!==e.indexOf("~"),-1!==t.indexOf("~")]}function w(e,t){return'"'===e.charAt(0)||"'"===e.charAt(0)?(t.isString=!0,e.substr(1,e.length-2)):(/\.|\|/.test(e)&&(t.isStrict=!0),"true"===e||"false"!==e&&(isNaN(e)||""===e?e:+e))}function P(e){return e.lastIndexOf("%")+1}function k(e,t){return e?(e.replace(/\(.*?\)|(?:("|'|\|).*?\1)|\S+/g,function(e){e&&t.push(e)}),t):t}function A(e,t,n){var r="string"==typeof e,o=r&&!("."===e)&&!n,i=o?e.split("../"):[],a=o?i.pop().split(/[.\/]/):[e];return"@"===i[0]&&(a[i.length-1]=i[0]+a[i.length-1]),r?{name:t,value:a.pop(),path:a,parentDepth:i.length}:{name:t,value:e,isLiteral:!0,path:[]}}function O(e){var t,n,r=[],o={variable:{},isAlias:!1,aliasKey:"",isString:!1,isStrict:!1,active:0};return"("===(e=(t=e,n=o,t.replace(/^(?:this[/.]|\.\/)/,function(e){return e&&(n.isStrict=!0),""}).replace(/[[\]]/g,"")).substr(o.active=P(e))).charAt(0)?{variable:{root:(r=k(e=e.substr(1,e.length-2),[])).shift(),vars:R(r,[],{}),path:[]}}:(r=e.split("="),o.variable=r[1]?A(w(r[1],o),r[0],o.isString):A(w(r[0],o),"",o.isString),o)}function T(e,t){var n=t.replace(/\s*\|\s*/g,"").split(/\s+/);e.variable.name=n[0],e.aliasKey=n[1]||"",e.isAlias=!0}function R(e,t,n){for(var r=0,o=e.length,i=n||{};r<o;r++)"as"!==e[r]?(i=O(e[r]),t.push(i)):T(i,e[++r]);return t}function S(e,t,n,r,o,i){var a=k(t+(n?" "+n:""),[]),s=a.shift()||"",c=/^(?:if|each|with|unless)$/.test(s)?s:"",l=P(s=c?a.shift()||"":s);return i&&!s?{bodyFn:i}:{root:s=O(s.substr(l)),isPartial:">"===r,isHelper:!1,isEscaped:o.lastIndexOf(e.options.tags[0])<1,helper:"^"===r?"unless":c,vars:R(a,[],s),active:l,bodyFn:i||null}}function j(e,t,n,r,o){for(var i=t.split(e.inlineRegExp),a=0,s=i.length,c="",l=[];a<s;a+=5)i[2+a]&&/^(?:!|=)/.test(i[2+a])||(c=i[3+a]||"",l=_(a?i[4+a-5]:"",c?i[1+a]:""),o.push(E(i[a],l[0],l[1])),c&&r.push(-1!==c.indexOf("-block-")?{blockIndex:+c.substr(8)}:S(e,c,"",i[2+a]||"",i[1+a],null)));return function(t){return function(e,t,n,r,o){for(var i=0,a=n.length,s="";i<a;i++)s+=n[i],t[i]&&(s+=t[i].blockIndex>-1?r[t[i].blockIndex](o):x(e,o,t[i],!1,C(e,t[i],o,f(e,o,t[i])),C,null));return s}(e,r,o,n,t)}}}),function(e,t){"object"==typeof exports?module.exports=t(e,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(n){return t(e,n)}):e.Blick=t(e,e.Schnauzer)}(this,function(e,t,n){"use strict";var r=function(e,t){for(var n in t)t[n]=document.createElement(t[n]);return function(n,r){var o=((n||"").match(e)||[])[1],i=t[o]||t.default;return r&&(i=i.cloneNode()),i.innerHTML=n||"",i}}(/<\s*(\w*)[\s\S]*?>/,{option:"select",legend:"fieldset",area:"map",param:"object",thead:"table",tr:"tbody",col:"colgroup",td:"tr",default:"div"}),o=function(e,t){this.version="0.1.0",this.options={registerProperty:function(e,t,n,r,o){},forceUpdate:!1,attributes:{value:s,disabled:a,checked:a,autocomplete:a,contenteditable:a,readonly:a,required:a,selected:a},renderHook:u,isDynamic:function(e,t){return!0}},this.collector={},this.schnauzer={},this.dataDump=[],i(this,t||{},e)},i=function(e,n,r){for(var o in n)if("attributes"===o)for(var i in n[o])e.options[o][i]=n[o][i];else e.options[o]=n[o];e.schnauzer=new t(r,e.options),e.schnauzer.dataDump=[]};return o.prototype={renderHTML:function(e,t){return p(this,this.schnauzer.dataDump,r(this.schnauzer.render(e,t)))}},o;function a(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1,"focus"===n&&e.focus())}function s(e,t,n){e.setAttribute("value",n),e.value=n}function c(e,t){for(var n=e.parentNode.childNodes,r=n.length,o={},i=0,a=null;r--;)if(3===(o=n[r]).nodeType&&-1!==(i=o.textContent.indexOf(t))){a=o.splitText(i+t.length),o.textContent=o.textContent.substring(0,o.textContent.length-t.length);break}return a}function l(e,t){return(e=e.splitText(e.textContent.indexOf(t))).textContent=e.textContent.substring(t.length),e}function u(e,t,n,r,o,i,a,s,c){var l=this.dataDump.length,u=t.isHelper||t.isPartial,p=u&&t.vars[0]&&(t.vars[0].root=t.vars[0])||t,f=u?p.root.variable.value:a,d=!!p.active||this.options.forceUpdate,h=!!a&&d&&!!this.options.isDynamic(s,f),v=t.helper,m=n.scopes,g="{{#"+l+"}}",b="{{/"+l+"}}",y="";return!h&&p.active<3?e:(y=p.root.variable.path.join("."),y+=(y?".":"")+p.root.variable.value,this.dataDump.push({isBlock:r,track:o,bodyFn:c,active:p.active,isEscaped:p.isEscaped,start$:g,end$:b,path:i,noCache:(/^[ew]/.test(v)||t.isPartial)&&p.active>0||p.active>2,root:m[m.length-1].scope,helper:v,scope:m[0].scope||{},parent:s,key:y,out:e,helperFn:u?c:null}),g+e+b)}function p(e,t,n,r){for(var o,i,a,s=null,c=null,l=t.length,u={};l--;)u=t.pop(),o=n,i=u.start$,void 0,a=XPathResult.FIRST_ORDERED_NODE_TYPE,(c=(s=document.evaluate('//text()[contains(., "'+i+'")]',o,null,a,null).singleNodeValue||document.evaluate('//@*[contains(., "'+i+'")]',o,null,a,null).singleNodeValue)?s.ownerElement?f:u.isBlock?h:d:null)&&c(e,s,u.start$,u.end$,u,t,r);return n}function f(e,t,n,o,i,a){var s=/>/g,c=t.ownerElement,l=e.options.attributes[t.nodeName],u=function(e){var n=e.parentNode;if(11!==n.nodeType)return l?l(c,t.nodeName,n.textContent):void(t.textContent=n.textContent.replace(s,""))},p=t._cache=t._cache||r(t.textContent.replace(s,""),!0),f=[].slice.call(p.childNodes).filter(function(e){return-1!==e.textContent.indexOf(n)})[0];u(i.isBlock?h(e,f,n,o,i,a,u):d(e,f,n,o,i,a,u))}function d(e,t,n,o,i,a,s){return t=l(t,n),e.options.registerProperty(function(e,t,n,o,i,a){var s=o?null:document.createDocumentFragment(),c=[];return function(l){var u=[],p=a?a():l;if(i||o)return e.textContent=p,i&&i(e),[];for(c=[],u=r(p+"").childNodes;n.previousSibling!==t;)n.parentNode.removeChild(n.previousSibling);for(;u.length;)c.push(s.appendChild(u[0]));return n.parentNode.insertBefore(s,n),c}}(t,t.previousSibling,c(t,o),i.isEscaped,s,i.helperFn),i.key,i.path||i.key,i.parent,i.scope,i.root,i.active,e.collector),t}function h(e,t,n,o,i,a,s){return-1!==t.textContent.indexOf(o)&&t.splitText(t.textContent.indexOf(n)+n.length),t=l(t,n),e.options.registerProperty(function(e,t,n,o,i,a,s,c,l){var u=[],f=i.fnIdx,d=[];return d[f]=document.createDocumentFragment(),u[f]=!l&&a.length>0,function(a){var h=[],v=o(a),m={},g=t,b=f;for(f=i.fnIdx;(g=t.nextSibling)&&g!==n;)l?g.parentNode.removeChild(g):d[b].appendChild(g);if(!u[f]||l){for(d[f]=d[f]||document.createDocumentFragment(),m=p(e,s,r(v),c);g=m.childNodes[0];)h.push(d[f].appendChild(g));u[f]=!!h.length}return v&&n.parentNode.insertBefore(d[f],n),c&&c(t),s.length&&s.splice(0,s.length),h}}(e,t,c(t,o),i.bodyFn,i.track,i.out,a,s,i.noCache),i.key,i.path||i.key,i.parent,i.scope,i.root,i.active,e.collector),t}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(e,t){"use strict";var n=/\.|\//,r=[],o=0,i=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],forceEnhance:!1,childNodes:"childNodes",throwErrors:!1},this.model=e||[],a(this,t||{},this.model)},a=function(e,t,o){var i,a={},s=e.options;for(var c in r.push({}),d(e,"id",r.length-1),t)s[i=c]=t[i];s.listeners=[];for(var l=(t.listeners||[]).length;l--;)t.listeners[l]&&(s.listeners[l]=t.listeners[l].split(n));o.constructor!==Array&&(e.model=o=[o],e.standalone=!0),a[s.childNodes]=o,e.standalone||d(o,"root",a),h(e,o)};return i.prototype={getElementById:function(e){return r[this.id][e]},getElementsByProperty:function(e,n){var o=[],i="function"==typeof n,a=t!==n,c=t!==e,l=[],u=r[this.id];for(var p in u)s(u,p,e,n,o,i,a,c,l);return o},appendChild:function(e,t){return p(this,e,t=t||this.model.root,u(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return p(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return p(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return p(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&f(this,t),p(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return f(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,o=(t=(t||this.model).sort(e)).length;r<o;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,r){return g(this,e.split(n)[0],{current:t,root:t},e,r)},reinforceProperty:d,getProperty:function(e,t){return c(t,e.split(n))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return l(this,this.model)}},i.getElementById=function(e){var t=e.split(":");return r[t[0]]&&r[t[0]][t[1]]},i;function s(e,r,o,i,a,s,l,u,p){var f=t!==e[r][o]?e[r][o]:c(e[r],p[0]?p:p=u&&o.split(n));(l&&f===i||s&&i(f)||!l&&t!==f||!l&&!u)&&a.push(e[r])}function c(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function l(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&l(e,t[n][e.options.childNodes]),delete r[e.id][t[n][e.options.idProperty]],t.pop();return t}function u(e,t){return e[t]=e[t]||[],e[t]}function p(e,t,n,r,o,i){var a=e.options,s=t.parentNode;return t.parentNode?a.parentCheck&&function(e,t,n){var r=t;e===t&&b("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&b("ERROR: can't move parent inside it's own child",n)}(t,n,a):(t.__index=r,h(e,[t],n,o,i)),e.type=o,e.sibling=i,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&f(e,t,!0)||t,u(n,a.childNodes).splice(r||0,0,t),t.parentNode=n,a.moveCallback.call(e,t,o,i,s),t}function f(e,t,n){return!n&&l(e,[t]),u(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function d(e,n,r,o,i){return delete e[n],Object.defineProperty(e,n,{enumerable:!!i,configurable:!1,writable:o===t||!!o,value:r})}function h(e,t,n,i,a){for(var s=e.options,c=!1,l=!0,u=s.idProperty,p={},f=0,m=t.length;f<m;f++)(p=t[f])[u]||e.standalone||(p[u]=o++,l=!1),!e.standalone&&(r[e.id][p[u]]=p),c=!p.parentNode,e.standalone||(p.parentNode=n||e.model.root,p.index=p.index||0),c&&(e.standalone||(d(p,u,p[u],l),g(e,"index",{current:p},null,!0),g(e,"parentNode",{current:p},null,!0)),s.interseptor&&s.interseptor(e,p),v(e,p,e.options.listeners)),s.preRecursionCallback.call(e,p,i,a),p[s.childNodes]&&h(e,p[s.childNodes],p),s.enrichModelCallback.call(e,p,i,a),delete p.__index;return t}function v(e,t,n){for(var r=n.length;r--;)m(e,t,t,n[r],[])}function m(e,n,r,o,i,a,s,c){for(var l="",u=r,p=a||0,f=o.length;p<f;p++){if("childNodes"===(l=o[p]))return;if("*"===l){for(var d in u)m(e,n,u[d],o,i.concat(d),p+1,d,u);return}i.push(l),p<f-1&&(u=u[l]),c=s=null}(u!==t&&null!==u||c)&&(c||u).hasOwnProperty(s||l)&&g(e,s||l||"",{current:c||u,root:n},i.join("."))}function g(e,n,r,o,i){var a={};if(e.options.forceEnhance||r.current.hasOwnProperty(n))return a[n]=r.current[n],function(e,n,r,o,i,a){return Object.defineProperty(r.current,n,{get:function(){return"index"===n?function(e,n){return n.__index!==t?n.__index:(n.parentNode?u(n.parentNode,e.options.childNodes):e.model).indexOf(n)}(e,r.current):o[n]},set:function(t){!function(e,t,n,r,o,i){(e===i.options.idProperty||"index"===e||i.options.subscribe.call(i,i.type||e,t.root||t.current,r,n,i.sibling))&&(o[e]=n,b('ERROR: Cannot set property "'+e+'" to "'+r+'"',i.options));i.type=null,i.sibling=null}(a||n,r,o[n],o[n]=t,o,e)},enumerable:i})}(e,n,r,a,!i,o)}function b(n,r){if(!r.throwErrors&&e!==t&&e.console)return console.warn?console.warn(n):console.log(n);throw n}}),define("api",["VOM","blick","toolbox"],function(e,t,n){return function(r,o){var i={},a={},s={},c=n.Promise;function l(e,t,n){for(var r=0,o=t.length;r<o;r++)t[r]&&t[r].call(e,n)}function u(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function p(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var o=0,i=(n=n.slice(1)).length;o<i;o++)n[o]=n[o]?o===i-1?n[o]:decodeURIComponent(n[o]):null,e.names[o]&&(r[e.names[o]]=n[o]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},o=[];t<n;t++)r[(o=e[t].split("="))[0]]=o[1];return r}(n[i-1]),n.path=t.replace(/^\//,"").split("/"),n}function f(e,t,n){if(n)return n(function(){t.children[0]&&t.removeChild(t.children[0])},function(){t.appendChild(e)});t.children[0]?t.replaceChild(e,t.children[0]):t.appendChild(e)}for(var d in s.model=function(t,n){return new e(t,n)},s.sendToComponent=function(e,t){var n=this.getComponent(e);if(n&&n.onSend)return n.onSend(t)},s.triggerEvent=function(e,t,n){var r,o=n||{};o.detail=t,r=new CustomEvent(e,o),(o.element||window).dispatchEvent(r,t)},s.installEvent=function(e,t,r,o){return n.addEvent(e||window,t,r,o)},s.subscribeToComponent=function(e,t,n,r){var o=this,i=this.getComponent(e),a=i&&i["__cr-id"];return i?(this.subscribe(this.id,a,t,n,r),function(){o.unsubscribe(o.id,a,t,n)}):function(){}},s.destroyComponents=function(e){var t=this;e.forEach(function(e){t.destroyComponent(e)})},s.subscribe=function(e,t,n,r,o){var a=this;if(e=e?e.name||e.components&&e.components[t]||e:this.name,i[e]=i[e]||{},(t=i[e][t]=i[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return o&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),function(){a.unsubscribe(e,t,n,r)};delete i[e]},s.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,i[e]=i[e]||{},i[e]&&((t=i[e][t]=i[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&l(this,t[n],r))},s.unsubscribe=function(e,t,n,r){var o=-1,a={};return e="string"==typeof e?e:e.name||this.name,i[e]&&i[e][t]&&i[e][t][n]&&-1!==(o=(a=i[e][t][n]).indexOf(r.callback||r))&&a.splice(o,1),r.callback||r},s.addRoute=function(e,t,r){var o,a,s=this,c="object"==typeof e.path?{regexp:e.path}:(o=e.path,a=[],o=o.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return a.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+o+"(?:\\?([\\s\\S]*))?$"),names:a}),f=r||this.options.hash,d=p(c,u(f)),h=i[this.name]&&i[this.name].__router,v={};return this.subscribe(null,"__router",e.path,{callback:e.callback,names:c.names,regexp:c.regexp||c},t),t&&d&&e.callback.call(this,d),v=!h&&function(e,t,r){var o=void 0!==window.onpopstate?"popstate":"hashchange";return n.addEvent(window,o,function(n){var o={};for(var i in e)(o=p(e[i],u(r)))&&l(t,e[i],o)},t.id)}(i[this.name].__router,this,f),function(){s.removedRoute(e),!h&&v()}},s.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},s.toggleRoute=function(e,t){var n=i[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},s.template=function(e,n){(n=n||{}).helpers=n.helpers||this.options.helpers;var r=new t(e,n);if(n.share)for(var o in r.schnauzer.partials)this.options.partials[o]||"self"===o||(this.options.partials[o]=r.schnauzer.partials[o]);return r},s.renderModule=function(e){var t=e.require&&e.container,r=t&&"string"==typeof e.container?n.$(e.container):e.container,o=a[(e.context||"")+e.require],i=this;return t?o?new n.Promise(function(t){f(o.element,r,e.transition),o.instance&&o.instance.onLoad&&o.instance.onLoad(o.element,i),o.instance&&o.instance.onRender&&o.instance.onRender(e.data),t(o)}):new n.Promise(function(t){require([e.path||e.require],function(n){var o=document.createElement(n.selector),s=o.setAttribute.bind(o);e.input&&s("cr-input",e.input),e.event&&s("cr-event",e.event),e.name&&s("cr-name",e.name);var c=!n.instance&&n.init(o,null,e.this),l=n.instance||c;f(o,r,e.transition),l&&l.onLoad&&l.onLoad(o,i),l&&l.onRender&&l.onRender(e.data),t(a[(e.context||"")+e.require]=n.instance?n:{element:o,instance:c})})}):new c(function(){})},Object.defineProperties(o,{Toolbox:{value:n},instance:{value:new o}}),s)r[d]={value:s[d]};return r}}),define("controller",["toolbox","VOM"],function(e,t){"use strict";var n=e.keys;function r(e){for(var t in this.options={element:document.body},this.events={},e)this.options[t]=e[t]}return r.prototype={installEvent:function(r,i,a,s){var c=this.options.element,l=a.split("!"),u=l[2]||l[1]||l[0],p=!!l[2]||!l[1]&&!!/(?:focus|blur|mouseenter|mouseleave)/.test(u);this.events[u]||(this.events[u]=e.addEvent(i,u,function(i){!function(t,r,i,a,s){var c=e.closest(t.target,"[cr-event]"),l=c&&c.getAttribute("cr-id")||e.closest(t.target,"[cr-id]").getAttribute("cr-id"),u=s(l),p=u&&u.events&&n(u.events[t.type]),f=i&&n(i.events[t.type])||[],d=p&&p.length,h=d?u&&u.events:i&&i.events,v={_:!1};(d?p:i&&f||[]).forEach(function(e){o(r,h,u||i,e,t,v)}),c!==a&&d&&f.forEach(function(e){o(r,i.events,i,e,t,v)})}(i,r,s,c,t.getElementById)},p))},installEvents:function(e,t,r,o){var i=this;n(r).forEach(function(n){i.installEvent(e,t,n,o)})},removeEvent:function(e){this.events[e]&&(this.events[e](),delete this.events[e])},removeEvents:function(e){e.forEach(this.removeEvent.bind(this))},destroy:function(){this.removeEvents(n(this.events)),this.options.element=null}},r;function o(e,t,n,r,o,i){e[r]&&t[o.type][r].forEach(function(t){!i._&&t.contains(o.target)&&(i._=!1===e[r](o,t,n),i._&&o.stopPropagation())})}}),define("circular",["toolbox","blick","VOM","api","controller"],function(e,t,n,r,o){"use strict";var i=e.$,a=e.$$,s=e.$create,c=e.isArray,l=e.keys,u=0,p={},f={},d=s("div");function h(e,t){this.options={hash:"#",partials:{},helpers:{},decorators:{}},function(e,t,n){var r="string"==typeof t;r||(n=t||{});for(var o in n)e.options[o]=n[o];e.version="1.3.0",e.id="cr_"+u++,e.name=r?t:e.id,f[e.id]={}}(this,e,t||{})}return Object.defineProperties(h.prototype,r({getComponent:{value:function(e){var t=f[this.id][e];return t&&t.instance}},destroyComponent:{value:function(e){var t=e["__cr-id"].split(":"),n=f[t[0]][t[1]],r=n.instance;for(var o in r.onDestroy&&r.onDestroy(),r)r[o]&&r.hasOwnProperty(o)&&c(r[o])&&(r[o]=[]);for(var o in n.controller.removeEvents(l(n.controller.events)),n.models.forEach(function(e){e.destroy()}),n.subscribers.forEach(function(e){e()}),n)n[o]=null;delete f[t[0]][t[1]]}},destroy:{value:function(){var e=f[this.id];this.destroyComponents(l(e).map(function(t){return e[t].instance}))}},getAttributeData:{value:k}},h)),Object.defineProperties(h,{Module:{value:function(e,t){var n=i(e.selector,e.context),r=h.Component(e,t);return{component:r,instance:r.init(n,null,function(e){var t=e.closest('[cr-id|="cr_"]'),n=t&&t.getAttribute("cr-id").substr(3).split(":"),r=n&&f["cr_"+n[0]][n[1]];return r&&r.instance||r}(n)),element:n}}},Component:{value:function(t,r){return t.plugins={},t.components={},p[t.selector]||(p[t.selector]={Klass:r,selector:t.selector,subscribe$:t.subscribe$,templates:t.template&&function(e,t){e.innerHTML=t.template||"";var n={};return a("[cr-for]",e).forEach(function(e,r){var o=i("[cr-child]",e),a=e.getAttribute("cr-for"),s=a+r;n[a]={container:s,child:o?P(o,t,"child",a):null,template:P(function(e,t){return e.parentNode.setAttribute("cr-parent-container",t),e}(e,s),t,"loop",a)}}),n.this={template:P(e.firstElementChild,t,"main","this")},n}(d,t),styles:function(e,t){if(!t.styles)return;var n=s("style");return n.setAttribute("name",e),n.innerHTML="\n"+t.styles+"\n",document.head.appendChild(n),n}(t.selector,t),name:t.name||r.name,init:function(a,s,d){return function(t,r,a,s,d){var v=r.selector,b=p[v],y={},C="",N={},E={},P=r.circular||h.instance,A={},O=[],T=b.templates||{},R=t.getAttribute("cr-id"),S=t.getAttribute("cr-name");if(R&&!s)return f[P.id+":"+R];["partials","helpers","decorators","attributes"].forEach(function(e){r[e]||(r[e]=P.options[e])}),y={"cr-id":!s&&(t.setAttribute("cr-id",P.id+":"+u),u)||u,elements:{element:t},events:{},parentNode:{},views:{}},C=y["cr-id"],E=f[P.id][C]={instance:{},controller:{},models:[],parent:"",subscribers:[]},S&&(f[P.id][S]=f[P.id][C]);N=E.instance=function(t,n,r,o,i,a,s,l){var u=c(l)?l[0]:l,p=l&&l[1],d=!1,h=function(t,n){for(var r=t&&t.split(/\s*,\s*/)||[],o=[],i={vars:{},origin:{},names:{},static:{}},a=!1,s="",c="",l=r.length;l--;)o=r[l].split(/\s+as\s+/),a="'"===o[0].charAt(0)||'"'===o[0].charAt(0),s=a?e.convertToType(o[0].replace(/'|"/g,"")):"",c=a?s:o[0],i.vars[o[1]||c]=a?s:n[c],i.origin[c]=a?s:n[c],i.names[c]=o[1]||c,i.static[c]=a;return i}(i||n.getAttribute("cr-input"),s.parent=u)||{},v=u&&u["__cr-id"].split(":")[1];return n.removeAttribute("cr-input"),new t(n,r,function(e,t){for(var n in h.vars)"null"!==n&&(e[n]="function"==typeof h.vars[n]?h.vars[n].bind(u):h.vars[n]);if(!1!==t)for(var n in h.origin)h.static[n]||"null"===n||((d="this"===n||"."===n)&&(e[h.names[n]]=p),f[r.id][o].subscribers.push(function(t,n){return r.subscribeToComponent(d?p["cr-id"]:v,n,function(r){e[t[n]]=r},!0)}(h.names,n)));i&&u!==p&&function(e,t,n){var r=n.events||{};for(var o in r)e["pl-"+r[o]]||function(n){Object.defineProperty(e,"pl-"+n,{value:function(e,r,o){return t[n](e,r,o)}})}(r[o])}(u,e,a)},function(){return u||p})}(a,t,P,u++,s,r,E,d),Object.defineProperty(N,"__cr-id",{value:P.id+":"+C}),!s&&function(e,t,n,r){k(e,"cr-plugin",function(e,r,o){p[e]&&(p[e].init(o,r,t),delete n.plugins[e],o.removeAttribute("cr-plugin"))});for(var o=e.children.length,i="",a={};o--;)a=e.children[o],i=a.tagName.toLowerCase(),p[i]&&p[i].init(a,null,t)}(t,N,r),A=E.controller=new o({element:t}),O=l(T).concat(l(r.subscribe$)),E.models=O.filter(function(e,t){return O.indexOf(e)===t}).sort(function(e){return"this"===e?-1:1}).map(function(e){var o=T[e];return e?function(e){var t=function(e){var t=e.instance,r=e.modelName,o=r+"$",i=r+"$$",a=r+"$PR",s=r+"$Intersept";return new n("this"===r?t:t[r]||[],{idProperty:"cr-id",moveCallback:t[r+"$Move"]||function(){},enrichModelCallback:t[r+"$Enrich"]||function(){},listeners:e.listeners,interseptor:t[s],preRecursionCallback:function(n,r,o){t[a]&&t[a](this,n),e.template&&x(this,{item:n,type:r,siblPar:o,data:e})},subscribe:function(r,a,s,c,l){var u="childNodes"===r||!!n.prototype[r];e.template&&function(e,t,r,o,i,a,s){var c=r.elements&&r.elements.element,l=r.parentNode&&r.parentNode.elements||null,u=l?l.container||l.element:s.templateContainer,p=r["__cr-id"]||r["cr-id"],f=!r.childNodes&&s.childTemplate||s.template||null,d=f?f.collector:{},h="childNodes"===t||!!n.prototype[t];"removeChild"===t?(w(c,t,c.parentElement),function(e,t,n){var r=function(n){delete e[t][n]};if(e&&e[t]){for(var o in e[t])r(o);n||delete e[t]}}(d,p)):"sortChildren"===t?w(c,"appendChild",u):e[t]&&(r===a?x(e,{item:r,type:t,siblPar:a,data:s}):"replaceChild"!==t&&c&&h&&w(c,t,u,a.elements&&a.elements.element)),function(e,t,n,r,o,i,a){var s=n&&n[r]&&n[r][o];if(s)for(var c=s.length;c--;)_(s[c],e,t,i,a)}(s,r,d,p,t,o,i)}(this,r,a,s,c,l,e),t[o]&&!u&&t[o](r,a,s,c),t[i]&&t[i](r,a,s,c,u),u||(void 0===a.parentNode&&void 0===a.childNodes?e.crInstance.publish(e.crInstance.id,t["__cr-id"],r,s):a["cr-id"]&&e.crInstance.publish(e.crInstance.id,a["cr-id"],r,s))}})}(e);if("this"===e.modelName||!c(e.instance[e.modelName]))return t;for(var r in n.prototype)Object.defineProperty(t.model,r,{value:t[r].bind(t)});return Object.defineProperty(e.instance,e.modelName,{get:function(){return t.model},set:function(e){g(t,t.model,e,e.isDelta)}}),t}({instance:N,items:y,defData:r,template:!s&&o&&o.template,childTemplate:!s&&o&&o.child,templateContainer:!s&&"this"!==e&&o?function(e,t){var n=void 0!==t&&i('[cr-parent-container="'+t+'"]',e);return n&&n.removeAttribute("cr-parent-container"),n||e}(t,o.container):t,modelName:e,listeners:r.subscribe$&&r.subscribe$[e],crInstance:P,controller:A}):null}),s||r.template||m(t,r,y,E);return t.removeAttribute("cr-cloak"),N.onInit&&N.onInit(t,P,y),N}("string"==typeof a?i(a):a,t,r,s,d)},preparePlugin:function(e,n,r){var o=n.plugins[t.selector]=n.plugins[t.selector]||{},i=o[r.where]=o[r.where]||{};(i[r.modelName]=i[r.modelName]||[]).push(r.value),function(e,t){var n=e.getAttribute("cr-event"),r=n?[n]:[];for(var o in t.events)r.push(o+": pl-"+t.events[o]);e.setAttribute("cr-event",r.join("; "))}(e,t)}})}},Plugin:{value:function(e,t){return h.Component(e,t)}}});function v(e,t,n,r){for(var o=[].slice.call(a('[cr-plugin*="'+e+'"]',n)),i=0,s=o.length;i<s;i++)p[e].init(o[i],t.join(","),r[0]||r[1]),o[i].removeAttribute("cr-plugin")}function m(e,t,n,r){var o=l(t.components).join(","),s=o?a(o,e):[],c=s.length?function(e,t){var n=[].slice.call(e).map(function(e,t){var n=document.createElement(e.tagName);return e.parentNode.replaceChild(n,e),n.setAttribute("cr-replace",t),{index:t,element:e}});return function(){!function e(t,n){for(var r=t.length,o=[];r--;){var a=i('[cr-replace="'+t[r].index+'"]',n);a?a.parentNode.replaceChild(t[r].element,a):o.push(t[r])}o.length&&e(o,n)}(n,t)}}(s,e):function(){};n.views=A(e,function(e){}),n.events=k(e,"cr-event",function(t){r.controller.installEvent(r.instance,e,t,n)}),c()}function g(e,t,n,r){for(var o=0,i=n.length;o<i;o++)t[o]?y(e,t[o],n[o]):e.appendChild(n[o],t.parentNode||t[0]&&t[0].parentNode);if(!r)for(;t.length>n.length;)e.removeChild(t[t.length-1])}function b(e,t,n,r){var o;"childNodes"!==r&&t&&(o=c(t[r])&&Object.getOwnPropertyDescriptor(t,r).get,t[r]=o?n[r]:"object"==typeof t[r]||c(t[r])?y(e,t[r],n[r]||{}):n[r])}function y(e,t,n){for(var r in n)b(e,t,n,r);return n.childNodes&&g(e,t.childNodes,n.childNodes),t}function x(e,t){var n=t.item,r=t.data,o=r.items.elements.element,a=r.templateContainer,s=e.reinforceProperty,c=!n.childNodes&&!!r.childTemplate,l=c?r.childTemplate:r.template,u=function(e,t){var n=e.parentNode,r=e.index;return n?(t["@last"]=n.childNodes.length-1===r,t["@first"]=0===r,t["@index"]=r,t["@counter"]=r+1,t):t}(n,r.defData.extraModel||{}),f=l&&l.renderHTML(n,u),d=n.parentNode&&n.parentNode.elements,h=d&&d.container||a,v=c?h.lastElementChild:h,g=t.siblPar&&t.siblPar.elements&&t.siblPar.elements.element,b=void 0!==n.__index&&!n.childNodes,y=f?b?f.children[0]:w(f.children[0],t.type,v,g,!0):a,x=c?v:y.hasAttribute("cr-mount")?y:i("[cr-mount]",y);if(y.hasAttribute("cr-id")||y.setAttribute("cr-id",e.id+":"+(n["cr-id"]||0)),a!==o)s(n,"elements",{element:y,container:x}),s(n,"views",A(y,function(e){})),s(n,"events",k(y,"cr-event",function(e){r.controller.installEvent(r.instance,o,e)}));else{var N=p[y.tagName.toLowerCase()];N?(y.removeAttribute("cr-id"),N.init(y,null,r.instance)):m(o,r.defData,r.items,{instance:r.instance,controller:r.controller})}return C(y,r.defData,r.modelName,c,[r.instance,n]),y}function C(e,t,n,r,o){var i=t.components,s=t.plugins,c="this"===n,l=c?"main":!c&&!r?"loop":r?"child":"",u=[],f={};for(var d in i)l&&i[d][l][n]&&[].slice.call(a(d+', [cr-name="'+d+'"]',e)).forEach(function(e){(f=p[d].init(e,null,o))&&u.push(f)});for(var d in s)l&&s[d][l]&&s[d][l][n]&&v(d,s[d][l][n],e,o);return u}function N(e,t,n,r,o,i,a,s){var c=i["__cr-id"]||i["cr-id"],l=s[c]=s[c]||{};l[n]=l[n]||[],l[n].push({fn:e,forceUpdate:a>1,components:null})}function E(e,t,n,r,o){var i=(t.events||e.items.events)[r],a=e.items&&e.items.elements.element||e.instance.element;i||(i=t.events[r]={},e.controller.installEvent(e.instance,a,r)),i[o]?(i[o].filter(function(t,n){e.items.elements.element.contains(t)||i[o].splice(n,1)}),i[o].push(n)):i[o]=[n]}function _(e,t,n,r,o){var i,a=e.components;if(r!==o||e.forceUpdate){if(i=e.fn(r),t.controller)for(var s=i.length;s--;)1===i[s].nodeType&&k(i[s],"cr-event",function(e,r){E(t,n,i[s],e,r)});a&&(t.crInstance.destroyComponents(a),e.components=null);for(var c=0,l=i.length;c<l;c++)1===i[c].nodeType&&(e.components=C(i[c].parentNode,t.defData,t.modelName,!1,[t.instance,n]))}}function w(e,t,n,r,o){return"prependChild"===t?(t="insertBefore",r=n.children[0]):"insertAfter"===t&&(r.nextElementSibling?(t="insertBefore",r=r.nextElementSibling):t=""),n[t||"appendChild"](e,r),e}function P(e,n,r,o){return e?(e.parentNode&&e.parentNode.removeChild(e),e.removeAttribute("cr-for"),e.removeAttribute("cr-child"),k(e,"cr-plugin",function(e,t,i){p[e]&&p[e].preparePlugin(i,n,{where:r,modelName:o,value:t||"null"})}),p[e.tagName.toLowerCase()]||function(e,t,n,r){for(var o=e.join(",")+(e.length?', [cr-name="'+e.join('"], [cr-name="')+'"]':""),i=o?[].slice.call(a(o,n||document)):[],s=i.length,c={};s--;)if(i[s]){c=i[s];for(var l=i.length;l--;)c!==i[l]&&c.contains(i[l])&&i.splice(l,1)}for(s=i.length;s--;)t.push(i[s]),r&&r(i[s],i[s].getAttribute("cr-name")||i[s].tagName.toLowerCase())}(l(p),[],e,function(e,t){(n.components[t]=n.components[t]||{main:{},loop:{},child:{}})[r][o]=!0}),new t(e.outerHTML.replace(/(?:{{&gt;|cr-src=)/g,function(e){return"{"===e.charAt(0)?"{{>":"src="}),{helpers:n.helpers||{},partials:n.partials||{},attributes:n.attributes||{},registerProperty:N,isDynamic:function(e,t){return e?(Object.getOwnPropertyDescriptor(e,t)||{}).get:null}})):null}function k(e,t,n){for(var r={},o=[e].concat([].slice.call(a("["+t+"]",e))),i=o.length,s="",c=[];i--;)for(var l=(c=(s=o[i].getAttribute(t))?s.split(/\s*;+\s*/):[]).length,u=[],p="",f="";l--;)p=(u=c[l].split(/\s*:+\s*/))[0],(f=u[1])?(r[p]=r[p]||{},r[p][f]=r[p][f]||[],r[p][f].push(o[i])):(r[p]=r[p]||[],r[p].push(o[i])),n&&n(p,f,o[i]);return r}function A(e,t){for(var n=(e.hasAttribute("cr-view")?[e]:[]).concat([].slice.call(a("[cr-view]",e))),r={},o=n.length;o--;)r[n[o].getAttribute("cr-view")]=n[o],t&&t(n[o]);return r}});
//# sourceMappingURL=circular.min.js.map
/* HTML */
define("!global-partials.html",[],function(){return'{{#*inline "tag-list"}}\n<div class=tag-list>\n{{#each %tagList}}\n<a href="#/articles/0/{{this}}"class="tag-pill tag-default tag-outline">{{this}}</a>\n{{/each}}\n</div>\n{{/inline}}'});
define("!navbar.comp.html",[],function(){return'<nav class="navbar navbar-light">\n<div class=container>\n<a class=navbar-brand href=#/ >conduit</a>\n<ul class="nav navbar-nav pull-xs-right">\n<li class="nav-item {{#unless %visible}}hidden{{/unless}}"cr-for=navigation>\n<a class="nav-link{{#if %active}} active{{/if}}"href="#/{{%link}}">\n{{#if %image}}<img class=user-pic cr-src="{{%image}}">{{/if}}\n{{#if icon}}<i class="ion-{{icon}}"></i>{{/if}}&nbsp;{{%title}}\n</a>\n</ul>\n</div>\n</nav>'});
define("!home.component.html",[],function(){return'<div class=home-page>\n{{#unless %isLoggedIn}}<banner></banner>{{/unless}}\n<div class="container page">\n<div class=row>\n<div class=col-md-9>\n<feed-menu cr-input="tag, isLoggedIn"></feed-menu>\n<div class="loader article-preview">Loading articles...</div>\n<article-list cr-input="articles, pagination, user, isLoggedIn"></article-list>\n</div>\n<div class=col-md-3>\n<div class=sidebar>\n<p>Popular Tags</p>\n<tag-list cr-input=tags></tag-list>\n</div>\n</div>\n</div>\n</div>\n</div>'});
define("!article-meta.component.html",[],function(){return'<div class=article-meta>\n<div cr-for=model>\n<a href="#/profile/{{%author.username}}"><img cr-src="{{%author.image}}"></a>\n<div class=info>\n<a href="#/profile/{{%author.username}}"class=author>{{%author.username}}</a>\n<span class=date>{{simple-date %createdAt}}</span>\n</div>\n{{#if isSingle}}\n<button cr-event="click: likeSingle"class="btn btn{{#unless %favorited}}-outline{{/unless}}-primary btn-sm pull-xs-right">\n<i class=ion-heart></i>\n{{%favoritesCount}}\n</button>\n{{else}}\n{{#if %isOwn}}\n<a class="btn btn-outline-secondary btn-sm"href="#/new/{{%slug}}">\n<i class=ion-edit></i> Edit Article\n</a>\n&nbsp;\n<button class="btn btn-outline-danger btn-sm"cr-event="click: delete">\n<i class=ion-trash-a></i> Delete Article\n</button>\n{{else}}\n<button cr-event="click: follow"class="btn btn-sm btn{{#unless %author.following}}-outline{{/unless}}-secondary">\n<i class="{{#if %author.following}}ion-minus-round{{else}}ion-plus-round{{/if}}"></i>\n<span>{{#if %author.following}}Unfollow{{else}}Follow{{/if}} {{%author.username}}</span>\n</button>\n&nbsp;\n<button cr-event="click: like"class="btn btn-sm btn{{#unless %favorited}}-outline{{/unless}}-primary">\n<i class=ion-heart></i>\nFavorite Post <span class=counter>({{%favoritesCount}})</span>\n</button>\n{{/if}}\n{{/if}}\n</div>\n</div>'});
define("!article-comment-list.component.html",[],function(){return'<div>\n<div class=card cr-for=comments>\n<div class=card-block>\n<p class=card-text>{{%body}}</p>\n</div>\n<div class=card-footer>\n<a href="#/profile/{{%author.username}}"class=comment-author>\n<img cr-src="{{%author.image}}"class=comment-author-img>\n</a>\n&nbsp;\n<a href="#/profile/{{%author.username}}"class=comment-author>{{%author.username}}</a>\n<span class=date-posted>{{simple-date %createdAt}}</span>\n{{#if %isUser}}<span class=mod-options>\n<i cr-event="click: delete"class=ion-trash-a></i>\n</span>{{/if}}\n</div>\n</div>\n</div>'});
define("!article-comment-form.component.html",[],function(){return'<form cr-event="submit: submit"class="card comment-form">\n<div class=card-block>\n<textarea class=form-control name=body placeholder="Write a comment..."rows=3></textarea>\n</div>\n<div class=card-footer>\n<img cr-src="{{user.image}}"class=comment-author-img>\n<button type=submit class="btn btn-sm btn-primary">\nPost Comment\n</button>\n</div>\n</form>'});
define("!banner.component.html",[],function(){return'<div class=banner>\n<div class=container>\n<h1 class=logo-font>conduit</h1>\n<p>A place to share your <b><i>CircularJS</i></b> knowledge.</p>\n</div>\n</div>\n'});
define("!feed-menu.component.html",[],function(){return'<div class=feed-toggle>\n<ul class="nav nav-pills outline-active">\n<li class=nav-item cr-for=model>\n<a class="nav-link{{#if %active}} active{{/if}}{{#if %disabled}} disabled{{/if}}"cr-event="click: toggle"href="#/{{%link}}">{{%title}}</a>\n</li>\n</ul>\n</div>'});
define("!article-list.component.html",[],function(){return'<div>\n<div>\n{{#if %noItems}}<div class=article-preview>No articles available...</div>{{/if}}\n<div class=article-preview cr-for=articles>\n<article-meta cr-input="\'{{@index}}\' as idx, articles, trigger, user"></article-meta>\n<a href="#/article/{{%slug}}"class=preview-link>\n<h1>{{%title}}</h1>\n<p>{{%description}}</p>\n<span>Read more...</span>\n</a>\n{{>tag-list %tagList}}\n</div>\n</div>\n<article-list-pagination cr-input=pagination></article-list-pagination>\n</div>\n'});
define("!article.component.html",[],function(){return'<div class=article-page>\n<div cr-for=article>\n<div class=banner>\n<div class=container>\n<h1>{{%title}}</h1>\n<article-meta cr-input="metaData, user, articleSlug"></article-meta>\n</div>\n</div>\n<div class="container page">\n<div class="row article-content">\n<div class=col-md-12>\n{{#if %body}}{{{markdown %body}}}{{else}}No article available...{{/if}}\n<div>{{>tag-list %tagList}}</div>\n</div>\n</div>\n<hr>\n<div class=article-actions>\n<article-meta cr-input="metaData, user, articleSlug"></article-meta>\n</div>\n<div class=row>\n<div class="col-xs-12 col-md-8 offset-md-2">\n{{#if %isLoggedIn}}\n<article-comment-form cr-input="user, articleSlug"></article-comment-form>\n{{else}}\n<div>\n<a href=#/sign-in>Sign in</a> or <a href=#/sign-up>sign up</a> to add comments on this article.\n</div>\n{{/if}}\n<article-comment-list cr-input="comments, articleSlug"></article-comment-list>\n</div>\n</div>\n</div>\n</div>\n</div>'});
define("!settings.component.html",[],function(){return'<div class=settings-page>\n<div class="container page">\n<div class=row>\n<div class="col-md-6 offset-md-3 col-xs-12"cr-for=model>\n<h1 class=text-xs-center>Your Settings</h1>\n<ul class=error-messages>\n{{#each %errors}}<li>{{message}}</li>{{/each}}\n</ul>\n<form cr-event="submit: submit">\n<fieldset>\n<fieldset class=form-group>\n<input class=form-control name=image value="{{image}}"placeholder="URL of profile picture">\n</fieldset>\n<fieldset class=form-group>\n<input class="form-control form-control-lg"name=username value="{{username}}"placeholder="Your Name">\n</fieldset>\n<fieldset class=form-group>\n<textarea class="form-control form-control-lg"name=bio value="{{bio}}"rows=8 placeholder="Short bio about you"></textarea>\n</fieldset>\n<fieldset class=form-group>\n<input class="form-control form-control-lg"name=email value="{{email}}"placeholder=Email>\n</fieldset>\n<fieldset class=form-group>\n<input class="form-control form-control-lg"name=password type=password placeholder=Password>\n</fieldset>\n<button type=submit class="btn btn-lg btn-primary pull-xs-right">\nUpdate Settings\n</button>\n</fieldset>\n</form>\n<hr>\n<button class="btn btn-outline-danger"cr-event="click: logout">\nOr click here to logout.\n</button>\n</div>\n</div>\n</div>\n</div>'});
define("!sign-in.component.html",[],function(){return'<div class=auth-page>\n<div class="container page">\n<div class=row>\n<div class="col-md-6 offset-md-3 col-xs-12">\n<h1 class=text-xs-center>Sign {{#if %isSignIn}}in{{else}}up{{/if}}</h1>\n{{#unless %isSignIn}}<p class=text-xs-center>\n<a href=#/sign-in>Have an account?</a>\n</p>{{/unless}}\n<ul class=error-messages>\n{{#each %errors}}<li>{{message}}</li>{{/each}}\n</ul>\n<form cr-event="submit: submit"cr-view=form>\n<fieldset class=form-group>\n{{#unless %isSignIn}}<input class="form-control form-control-lg"disabled="{{%formDisabled}}"name=username placeholder="Your Name">{{/unless}}\n</fieldset>\n<fieldset class=form-group>\n<input class="form-control form-control-lg"disabled="{{%formDisabled}}"name=email placeholder=Email>\n</fieldset>\n<fieldset class=form-group>\n<input class="form-control form-control-lg"disabled="{{%formDisabled}}"name=password type=password placeholder=Password>\n</fieldset>\n<button type=submit disabled="{{%formDisabled}}"class="btn btn-lg btn-primary pull-xs-right">\nSign {{#if %isSignIn}}in{{else}}up{{/if}}\n</button>\n</form>\n</div>\n</div>\n</div>\n</div>\n'});
define("!new-post.component.html",[],function(){return'<div class=editor-page>\n<div class="container page">\n<div class=row>\n<div class="col-md-10 offset-md-1 col-xs-12">\n<ul class=error-messages>\n{{#each %errors}}<li>{{message}}</li>{{/each}}\n</ul>\n<form cr-event="submit: submit">\n<fieldset>\n<fieldset class=form-group>\n<input disabled="{{%formDisabled}}"name=title value="{{%title}}"class="form-control form-control-lg"placeholder="Article Title">\n</fieldset>\n<fieldset class=form-group>\n<input disabled="{{%formDisabled}}"name=description value="{{%description}}"class=form-control placeholder="What\'s this article about?">\n</fieldset>\n<fieldset class=form-group>\n<textarea class=form-control name=body disabled="{{%formDisabled}}"rows=8 placeholder="Write your article (in markdown)">{{%body}}</textarea>\n</fieldset>\n<fieldset class=form-group>\n<input disabled="{{%formDisabled}}"name=tagList value="{{%tagList}}"class=form-control placeholder="Enter tags">\n<div class=tag-list></div>\n</fieldset>\n<button class="btn btn-lg pull-xs-right btn-primary"type=submit disabled="{{%formDisabled}}">\nPublish Article\n</button>\n</fieldset>\n</form>\n</div>\n</div>\n</div>\n</div>'});
define("!profile.component.html",[],function(){return'<div class=profile-page>\n<div class=user-info>\n<div class=container>\n<div class=row>\n<div class="col-xs-12 col-md-10 offset-md-1"cr-for=profile>\n<img cr-src="{{%image}}"class=user-img>\n<h4>{{%username}}</h4>\n<p>{{%bio}}</p>\n{{#if %isUser}}\n<a class="btn btn-sm btn-outline-secondary action-btn"href=#/settings>\n<i class=ion-gear-a></i> Edit Profile Settings\n</a>\n{{else}}\n<button cr-event="click: follow"class="btn btn-sm btn-outline-secondary action-btn">\n<i class="{{#if %following}}ion-minus-round{{else}}ion-plus-round{{/if}}"></i>\n&nbsp;\n{{#if %following}}Unfollow{{else}}Follow{{/if}} {{%username}}\n</button>\n{{/if}}\n</div>\n</div>\n</div>\n</div>\n<div class=container>\n<div class=row>\n<div class="col-xs-12 col-md-10 offset-md-1">\n<feed-menu class=articles-toggle cr-input="tag, isLoggedIn, profileName"></feed-menu>\n<div class="loader article-preview">Loading articles...</div>\n<article-list cr-input="articles, pagination, user, isLoggedIn"></article-list>\n</div>\n</div>\n</div>\n</div>'});
/* javaScript */
define("data.service",[],()=>{const e={navigation:[{title:"Home",link:"",icon:"",image:!1,active:!1,visible:!0,app:"home.component"},{title:"New Post",link:"new",icon:"compose",image:!1,active:!1,manage:!0,visible:!1,app:"new-post.component"},{title:"Settings",link:"settings",icon:"gear-a",image:!1,active:!1,manage:!0,visible:!1,app:"settings.component"},{title:"Sign up",link:"sign-up",icon:"",image:!1,active:!1,manage:!1,visible:!0,app:"sign-in.component"},{title:"Sign in",link:"sign-in",icon:"",image:!1,active:!1,manage:!1,visible:!0,app:"sign-in.component"},{title:"myName",link:"profile",icon:"",image:"",active:!1,manage:!0,visible:!1,app:"profile.component"},{link:"articles",app:"home.component"},{link:"article",app:"article.component"},{link:"profile",app:"profile.component"}],getLink:t=>e.navigation.find(e=>e.link===(t||"")&&e),getLinks:()=>e.navigation.filter(e=>void 0!==e.active)};return e}),
define("api.service",["toolbox"],function(e){const t=window.Promise||e.Promise,i="https://conduit.productionready.io/api/",s=()=>localStorage.getItem("jwtToken"),r={"Content-Type":"application/json; charset=utf-8"},n={dataType:"json"},a=(e,t,i)=>{const n=s();return i.type=e&&e.toUpperCase()||"GET",t&&(i.headers=Object.assign({},r),n&&(i.headers.Authorization="Token "+n)),i},l=e=>(null===e.user.image&&(e.user.image=""),null===e.user.bio&&(e.user.bio=""),localStorage.setItem("jwtToken",e.user.token),g.appData.user=e.user,e.user),o=(t,i,s,r)=>e.ajax(t,a("GET",i,Object.assign({cache:s,resetCache:r},n))),c=(t,i,s)=>e.ajax(t,a(i||"POST",!0,Object.assign(s?{data:JSON.stringify(s||{})}:{},n))),h=e=>e.user||!s()?new t(t=>t(e.user&&JSON.parse(JSON.stringify(e.user)))):o(`${i}user`,!0,500).then(l).catch(()=>localStorage.removeItem("jwtToken")),u=new t(e=>e()),p=(e,t)=>Array.apply(null,{length:Math.ceil((t<e.limit+1?0:t)/e.limit)}).map((t,i)=>({active:void 0!==e.offset&&e.offset==i,tag:e.tag||"",ownFeed:e.ownFeed,author:e.author,favorited:e.favorited||""})),g={appData:{},user:e=>h(e),default:e=>h(e).then(t=>({user:t,isRegister:e.isRegister})),articles:e=>t.all([e.author?o(`${i}articles?${e.favorited?"favorited":"author"}=${encodeURIComponent(e.author)}&limit=${e.limit}&offset=${e.offset*e.limit}`,s()):o(`${i}articles${e.ownFeed?"/feed":""}?limit=${e.limit}&offset=${e.offset*e.limit}${e.tag?"&tag="+e.tag:""}`,s()).catch(()=>window.location.href="#/login"),e.isSameApp?u:o(`${i}tags`,!1,3e4),h(e)]).then(t=>({articles:t[0].articles,tags:t[1].tags,user:g.appData.user=t[2],pagination:p(e,t[0].articlesCount)})),article:e=>t.all([o(`${i}articles/${e.article}`,s()),o(`${i}articles/${e.article}/comments`),h(e)]).then(e=>({article:e[0].article,comments:e[1].comments,user:g.appData.user=e[2]})),editor:e=>t.all([e.article?o(`${i}articles/${e.article}`,s()):u]).then(e=>({article:e[0]})),profile:e=>t.all([e.isSameAuthor?u:o(`${i}profiles/${e.author}`,s()),o(`${i}articles?${e.favorited?"favorited":"author"}=${encodeURIComponent(e.author)}&limit=${e.limit}&offset=${e.offset*e.limit}`,s()),h(e)]).then(t=>({profile:t[0].profile,articles:t[1].articles,user:g.appData.user=t[2],pagination:p(e,t[1].articlesCount)})),"sign-in":e=>c(`${i}users/login`,null,e).then(l).then(e=>g.appData.user=e),userLogout:e=>new t(e=>{localStorage.removeItem("jwtToken"),g.appData.user=void 0,e()}),"sign-up":e=>c(`${i}users`,null,e).then(l).then(e=>g.appData.user=e),putSettings:e=>c(`${i}user`,"PUT",e.user),postArticle:e=>e.slug?c(`${i}articles/${e.slug}`,"PUT",e):c(`${i}articles`,"POST",e),deleteArticle:e=>c(`${i}articles/${e.slug}`,"DELETE"),postComment:e=>c(`${i}articles/${e.slug}/comments`,"POST",e.comment),deleteComment:e=>c(`${i}articles/${e.slug}/comments/${e.id}`,"DELETE"),postLike:e=>c(`${i}articles/${e.slug}/favorite`,e.favorited?"DELETE":"POST"),postFollow:e=>c(`${i}profiles/${e.author.username}/follow`,e.author.following?"DELETE":"POST")};return g}),
define("forms.service",[],()=>({processErrors:e=>{const t=JSON.parse(e.response);return Object.keys(t.errors).map(e=>t.errors[e].map(t=>({message:`${e} ${t}`}))[0])},getFormData:e=>{const t={};for(var i=e.length;i--;)e[i].hasAttribute("name")&&(t[e[i].name]=e[i].value.trim());return t},resetForm:e=>{for(var t=e.length;t--;)e[t].value&&(e[t].value="")},toggleForm:(e,t)=>{for(var i=e.length;i--;)t?e[i].setAttribute("disabled",!0):e[i].removeAttribute("disabled")}})),
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("marked",[],t):(e=e||self).marked=t()}(this,function(){"use strict";function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}var i,s=(function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(i={exports:{}},i.exports),i.exports),r=(s.defaults,s.getDefaults,s.changeDefaults,/[&<>"']/),n=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(e){return o[e]};var h=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function u(e){return e.replace(h,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var p=/(^|[^\[])\^/g;var g=/[^\w:]/g,m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var f={},d=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,k=/^([^:]+:\/*[^/]*)[\s\S]*$/;function v(e,t){f[" "+e]||(d.test(e)?f[" "+e]=e+"/":f[" "+e]=x(e,"/",!0));var i=-1===(e=f[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(k,"$1")+t:e+t}function x(e,t,i){var s=e.length;if(0===s)return"";for(var r=0;r<s;){var n=e.charAt(s-r-1);if(n!==t||i){if(n===t||!i)break;r++}else r++}return e.substr(0,s-r)}var w=function(e,t){if(t){if(r.test(e))return e.replace(n,c)}else if(a.test(e))return e.replace(l,c);return e},$=u,y=function(e,t,i){if(e){var s;try{s=decodeURIComponent(u(i)).replace(g,"").toLowerCase()}catch(e){return null}if(0===s.indexOf("javascript:")||0===s.indexOf("vbscript:")||0===s.indexOf("data:"))return null}t&&!m.test(i)&&(i=v(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i},_=function(e){for(var t,i,s=1;s<arguments.length;s++)for(i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S=function(e,t){var i=e.replace(/\|/g,function(e,t,i){for(var s=!1,r=t;--r>=0&&"\\"===i[r];)s=!s;return s?"|":" |"}).split(/ \|/),s=0;if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i},L=x,A=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var i=e.length,s=0,r=0;r<i;r++)if("\\"===e[r])r++;else if(e[r]===t[0])s++;else if(e[r]===t[1]&&--s<0)return r;return-1},D=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},I={exec:function(){}},z=function(e,t){e=e.source||e,t=t||"";var i={replace:function(t,s){return s=(s=s.source||s).replace(p,"$1"),e=e.replace(t,s),i},getRegex:function(){return new RegExp(e,t)}};return i},C=_,q={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n*)(title))? *(?:\n+|$)/,nptable:I,table:I,lheading:/^([^\n]+)\n{0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};q.def=z(q.def).replace("label",q._label).replace("title",q._title).getRegex(),q.bullet=/(?:[*+-]|\d{1,9}\.)/,q.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,q.item=z(q.item,"gm").replace(/bull/g,q.bullet).getRegex(),q.list=z(q.list).replace(/bull/g,q.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+q.def.source+")").getRegex(),q._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q._comment=/<!--(?!-?>)[\s\S]*?-->/,q.html=z(q.html,"i").replace("comment",q._comment).replace("tag",q._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),q.paragraph=z(q._paragraph).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",q._tag).getRegex(),q.blockquote=z(q.blockquote).replace("paragraph",q.paragraph).getRegex(),q.normal=C({},q),q.gfm=C({},q.normal,{nptable:/^ *([^|\n].*\|.*)\n*([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n*\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n].*(?:\n|$))*)\n*|$)/}),q.pedantic=C({},q.normal,{html:z("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",q._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:I,paragraph:z(q.normal._paragraph).replace("hr",q.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",q.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var R={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:I,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:I,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};R.em=z(R.em).replace(/punctuation/g,R._punctuation).getRegex(),R._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,R._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,R._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,R.autolink=z(R.autolink).replace("scheme",R._scheme).replace("email",R._email).getRegex(),R._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,R.tag=z(R.tag).replace("comment",q._comment).replace("attribute",R._attribute).getRegex(),R._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,R._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,R._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,R.link=z(R.link).replace("label",R._label).replace("href",R._href).replace("title",R._title).getRegex(),R.reflink=z(R.reflink).replace("label",R._label).getRegex(),R.normal=C({},R),R.pedantic=C({},R.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",R._label).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",R._label).getRegex()}),R.gfm=C({},R.normal,{escape:z(R.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),R.gfm.url=z(R.gfm.url,"i").replace("email",R.gfm._extended_email).getRegex(),R.breaks=C({},R.gfm,{br:z(R.br).replace("{2,}","*").getRegex(),text:z(R.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var E={block:q,inline:R},O=s.defaults,F=E.block,T=L,P=S,N=w,Z=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||O,this.rules=F.normal,this.options.pedantic?this.rules=F.pedantic:this.options.gfm&&(this.rules=F.gfm)}e.lex=function(t,i){return new e(i).lex(t)};var i=e.prototype;return i.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)},i.token=function(e,t){var i,s,r,n,a,l,o,c,h,u,p,g,m,f,d,b;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e)){var k=this.tokens[this.tokens.length-1];e=e.substring(r[0].length),k&&"paragraph"===k.type?k.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:T(r,"\n")}))}else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(l={type:"table",header:P(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(r[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=P(l.cells[p],l.header.length);this.tokens.push(l)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),o={type:"list_start",ordered:f=(n=r[2]).length>1,start:f?+n:"",loose:!1},this.tokens.push(o),c=[],i=!1,m=(r=r[0].match(this.rules.item)).length,p=0;p<m;p++)u=(l=r[p]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),p!==m-1&&(a=F.bullet.exec(r[p+1])[0],(n.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==n)&&(e=r.slice(p+1).join("\n")+e,p=m-1)),s=i||/\n\n(?!\s*$)/.test(l),p!==m-1&&(i="\n"===l.charAt(l.length-1),s||(s=i)),s&&(o.loose=!0),b=void 0,(d=/^\[[ xX]\] /.test(l))&&(b=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),h={type:"list_item_start",task:d,checked:b,loose:s},c.push(h),this.tokens.push(h),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(o.loose)for(m=c.length,p=0;p<m;p++)c[p].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):N(r[0]):r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),g=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(l={type:"table",header:P(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(r[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=P(l.cells[p].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens},t(e,null,[{key:"rules",get:function(){return F}}]),e}(),j=s.defaults,U=y,M=w,B=function(){function e(e){this.options=e||j}var t=e.prototype;return t.code=function(e,t,i){var s=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,s);null!=r&&r!==e&&(i=!0,e=r)}return s?'<pre><code class="'+this.options.langPrefix+M(s,!0)+'">'+(i?e:M(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:M(e,!0))+"</code></pre>"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,i,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,i){var s=t?"ol":"ul";return"<"+s+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+s+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,i){if(null===(e=U(this.options.sanitize,this.options.baseUrl,e)))return i;var s='<a href="'+M(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>"},t.image=function(e,t,i){if(null===(e=U(this.options.sanitize,this.options.baseUrl,e)))return i;var s='<img src="'+e+'" alt="'+i+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),J=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var i=t;do{this.seen[i]++,t=i+"-"+this.seen[i]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},e}(),G=s.defaults,V=E.inline,X=A,H=w,K=function(){function e(e,t){if(this.options=t||G,this.links=e,this.rules=V.normal,this.options.renderer=this.options.renderer||new B,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=V.pedantic:this.options.gfm&&(this.options.breaks?this.rules=V.breaks:this.rules=V.gfm)}e.output=function(t,i,s){return new e(i,s).output(t)};var i=e.prototype;return i.output=function(t){for(var i,s,r,n,a,l,o="";t;)if(a=this.rules.escape.exec(t))t=t.substring(a[0].length),o+=H(a[1]);else if(a=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.inRawBlock=!1),t=t.substring(a[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):H(a[0]):a[0];else if(a=this.rules.link.exec(t)){var c=X(a[2],"()");if(c>-1){var h=(0===a[0].indexOf("!")?5:4)+a[1].length+c;a[2]=a[2].substring(0,c),a[0]=a[0].substring(0,h).trim(),a[3]=""}t=t.substring(a[0].length),this.inLink=!0,r=a[2],this.options.pedantic?(i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=i[1],n=i[3]):n="":n=a[3]?a[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),o+=this.outputLink(a,{href:e.escapes(r),title:e.escapes(n)}),this.inLink=!1}else if((a=this.rules.reflink.exec(t))||(a=this.rules.nolink.exec(t))){if(t=t.substring(a[0].length),i=(a[2]||a[1]).replace(/\s+/g," "),!(i=this.links[i.toLowerCase()])||!i.href){o+=a[0].charAt(0),t=a[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(a,i),this.inLink=!1}else if(a=this.rules.strong.exec(t))t=t.substring(a[0].length),o+=this.renderer.strong(this.output(a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.em.exec(t))t=t.substring(a[0].length),o+=this.renderer.em(this.output(a[6]||a[5]||a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.code.exec(t))t=t.substring(a[0].length),o+=this.renderer.codespan(H(a[2].trim(),!0));else if(a=this.rules.br.exec(t))t=t.substring(a[0].length),o+=this.renderer.br();else if(a=this.rules.del.exec(t))t=t.substring(a[0].length),o+=this.renderer.del(this.output(a[1]));else if(a=this.rules.autolink.exec(t))t=t.substring(a[0].length),r="@"===a[2]?"mailto:"+(s=H(this.mangle(a[1]))):s=H(a[1]),o+=this.renderer.link(r,null,s);else if(this.inLink||!(a=this.rules.url.exec(t))){if(a=this.rules.text.exec(t))t=t.substring(a[0].length),this.inRawBlock?o+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):H(a[0]):a[0]):o+=this.renderer.text(H(this.smartypants(a[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===a[2])r="mailto:"+(s=H(a[0]));else{do{l=a[0],a[0]=this.rules._backpedal.exec(a[0])[0]}while(l!==a[0]);s=H(a[0]),r="www."===a[1]?"http://"+s:s}t=t.substring(a[0].length),o+=this.renderer.link(r,null,s)}return o},e.escapes=function(t){return t?t.replace(e.rules._escapes,"$1"):t},i.outputLink=function(e,t){var i=t.href,s=t.title?H(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,s,this.output(e[1])):this.renderer.image(i,s,H(e[1]))},i.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.mangle=function(e){if(!this.options.mangle)return e;for(var t,i=e.length,s="",r=0;r<i;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),s+="&#"+t+";";return s},t(e,null,[{key:"rules",get:function(){return V}}]),e}(),Y=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.text=function(e){return e},t.link=function(e,t,i){return""+i},t.image=function(e,t,i){return""+i},t.br=function(){return""},e}(),Q=s.defaults,W=_,ee=$,te=function(){function e(e){this.tokens=[],this.token=null,this.options=e||Q,this.options.renderer=this.options.renderer||new B,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new J}e.parse=function(t,i){return new e(i).parse(t)};var t=e.prototype;return t.parse=function(e){this.inline=new K(e.links,this.options),this.inlineText=new K(e.links,W({},this.options,{renderer:new Y})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},t.next=function(){return this.token=this.tokens.pop(),this.token},t.peek=function(){return this.tokens[this.tokens.length-1]||0},t.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},t.tok=function(){var e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,ee(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,i,s,r,n="";for(s="",t=0;t<this.token.header.length;t++)s+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(n+=this.renderer.tablerow(s),t=0;t<this.token.cells.length;t++){for(i=this.token.cells[t],s="",r=0;r<i.length;r++)s+=this.renderer.tablecell(this.inline.output(i[r]),{header:!1,align:this.token.align[r]});e+=this.renderer.tablerow(s)}return this.renderer.table(n,e);case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":e="";for(var a=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,a,l);case"list_item_start":e="";var o=this.token.loose,c=this.token.checked,h=this.token.task;if(this.token.task)if(o)if("text"===this.peek().type){var u=this.peek();u.text=this.renderer.checkbox(c)+" "+u.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(c)});else e+=this.renderer.checkbox(c);for(;"list_item_end"!==this.next().type;)e+=o||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,h,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},e}(),ie=_,se=D,re=w,ne=s.getDefaults,ae=s.changeDefaults,le=s.defaults;function oe(e,t,i){if(void 0===e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof t){var s=function(){i||(i=t,t=null),t=ie({},oe.defaults,t||{}),se(t);var s,r,n=t.highlight,a=0;try{s=Z.lex(e,t)}catch(e){return{v:i(e)}}r=s.length;var l=function(e){if(e)return t.highlight=n,i(e);var r;try{r=te.parse(s,t)}catch(t){e=t}return t.highlight=n,e?i(e):i(null,r)};if(!n||n.length<3)return{v:l()};if(delete t.highlight,!r)return{v:l()};for(;a<s.length;a++)!function(e){"code"!==e.type?--r||l():n(e.text,e.lang,function(t,i){return t?l(t):null==i||i===e.text?--r||l():(e.text=i,e.escaped=!0,void(--r||l()))})}(s[a]);return{v:void 0}}();if("object"==typeof s)return s.v}try{return t=ie({},oe.defaults,t||{}),se(t),te.parse(Z.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||oe.defaults).silent)return"<p>An error occurred:</p><pre>"+re(e.message+"",!0)+"</pre>";throw e}}return oe.options=oe.setOptions=function(e){return ie(oe.defaults,e),ae(oe.defaults),oe},oe.getDefaults=ne,oe.defaults=le,oe.Parser=te,oe.parser=te.parse,oe.Renderer=B,oe.TextRenderer=Y,oe.Lexer=Z,oe.lexer=Z.lex,oe.InlineLexer=K,oe.inlineLexer=K.output,oe.Slugger=J,oe.parse=oe,oe}),
define("global-partials",["schnauzer","!global-partials.html"],(e,t)=>{const i=new e(t).partials;return delete i.self,i}),
define("article-list-pagination.component",["circular"],({Component:e})=>e({selector:"article-list-pagination",template:'\n<ul>\n<li class="page-item{{#if %active}} active{{/if}}" cr-for="pagination">\n<a class="page-link" href="#/{{#if author}}profile/{{%author}}{{else\n}}articles{{/if}}/{{index}}{{#if %tag}}/{{%tag}}{{/if}}{{#if %favorited}}/favorites{{/if}}">\n{{@counter}}\n</a>\n</li>\n</ul>',styles:"article-list-pagination ul { padding: 0; margin: 2em 0 0; clear: both; }",subscribe$:{pagination:["active","tag","author","favorited"]}},class{constructor(e,t,i){this.pagination=[],i(this)}})),
define("banner.component",["circular","!banner.component.html"],({Component:e},t)=>e({selector:"banner",template:t},class{constructor(){}})),
define("feed-menu.component",["circular","!feed-menu.component.html"],({Component:e},t)=>e({selector:"feed-menu",template:t,subscribe$:{model:["*"],this:["activeFeed","tag","isLoggedIn","profileName","routeParams"]},styles:"feed-menu { display: block }"},class{constructor(e,t,i){this.tag="",this.isLoggedIn=!1,this.profileName="",i(this),this.model=[],this.activeFeed={},this.setLinks()}setLinks(e){const t=!!this.profileName,i=t?"My Articles":"Your Feed",s=t?"Favorited Articles":"Global Feed",r="my-feed"===this.tag,n=`profile/${this.profileName}/0`,a=t?n:"articles/0/",l=t?"":"my-feed",o=[{link:t?a+"/favorites":"",title:s,active:!1}];t&&this.tag||!t&&""===this.tag||((this.isLoggedIn||t)&&o.unshift({link:a+l,title:i,active:!1}),this.tag&&!r&&o.push({link:a+this.tag,title:"#"+this.tag,active:!0}),t||(this.activeFeed=this.tag&&!r?o[o.length-1]:r||!this.isLoggedIn&&!this.tag?o[0]:o[1]),this.model=o,t&&(this.activeFeed=this.model[this.tag?1:0]),this.activeFeed.active=!0)}this$(e,t,i,s){"activeFeed"===e&&(s&&(s.active=!1),i&&(i.active=!0)),i!==s&&(("tag"===e||"isLoggedIn"===e&&!this.profileName)&&this.setLinks(e),"profileName"===e&&this.setLinks(e))}toggle(e,t,i){this.activeFeed=i}})),
define("tag-list.component",["circular"],({Component:e})=>e({selector:"tag-list",template:'\n<div class="tag-list">\n<a cr-for="tags" href="#/articles/0/{{%key}}" class="tag-pill tag-default">{{%key}}</a>\n</div>',subscribe$:{tags:["key"]}},class{constructor(e,t,i){this.tags=[],i(this)}})),
define("template-helpers",["marked"],function(e){const t={short:{},numeric:{}};return{"simple-date":function(e,i){const s=e,r={year:"numeric",month:"long",day:"short"===i?void 0:"numeric"},n=r.day||"short",a=s.substr(0,10);return t[n][a]=t[n][a]||new Date(s).toLocaleDateString(void 0,r),t[n][a]},markdown:function(t){return e(t.trim())}}}),
define("navbar.comp",["circular","!navbar.comp.html","data.service"],({Component:e},t,i)=>e({selector:"navbar",template:t,styles:"navbar .hidden { display: none; }",subscribe$:{navigation:["active","visible","title","link","image"],this:["activeLink","user"]}},class{constructor(e,t,s){this.activeLink={},this.user={},s(this),this.navigation=i.getLinks()}this$(e,t,i,s={}){"user"===e&&((i=i||{}).id===s.id&&i||this.navigation.forEach(e=>{if(!1!==e.image&&(e.image=this.user?this.user.image:""),-1!==e.link.indexOf("profile")&&(e.link="profile/"+i.username,e.title=i.username),void 0!==e.manage){var t=e.manage?!!i.username:!i.username;e.visible=t}else e.visible=!0})),"activeLink"===e&&(s.active=!1,i.active=!0)}})),
define("settings.component",["circular","!settings.component.html","api.service","forms.service"],({Component:e},t,i,s)=>e({selector:"settings",template:t,subscribe$:{this:["errors"],model:["*"]}},class{constructor(e,t,s,r){this.user={},s(this),this.model=[],this.errors=[],this.rootApp=r(),i.user({user:this.user.username?this.user:void 0}).then(e=>{this.model=[{errors:[],...e}],this.rootApp.user=e,this.rootApp.isLoggedIn=!0})}logout(){i.userLogout().then(()=>{this.rootApp.user=void 0,this.rootApp.isLoggedIn=!1,window.location.href="#/"})}submit(e,t,r){e.preventDefault();const n={...s.getFormData(t),id:this.user.id};n.password||delete n.password,s.toggleForm(t,!0),i.putSettings({user:{...s.getFormData(t),id:this.user.id}}).then(e=>s.toggleForm(t,!1)).catch(e=>{this.errors=s.processErrors(e)})}})),
define("sign-in.component",["circular","!sign-in.component.html","api.service","forms.service"],({Component:e},t,i,s)=>e({selector:"sign-in",template:t,subscribe$:{this:["activeLink","isSignIn","errors","formDisabled"]}},class{constructor(e,t,i){this.activeLink={},i(this),this.errors=[],this.formDisabled=!1,this.formElm={},this.isSignIn=!0}onInit(e,t,i){this.formElm=i.views.form,this.isSignIn="sign-in"===this.activeLink.link}this$(e,t,i){if("activeLink"===e){if(-1===(i.link||"").indexOf("sign-"))return;this.isSignIn="sign-in"===i.link,this.errors=[],s.resetForm(this.formElm)}}submit(e,t,r){e.preventDefault(),this.formDisabled=!0,this.errors=[],i[this.activeLink.link]({user:s.getFormData(t)}).then(e=>{this.formDisabled=!1,window.location.href=this.isSignIn?"#/articles/0/my-feed":"#/"}).catch(e=>{this.formDisabled=!1,this.errors=s.processErrors(e)})}})),
define("new-post.component",["circular","!new-post.component.html","api.service","forms.service"],({Component:e},t,i,s)=>e({selector:"new-post",template:t,subscribe$:{this:["article","articleSlug","formDisabled","title","description","body","tagList"]}},class{constructor(e,t,i,s){this.article={},this.articleSlug="",i(this),this.formDisabled=!1,this.errors=[],this.title="",this.description="",this.body="",this.tagList="",this.updateInstance(this.article)}this$(e){"articleSlug"===e&&this.updateInstance(this.article)}updateInstance(e){const t=this.articleSlug;this.title=t?e.title:"",this.description=t?e.description:"",this.body=t?e.body:"",this.tagList=t?e.tagList:""}submit(e,t,r){e.preventDefault(),this.formDisabled=!0,this.errors=[];const n=s.getFormData(t);n.tagList=n.tagList.split(/,*\s(?:\s*,\s*)*\s*/),i.postArticle({article:n,slug:this.articleSlug}).then(e=>{this.formDisabled=!1,window.location.href=`#/article/${e.article.slug}`}).catch(e=>{this.formDisabled=!1,this.errors=s.processErrors(e)})}})),
define("article-meta.component",["circular","!article-meta.component.html","template-helpers","api.service"],({Component:e},t,i,s)=>e({selector:"article-meta",template:t,styles:"article-meta img { overflow: hidden; }",helpers:i,subscribe$:{this:["articleSlug","metaData","trigger","user"],model:["*","author.*"]}},class{constructor(e,t,i){this.articleSlug="",this.metaData=[],this.user={},this.articles={},this.trigger=!1,this.idx=-1,i(this),this.crInst=t,this.model=-1===this.idx?this.updateMeta(this.metaData):[],-1===this.idx&&t.installEvent(null,"meta-click",e=>{const t=this.model[0],i=e.detail.item,r=e.detail.type;if(!(this.user&&this.user.username))return window.location.href="#/sign-up";t&&t!==i&&("follow"===r?s.postFollow({author:{username:t.author.username,following:t.author.following}}).then(e=>{i.author.following===t.author.following&&(t.author.following=!t.author.following),i.author.following=!i.author.following}):"like"===r&&s.postLike({slug:t.slug,favorited:t.favorited}).then(e=>{i.favorited===t.favorited&&(t.favorited=!t.favorited),i.favorited=!i.favorited}))})}updateMeta(e){return[{isOwn:this.user&&this.user.username===e.author.username,slug:this.articleSlug,...JSON.parse(JSON.stringify(e))}]}this$(e,t,i){if("articleSlug"===e&&this.metaData)this.model=this.updateMeta(this.metaData);else if("trigger"===e){if(this.idx!=i)return;const e=this.articles[this.idx];this.model=[{isSingle:!0,isOwn:this.user&&e.author.username===this.user.username,author:{...e.author},favorited:e.favorited,favoritesCount:e.favoritesCount,createdAt:e.createdAt}]}}model$(e,t,i){"favorited"===e&&(t.favoritesCount+=i?1:-1)}follow(e,t,i){this.crInst.triggerEvent("meta-click",{item:i,type:"follow"})}like(e,t,i){this.crInst.triggerEvent("meta-click",{item:i,type:"like"})}likeSingle(e,t,i){this.user&&this.user.username?s.postLike({slug:this.articles[this.idx].slug,favorited:i.favorited}).then(e=>{i.favorited=!i.favorited}):window.location.href="#/sign-up"}delete(e,t,i){s.deleteArticle({slug:this.articleSlug}).then(e=>window.location.href="#/")}})),
define("article-comment-list.component",["circular","!article-comment-list.component.html","template-helpers","api.service"],({Component:e},t,i,s)=>e({selector:"article-comment-list",template:t,helpers:i,styles:"",subscribe$:{this:["comments","articleSlug"],comments:["*","author.*"]}},class{constructor(e,t,i){this.comments=[],this.articleSlug="",i(this)}delete(e,t,i){s.deleteComment({id:i.id,slug:this.articleSlug}).then(e=>{window.location.href=`#/article/${this.articleSlug}`})}})),
define("article-comment-form.component",["circular","!article-comment-form.component.html","template-helpers","api.service","forms.service"],({Component:e},t,i,s,r)=>e({selector:"article-comment-form",template:t,helpers:i,subscribe$:{this:["articleSlug"]}},class{constructor(e,t,i){this.user={},this.articleSlug="",i(this)}submit(e,t,i){e.preventDefault(),s.postComment({comment:{comment:r.getFormData(t)},slug:this.articleSlug}).then(e=>{r.resetForm(t),window.location.href=`#/article/${this.articleSlug}`})}})),
define("article-list.component",["circular","!article-list.component.html","template-helpers","global-partials","article-list-pagination.component","article-meta.component"],({Component:e,Toolbox:{lazy:t}},i,s,r)=>e({selector:"article-list",template:i,partials:r,helpers:s,styles:"\narticle-list .tag-list { float: right; max-width: 75%; }\narticle-list .article-preview { clear: both }",subscribe$:{this:["pagination","noItems","trigger","user"],articles:["*","author.*"]}},class{constructor(e,t,i){this.user={},this.articles=[],this.pagination=[],i(this),this.noItems=!this.articles.length,this.trigger=!1}onInit(){this.articles.forEach(e=>this.trigger=e.index)}articles$$(e,i,s,r){t(()=>{this.trigger=i.index,this.noItems=!this.articles.length},i)}})),
define("article.component",["circular","!article.component.html","api.service","template-helpers","global-partials","article-meta.component","article-comment-list.component","article-comment-form.component"],({Component:e},t,i,s,r)=>e({selector:"article",template:t,partials:r,styles:"article .tag-list { text-align: right }",helpers:s,subscribe$:{this:["articleSlug","isLoggedIn","article","comments","metaData","user"],article:["*"]}},class{constructor(e,t,i){this.user={},this.articleSlug="",this.isLoggedIn=!1,this.article=[],this.comments=[],i(this),this.metaData=this.getMetaData(this.article[0]),this.article[0].isLoggedIn=this.isLoggedIn}this$(e){"articleSlug"===e&&(this.metaData=this.getMetaData(this.article[0]),this.article[0].isLoggedIn=this.isLoggedIn)}getMetaData(e){return{author:{...e.author},favorited:e.favorited,favoritesCount:e.favoritesCount,createdAt:e.createdAt}}})),
define("home.component",["circular","!home.component.html","api.service","article-list.component","tag-list.component","feed-menu.component","banner.component"],({Component:e},t,i)=>e({selector:"home",template:t,subscribe$:{this:["*"]}},class{constructor(e,t,i){this.user={},this.isLoggedIn=!1,this.articles=[],this.pagination=[],this.tags=[],this.tag="",i(this)}})),
define("profile.component",["circular","!profile.component.html","home.component","api.service"],({Component:e},t,i,s)=>e({selector:"profile",template:t,subscribe$:{this:i.subscribe$.this,profile:["*"]}},class extends i.Klass{constructor(e,t,i){super(e,t,i),this.profile=[],this.profileName="",i(this)}follow(e,t,i){if(!this.isLoggedIn)return window.location.href="#/sign-up";s.postFollow({author:{username:i.username,following:i.following}}).then(e=>{i.following=!i.following})}})),
define("main-app.comp",["circular","data.service","api.service","navbar.comp","home.component","new-post.component","settings.component","sign-in.component","profile.component"],({Module:e,Toolbox:{Promise:t}},i,s)=>e({selector:"[main-app]",subscribe$:{this:["*"]},styles:"\n.loader { display: none; }\n.loading article-list { display: none }\n.loading .loader { display: block }"},class{constructor(){this.activeLink={},this.tag="",this.articleSlug="",this.user={},this.isLoggedIn=!1,this.articles=[],this.pagination=[],this.profile=[],this.profileName="",this.tags=[],this.myArticles=[],this.myPagination=[],this.myArticle={},this.comments=[],this.article=[]}onInit(e,t,s){t.addRoute({path:"(/:appName)(/:var0)(/:var1)(/:var2)(/*)",callback:({parameters:e})=>{const r=this.activeLink.app;this.activeLink=i.getLink(e.appName)||{};const n=this.activeLink.app||"";s.views.outlet.className=`loading${/^art/.test(n)?"-article":""}`,this.getData(n,e.var0,e.var1,e.var2).then(t=>this.delegateData(t,e.appName,e.var0)).then(()=>{this.articleSlug=e.var0||"",s.views.outlet.className="",r!==n&&this.updateView(n,s.views.outlet,t)})}},!0)}getData(e,i,r,n){const a=e.substring(0,3),l=this.user&&this.user.username?this.user:void 0;switch(this.tag="hom"===a?r:"",a){case"hom":return s.articles({limit:10,offset:i||0,tag:r,ownFeed:"my-feed"===r,user:l});case"pro":return s.profile({limit:5,offset:r||0,author:i,favorited:!!n,user:l});case"art":return s.article({article:i,user:l});case"new":return this.article[0]||!i?new t(e=>e(this.article[0]||{})):s.article({article:i,user:l});default:return new t(e=>e({}))}}delegateData(e,t,i){const s=!t||"articles"===t;if(e.user&&(this.user=e.user,this.isLoggedIn=this.user&&!!this.user.username),e.articles&&s&&(this.articles=e.articles),e.pagination&&s&&(this.pagination=e.pagination),e.tags&&(this.tags=e.tags.map(e=>({key:e}))),e.articles&&!s&&(this.myArticles=e.articles),e.pagination&&!s&&(this.myPagination=e.pagination),e.article){this.article=[e.article];const t=this.user.username===e.article.author.username;this.myArticle={title:t?e.article.title:"",description:t?e.article.description:"",body:t?e.article.body:"",tagList:t?e.article.tagList.join(", "):""}}e.comments&&(this.comments=e.comments.map(t=>(t.isUser=e.user&&e.user.username===t.author.username,t))),e.profile&&(this.profileName=e.profile.username,this.profile=[{isUser:e.user&&e.profile.username===e.user.username,...e.profile,bio:e.profile.bio||""}])}updateView(e,t,i){const s=e.substring(0,3),r=`user, tag, profileName, isLoggedIn${"hom"===s?",articles, pagination, tags":"art"===s?",article, articleSlug, comments":"new"===s?",articleSlug, myArticle as article":"pro"===s?",profile, myArticles as articles, myPagination as pagination":"sig"===s?",activeLink":""}`;i.renderModule({require:e,container:t,input:r,this:this,transition:(e,t)=>{e(),t()}}).then(e=>{})}}));