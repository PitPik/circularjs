!function(e){"use strict";var t=e.Math.random,n=document.createElement("a"),r=e.document.createDocumentFragment(),i=0,o=h.modules={},a={};function s(){return"_module_"+(t()+t())}function c(e){var t,r=/(?:^\!|^http[s]*:|.*\.js$)/.test(e)?"":".js";return e=(h.paths[e]||e).replace(/^\!/,""),t=function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search}((h.baseUrl||".")+"/"+e+r).replace(/^.\//,""),h.mapPath?h.mapPath(e,r,t):t}function l(e){var t={mapPath:"function",baseUrl:"string"},n=["lookaheadMap","paths","options","mapPath","baseUrl"];if(!h[n[0]])for(var r=n.length;r--;)h[n[r]]="string"===t[n[r]]?"":"function"===t[n[r]]?null:{};for(var i in e)if(-1!==n.indexOf(i))if(t[i])h[i]=e[i];else for(var o in e[i])h[i][o]=e[i][o];return h}function u(e){var t=h.lookaheadMap[e],n=h.options.minifyPrefix;if(t&&-1===(h.paths[e]||"").indexOf(n)){h(t);for(var r=0,i=t.length;r<i;r++)o[t[r]]||u(t[r])}}function p(e){for(var t=e.deps,n=!0,r=t.length;r--;)o[t[r]]&&void 0===o[t[r]].done&&(n=!1);n&&f(e)}function f(e){var t=e.parents||[];e.factory&&!e.isFile?(e.done=e.factory.apply(null,e.deps.map(function(e){return o[e].done})),delete e.factory):void 0===e.done&&delete o[e.name];for(var n=t.length;n--;)o[t[n]]&&p(o[t[n]])}function d(t,n){var r,i=e.document.createElement("script");return i.type="text/javascript",i.async=i.defer=!n,i.charset="utf-8",i.onload=i.onreadystatechange=(r=t,function(e){var t=e.currentTarget||e.srcElement;"load"!==e.type&&"complete"!==t.readyState||(i.onload=i.onreadystatechange=null,function(e){var e=o[e.name];if(0===a.name.indexOf("_module_")){e.done=a.done,e.factory=a.factory,e.deps=a.deps;for(var t=e.deps.length,n={};t--;)(n=o[e.deps[t]].parents)[n.indexOf(a.name)]=e.name;delete o[a.name]}p(e)}(r))}),i.src=t.path,i}function h(e,t,n){e.constructor===Array?v(s(),e,t,n):v(s(),[],e,t)}function v(e,t,n,l){var v={};if("string"!=typeof e)return h(e,t,n);e=e||s(),v=o[e],function(e,t,n){for(var a=t.length,s={},l="";a--;)l=t[a],o[l]?o[l].parents.push(e):(s=o[l]={name:l,isFile:"!"===l.charAt(0),path:c(l),parents:[e]}).isFile?h.getFile(s,f):(p=d(s,n),r.appendChild(p),clearTimeout(i),i=setTimeout(function(){document.head.appendChild(r)}),u(l));var p}(e,t,l),v?(v.deps=t,v.factory=n):p(v=o[e]={name:e,deps:t,factory:n,parents:[]}),a=v}v.amd={},h.config=l,h.getFile=function(e,t){return e},e.define=v,e.require=h,l({})}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,t){"use strict";var n=document.createElement("a"),r={undefined:t,null:null,NaN:NaN,true:!0,false:!1},i={convertToType:function(e){return r.hasOwnProperty(e)?r[e]:e.toString&&+e.toString()===e?+e:e},closest:function(e,t,n){if(e.closest)i.closest=function(e,t){return e.closest(t)};else{var r=e.msMatchesSelector||e.webkitMatchesSelector||e.matches;i.closest=function(e,t){if(!(n||document.documentElement).contains(e))return null;do{if(r.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}}return i.closest(e,t,n)},$create:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return(t||document).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArray:Array.isArray||function(e){return e&&e.constructor===Array},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&i.removeClass(e,n),t&&i.addClass(t,r||n)},addEvents:function(e,t,n,r){for(var o=[],a=e.length;a--;)o.push(i.addEvent(e[a],t,n,r));return o},removeEvents:function(e){for(var t=e.length;t--;)e[t]()},addEvent:function(e,n,r,i){return i=i!==t?i:!!/(?:focus|blur|mouseenter|mouseleave)/.test(n),e.addEventListener(n,r,i),function(){e.removeEventListener(n,r,i)}},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){i.lazy(function(){i.storageHelper.save(e,t)},n||i.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:i>o?-1:0:i<o?-1:i>o?1:0},normalizePath:function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search},ajax:function(e,n){var r,o,s=null,c=(new Date).getTime();return n=n||{},e=i.normalizePath(e),o=a[e]&&a[e].time||0,s=(s=(r=!0===n.cache?c+1e8:n.cache?o>c?o:c+n.cache:0)&&!n.resetCache&&o>c?a[e]:null)||new i.Promise(function(r,i){var o,a,s=new XMLHttpRequest,c=(n.method||n.type||"GET").toUpperCase();if(s||i("Giving up :( Cannot create an XMLHTTP instance"),n||(e=(n=e).url),s.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||e.status>299))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,n.dataType,i);if(e!==t){if("json"===n.dataType)try{e=JSON.parse(e)}catch(e){return void i("Caught Exception: "+e.stack)}r(e)}},s.open(c,e,n.async||!0,n.username,n.password),"xml"===n.dataType&&s.setRequestHeader("Content-Type","text/xml"),"GET"!==c&&n.csrf&&s.setRequestHeader("X-CSRF-Token",(o=n.csrf,(a=document.cookie.split(o+"=")[1])&&a.split(";")[0])),n.headers)for(var l in n.headers)s.setRequestHeader(l,n.headers[l]);return s.send(n.data),function(){s.abort()}}),r?(a[e]=s,a[e].time=r):delete a[e],s},errorHandler:function(e){console.error(e)},Promise:s};function o(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n}e.Event=e.Event||o,e.CustomEvent=e.CustomEvent||o;var a={};function s(e){this._state=0,this._handled=!1,this._value=t,this._deferreds=[],this._returnFn=f(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,setTimeout(function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){try{n=r(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,n)}else(1===e._state?l:u)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return f(n.bind(t),e)}e._state=1,e._value=t,p(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function f(e,t){var n=!1,r=function(e){n||(n=!0,u(t,e))};try{return e(function(e){n||(n=!0,l(t,e))},r)}catch(e){r(e)}}return s._cache={},s.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},s.prototype.then=function(e,t){var n=this._returnFn,r=new s(function(){return n});return c(this,{onFulfilled:e||null,onRejected:t||null,promise:r}),r},s.prototype.cancel=function(e){var t=s._cache[e];return s._cache[e]=this,t?(1!==t._state&&(t._returnFn&&"function"==typeof t._returnFn&&t._returnFn(),t._deferreds=[],t.then=t.catch=function(){},t._handled=!0,t._state=1),t._returnFn=null,this):this},s.all=function(e){var t=[];return e.reduce(function(e,n){return e.then(function(){return n}).then(function(e){return t.push(e)})},new s(function(e,t){e(null)})).then(function(){return t})},e.require&&(require.getFile=function(e,t){i.ajax(e.path,{cache:"!!"!==e.name.substr(0,2)}).then(function(n){e.done=n,t(e)})}),i}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,t){"use strict";var n=function(e,n){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:t,render:t},r(this,n||{},e)},r=function(e,t,n){for(var r in t)e.options[r]=t[r];for(var i in t=e.options,e.entityRegExp=new RegExp("["+a(t.entityMap,[]).join("")+"]","g"),s(e,t.tags),e.helpers=t.helpers,e.decorators=t.decorators,e.partials={},t.partials)e.registerPartial(i,t.partials[i]);n&&e.registerPartial(t.recursion,n)},i=Array.isArray||function(e){return e&&e.constructor===Array},o=function(e){return e&&"function"==typeof e},a=Object.keys||function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return n.prototype={render:function(e,t){return this.partials[this.options.recursion](e,t)},parse:function(e){return this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerDecorator:function(e,t){this.decorators[e]=t},unregisterDecorator:function(e,t){delete this.decorators[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||"function"==typeof t?t:function e(t,n,r){var o="";var a=t.options.tags;for(;o!==n&&(o=n);)n=n.replace(t.sectionRegExp,function(n,i,o,s,c,l,u){if("#*"===o){var p=c.replace(/(?:^['"]|['"]$)/g,"");return t.partials[p]=t.partials[p]||e(t,u,r),""}return u=u.split(t.elseSplitter),r.push(C(t,[y(t,u[0],r,s),u[1]&&y(t,u[1],r,s)],s,c&&c.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===i,"^"===o)),a[0]+"-section- "+(r.length-1)+" "+(c||s)+a[1]});n=y(t,n,r);return function(e,t){return n(l(e,t&&(i(t)&&t||[t])))}}(this,t,[])},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){s(this,e)}},n;function s(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t,r=e.options.characters+"\\][";e.inlineRegExp=new RegExp("("+n[0]+")([>!&=])*\\s*([\\w\\"+r+"\\.]+)\\s*([\\w"+r+"|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp("("+n[0]+")([#^][*%]*)\\s*([\\w"+r+"]*)(?:\\s+([\\w$\\s|./"+r+"]*))*("+n[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),e.elseSplitter=new RegExp(n[0]+"else"+n[1])}function c(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t}function l(e,n,r,i){var o=r!==t,a=!e.__schnauzerData,s=o&&!a&&e.extra||[],l=!a&&e.helpers||[];return{extra:n?c(n,s):s,path:a?[e]:o?c(e.path,[r]):e.path,helpers:i?c(l,o&&[i]||[{}]):l,__schnauzerData:!0}}function u(e,t){for(var n=0,r=t.length;n<r;n++)"./"!==t[n]&&(e=e&&e[t[n]]);return e}function p(e,n,r){return e!==t?e:r?u(n,r):n}function f(e,n,r,i){if(r){var o=e.path[i]||{},a=e.helpers[i]||{},s=p(a[n],a,r);if("this"===n||"."===n)return e.path[0];if(s===t&&(s=u(o,r)),s!==t)return s;for(var c=e.extra.length;c--;)if((s=p(e.extra[c][n],e.extra[c],r))!==t)return s}}function d(e){if(!e)return{};var t=e.split("="),n=t.length>1?t[1]:t[0],r=n.charAt(0),i='"'===r||"'"===r,o=!1,a=0,s=[],c=[],l=!1,u="%"===n.charAt(1)?2:"%"===r?1:0;return i?n=n.replace(/(?:^['"]|['"]$)/g,""):((c=(n=u?n.substr(u):n).split("../")).length>1&&(n=("@"===c[0]?"@":"")+c.pop(),a=c.length),s=n.split(/[\.\/]/),n=n.replace(/^(\.\/|this\.|this\/|\*)/,function(e,t){return"*"===t?(o=!0,""):(l=!0,s[0]="./","")}).replace(/(?:^\[|\]$)/g,"")),{name:t.length>1?t[0]:n,value:n,isActive:u,isString:i,isInline:o,strict:l,keys:s,depth:a}}function h(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function v(e,t,n,r,o,a,s,c){return e.options.tools?e.options.tools(e,f,l,t,n,r,o,a,s,c):t[i(r)||a.isInline?"apply":"call"]({getData:function(e){return(e=a.rawParts[e]||{value:e,keys:[e],depth:0}).isString?e.value:f(o,e.value,e.keys,e.depth)},escapeHtml:function(t){return h(t,e)},getBody:function(){return s&&s(o)||""},getAltBody:function(){return c&&c(o)||""}},a.isInline?[function(){return s||""},a.parts,e]:r)}function m(e,t,n,r,i,o,a){var s=t.name;return o=p(o,""),e.options.render?v(e,e.options.render,s,{name:s,data:n,section:!!t.section,partial:!!t.partial,isActive:t.isActive,fn:r,text:i,value:o,parent:t.parent,type:(t.isInline&&e.decorators[s]?"decorator":t.partial&&e.partials[s]&&"partial")||e.helpers[s]&&"helper"||a||""},n,t,r):i+o}function g(e,t,n,r,i){for(var o={},a={},s=[],c=0,l=t.length,u={};c<l;c++)if(""!==t[c]){if("as"===t[c]){t.splice(c,1),s=[t.splice(c,1)[c],t.splice(c,1)[c]];break}o[(u=d(t[c])).name]=u,a[t[c]]=u}return{name:n.name,vars:t,parts:o,rawParts:a,partial:">"===i,isInline:n.isInline,isUnescaped:!e.options.doEscape||"&"===i||r,isActive:n.isActive,depth:n.depth,strict:n.strict,keys:n.keys,helpers:s}}function b(e,t,n,r,i,o){var a=i?{"@index":o,"@last":o===i-1,"@first":0===o,_parent:n&&[n.name,o]}:{};return a["@key"]=t,a["."]=a.this=e,0!==r.length&&(a[r[0]]=e,a[r[1]]=t),a}function y(e,n,r,i){var a=[],s=e.options.splitter;return n=n.replace(e.inlineRegExp,function(t,n,r,i,o){var c=r&&r.charAt(0)||"";return"!"===c||"="===c?"":(o=o.split(/\s+/),"-section-"===i?((i=d(o[1])).section=o[0],a.push(i),s):("*"===i&&(i+=o.shift()),a.push(g(e,o,d(i),"{{{"===n,c)),s))}).split(s),i=d(i).name,function(s,c){return function(e,n,r,i,a,s,c){for(var l,p="",d="",h=null,g={},b={},y=0,C=r.length;y<C;y++)if((g=s[y])!==t)if(p+=r[y],g.section)g.parent=c&&u(n.helpers,[0,"_parent"]),p=m(e,g,n,h=i[g.section],p,h(n,c),a);else if(g.isInline)p=v(e,e.decorators[g.name||g.vars[0]],g.name,g.vars,n,g,p)||p,o(p)&&(p=p());else{if(g.partial){for(var E in b=n.helpers[0]||(n.helpers[0]={}),l=t,g.parts)l=g.parts[E],b[E]=l.keys.length&&f(n,l.name,l.keys,l.depth)||l.isString&&(l.value||l.name);d=e.partials[g.name](n)}else g.parent=c&&u(n.helpers,[0,"_parent"]),h=x(e,g),d=h(n);p=m(e,g,n,h,p,d,a)}else p=a?m(e,{},n,h,p,r[y],a):p+r[y];return p}(e,s,n,r,i,a,c)}}function x(e,t){return function(n,r){var i=f(n,t.name,r||t.keys,t.depth),a=!t.strict&&(e.helpers[t.name]||e.partials[t.name])||o(i)&&i;return i=a?v(e,a,t.name,t.vars,n,t):i&&(t.isUnescaped?i:h(i,e))}}function C(e,n,r,s,c,u){var p=r;return r=d(!s.length||"if"!==r&&"each"!==r&&"with"!==r&&"unless"!==r?r:s.shift()),s=g(e,s,d(r.name),c,""),function(c,d){return function(e,n,r,s,c,u,p,d){var h=f(n,s.name,i(d)?d:s.keys,s.depth),m=!s.strict&&(e.helpers[s.name]||o(h)&&h),g=m&&v(e,m,s.name,c.vars,n,c,r[0],r[1]),y=i(h),x="each"===p&&!y&&"object"==typeof h&&h,C="";if(h=h===t?i(n.path[0])&&n.path[0]:h,m){if(n.helpers[0]=b(g,s.name,t,c.helpers),"if"===p)return g?r[0](n):r[1]&&r[1](n);if("unless"===p)return g?r[1]&&r[1](n):r[0](n);y=i(h=g)}"unless"===p?h=!h:x&&(h=a(h,[]));if(y||x){if(u)return h.length?"":r[0](h);n.path.unshift({}),n.helpers.unshift({});for(var E=0,_=h.length;E<_;E++)n.path[0]=y?h[E]:x[h[E]],n.helpers[0]=b(n.path[0],y?E:h[E],s,c.helpers,_,E),C+=r[0](n,h[E]);return n.path.shift(),n.helpers.shift(),C}if(u&&!h||!u&&h)return m&&"string"==typeof h?h:r[0]("unless"===p||"if"===p?n:l(n,t,h,b(h,s.name,t,c.helpers)));return r[1]&&r[1](n)}(e,c,n,r,s,u,p,d)}}}),function(e,t){"object"==typeof exports?module.exports=t(e,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(n){return t(e,n)}):e.Blick=t(e,e.Schnauzer)}(this,function(e,t,n){"use strict";function r(e,t){for(var n in e)e[n]=document.createElement(e[n]);r=function(n){var r=((n||"").match(t)||[])[1],i=e[r]||e._default;return i.innerHTML=n||"",i}}r({option:"select",legend:"fieldset",area:"map",param:"object",thead:"table",tr:"tbody",col:"colgroup",td:"tr",_default:"div"},/<\s*(\w*)\s*[\s\S]*?>/);var i=function(e,t){this.version="0.0.1",this.options={registerProperty:s,unregisterProperty:s,attributes:{value:l,disabled:c,checked:c,autocomplete:c,contenteditable:c,readonly:c,required:c,selected:c}},o(this,t||{},e)},o=function(e,n,r){for(var i in n)if("attributes"===i)for(var o in n[i])e.options[i][o]=n[i][o];else e.options[i]=n[i];var a=e.options.registerProperty;e.options.registerProperty=function(t,n){a(t.name,t.replacer,t.data.path[0],t.isActive,t.parent,n,e.collector)},n.render=p,e.search=/{{#\d+}}[\S\s]*{{\/\d+}}/,e.attrSplitter=/([^}{]*)({{#(\d+)}}[\s\S]*?{{\/\d+}})/g,e.schnauzer=new t(r,n),e.collector={}},a=[],s=function(){},c=function(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1,"focus"===n&&e.focus())},l=function(e,t,n){e.setAttribute("value",n),e.value=n};return i.prototype={render:function(e,t){return this.schnauzer.render(e,t)},renderHTML:function(e,t){var i=document.createDocumentFragment(),o=this.schnauzer.render(e,t);return function e(t,i,o,s,c){t.search;var l=r(o);var p="";var g="";var b={};var y={};var x={};var C=t.options;var E=C.registerProperty;var _=[];var N=[];var w;var P={};for(var A=i.length;A--;)p="{{#"+A+"}}",g="{{/"+A+"}}",b=i[A],(y=u(l,p))?y.ownerElement?(y.valueSplitter||((P=y.valueSplitter=[]).valueTracker={},P.push(y.textContent.replace(t.attrSplitter,function(e,t,n,r){return P.push(t),P.push(n),P.valueTracker[r]=P.length-1,""}))),b.replacer=function(e,t,r,i,o,a,s){return function(i,o){var c=o||a.fn(a.data,i);if(c===n&&(c=""),C.attributes[r])e=null,C.attributes[r](t,r,c);else if(c!==n){var l=e.valueSplitter.join("").trim(),u=[],p="";l!==e.textContent&&(p=e.textContent.split(l)[1]||"",u=(u=m(e.textContent,l))&&u.split(/\s+/)),e.valueSplitter[e.valueSplitter.valueTracker[s]]=c;for(var f=e.valueSplitter.join("").trim()+p,d=u.length;d--;)u[d]&&(f=f.replace(u[d],""));e.textContent=f}}}(y,y.ownerElement,y.name,0,y.textContent,b,A),E(b,y),N=v(y.ownerElement.previousSibling,b,N,C),b.replacer(null,b.value)):d(b,y)?((N=v(y,b,N,C)).push({search:p,children:b.children=[]}),x=u(y.parentNode,g),b.lastNode=x=x.splitText(x.textContent.lastIndexOf(g)),x.textContent=x.textContent.replace(g,""),(y=y.splitText(y.textContent.indexOf(p))).textContent=y.textContent.replace(p,""),b.replacer=function(n,r){return function(i){for(;r.lastNode.previousSibling&&r.lastNode.previousSibling!==n;)n.parentNode.removeChild(r.lastNode.previousSibling);if(r.children)for(var o=r.children.length;o--;)r.children[o].unregister();n.textContent="",_=e(t,a,r.fn(r.data,i),n,c),r.children=h(_);for(var s=[],l=r.lastNode;l!==n&&(l=l.previousSibling);)1===l.nodeType&&s.push(l);return s}}(y,b),E(b,y)):(y=f(y,p,g),b.replacer=function(e,t){return function(n){e.textContent=t.fn(t.data,n)}}(y,b),y.textContent=b.value,E(b,y),N=v(y,b,N,C)):window.console&&console.warn("There might be an error in the SCHNAUZER template");w=function(e,t,n){for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);if(!e)return n;e.parentNode.insertBefore(n,e.nextSibling)}(s,l,c);s||(i=h(i));a=[];return s?i:w}(this,a,o,null,i)}},i;function u(e,t){return document.evaluate('//text()[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue||document.evaluate('//@*[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function p(e){var t=a.length;return e.fn&&e.name&&e.isActive&&!e.partial&&"@"!==e.name.charAt(0)?(e.isSection=d(e),a[t]=e,e.text+"{{#"+t+"}}"+e.value+"{{/"+t+"}}"):e.text+e.value}function f(e,t,n){return e.splitText(e.textContent.lastIndexOf(n)+n.length).textContent,e.splitText(e.textContent.indexOf(t))}function d(e,t){return e.section&&(!e.type||"helper"===e.type||"decorator"===e.type)&&(-1!==e.value.indexOf("{{#")||t&&-1!==t.textContent.indexOf("{{#"))}function h(e){for(var t=!0,n={replacer:t,lastNode:t,fn:t,children:t,unregister:t,data:t},r=e.length;r--;){for(var i in e[r])n[i]||delete e[r][i];e[r]=null}return null}function v(e,t,n,r){if(e&&0!==n.length)for(var i=n.length;i--;)n[i].children.push({unregister:function(e){return function(){r.unregisterProperty(e.name,e)}}(t)}),-1!==e.textContent.indexOf(n[i].search)&&(e.textContent=e.textContent.replace(n[i].search,""),n.pop());return n}function m(e,t){for(var n=0,r=0,i="";r<t.length;)e[n]!==t[r]||n===e.length?i+=t[r]:n++,r++;return i}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(e,t){"use strict";var n=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],forceEnhance:!1,childNodes:"childNodes",throwErrors:!1},this.model=e||[],r(this,t||{})},r=function(e,t){var n={},r=e.options;for(var a in o.push({}),v(e,"id",o.length-1),t)r[a]=t[a];r.listeners=[];for(var s=(t.listeners||[]).length;s--;)t.listeners[s]&&(r.listeners[s]=t.listeners[s].split(i));e.model.constructor!==Array&&(e.model=[e.model],e.standalone=!0),n[r.childNodes]=e.model,e.standalone||v(e.model,"root",n),f(e,e.model)},i=/\.|\//,o=[],a=0;return n.prototype={getElementById:function(e){return o[this.id][e]},getElementsByProperty:function(e,n){var r=[],a="function"==typeof n,c=t!==n,l=t!==e,u=[],p=null,f=o[this.id];for(var d in f)p=t!==f[d][e]?f[d][e]:s(f[d],u[0]?u:u=l&&e.split(i)),(c&&p===n||a&&n(p)||!c&&t!==p||!c&&!l)&&r.push(f[d]);return r},appendChild:function(e,t){return u(this,e,t=t||this.model.root,l(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return u(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return u(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return u(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&p(this,t),u(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return p(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,n){return d(this,e.split(i)[0],{current:t,root:t},e,n)},reinforceProperty:v,getProperty:function(e,t){return s(t,e.split(i))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return c(this,this.model)}},n.getElementById=function(e){var t=e.split(":");return o[t[0]]&&o[t[0]][t[1]]},n;function s(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function c(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&c(e,t[n][e.options.childNodes]),delete o[e.id][t[n][e.options.idProperty]],t.pop();return t}function l(e,t){return e[t]=e[t]||[],e[t]}function u(e,t,n,r,i,o){var a=e.options,s=t.parentNode;return t.parentNode?a.parentCheck&&function(e,t,n){var r=t;e===t&&m("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&m("ERROR: can't move parent inside it's own child",n)}(t,n,a):(t.__index=r,f(e,[t],n,i,o)),e.type=i,e.sibling=o,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&p(e,t,!0)||t,l(n,a.childNodes).splice(r||0,0,t),t.parentNode=n,a.moveCallback.call(e,t,i,o,s),t}function p(e,t,n){return!n&&c(e,[t]),l(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function f(e,t,n,r,i){for(var s=e.options,c=!1,l=!0,u=s.idProperty,p={},m=0,g=t.length;m<g;m++)(p=t[m])[u]||e.standalone||(p[u]=a++,l=!1),o[e.id][p[u]]=p,c=!p.parentNode,e.standalone||(p.parentNode=n||e.model.root,p.index=p.index||0),c&&(e.standalone||(v(p,u,p[u],l),d(e,"index",{current:p},null,!0),d(e,"parentNode",{current:p},null,!0)),h(e,p,e.options.listeners)),s.preRecursionCallback.call(e,p,r,i),p[s.childNodes]&&f(e,p[s.childNodes],p),s.enrichModelCallback.call(e,p,r,i),delete p.__index;return t}function d(e,n,r,i,o){var a={};if(e.options.forceEnhance||r.current.hasOwnProperty(n))return a[n]=r.current[n],function(e,n,r,i,o,a){return Object.defineProperty(r.current,n,{get:function(){return"index"===n?function(e,n){return n.__index!==t?n.__index:(n.parentNode?l(n.parentNode,e.options.childNodes):e.model).indexOf(n)}(e,r.current):i[n]},set:function(t){!function(e,t,n,r,i,o){(e===o.options.idProperty||"index"===e||o.options.subscribe.call(o,o.type||e,t.root||t.current,r,n,o.sibling))&&(i[e]=n,m('ERROR: Cannot set property "'+e+'" to "'+r+'"',o.options));delete o.type,delete o.sibling}(a||n,r,i[n],i[n]=t,i,e)},enumerable:o})}(e,n,r,a,!o,i)}function h(e,t,n,r,i){for(var o=[],a=0,c=0,l="",u={},p=[],f=n.length;f--;)if(a=(o=n[f]).indexOf("*"),l=(r||"")+o.join("."),u=i||s(t,o),-1!==a)for(var v in c=a+1,u)c===o.length?d(e,v,{current:u,root:t},l.replace("*",v)):(p=o.slice(c),h(e,t,[o.slice(c)],l.split("*")[0]+v+".",s(u[v],p.slice(0,p.length-1))));else u=1!==o.length?s(i||t,o.slice(0,-1)):t,d(e,o[o.length-1],{current:i||u,root:t},l);return t}function v(e,n,r,i,o){return delete e[n],Object.defineProperty(e,n,{enumerable:!!o,configurable:!1,writable:i===t||!!i,value:r})}function m(n,r){if(!r.throwErrors&&e!==t&&e.console)return console.warn?console.warn(n):console.log(n);throw n}}),define("api",["VOM","blick","toolbox"],function(e,t,n){return function(r,i){var o={},a={},s={};function c(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r]&&t[r].call(e,n)}function l(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function u(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function p(e,t,n){if(n)return n(function(){t.children[0]&&t.removeChild(t.children[0])},function(){t.appendChild(e)});t.children[0]?t.replaceChild(e,t.children[0]):t.appendChild(e)}for(var f in s.model=function(t,n){return new e(t,n)},s.sendToComponent=function(e,t){var n=this.getComponent(e);if(n&&n.onSend)return n.onSend(t)},s.triggerEvent=function(e,t,n){var r,i=n||{};i.detail=t,r=new CustomEvent(e,i),(i.element||window).dispatchEvent(r,t)},s.installEvent=function(e,t,r,i){return n.addEvent(e||window,t,r,i)},s.subscribeToComponent=function(e,t,n,r){var i=this,o=this.getComponent(e),a=o&&o["__cr-id"];return o?(this.subscribe(this.id,a,t,n,r),function(){i.unsubscribe(i.id,a,t,n)}):function(){}},s.destroyComponents=function(e){var t=this;e.forEach(function(e){t.destroyComponent(e)})},s.subscribe=function(e,t,n,r,i){var a=this;if(e=e?e.name||e.components&&e.components[t]||e:this.name,o[e]=o[e]||{},(t=o[e][t]=o[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),function(){a.unsubscribe(e,t,n,r)};delete o[e]},s.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,o[e]=o[e]||{},o[e]&&((t=o[e][t]=o[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&c(this,t[n],r))},s.unsubscribe=function(e,t,n,r){var i=-1,a={};return e="string"==typeof e?e:e.name||this.name,o[e]&&o[e][t]&&o[e][t][n]&&-1!==(i=(a=o[e][t][n]).indexOf(r.callback||r))&&a.splice(i,1),r.callback||r},s.addRoute=function(e,t,r){var i,a,s=this,p="object"==typeof e.path?{regexp:e.path}:(i=e.path,a=[],i=i.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return a.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+i+"(?:\\?([\\s\\S]*))?$"),names:a}),f=r||this.options.hash,d=u(p,l(f)),h=o[this.name]&&o[this.name].__router,v={};return this.subscribe(null,"__router",e.path,{callback:e.callback,names:p.names,regexp:p.regexp||p},t),t&&d&&e.callback.call(this,d),v=!h&&function(e,t,r){var i=void 0!==window.onpopstate?"popstate":"hashchange";return n.addEvent(window,i,function(n){var i={};for(var o in e)(i=u(e[o],l(r)))&&c(t,e[o],i)},t.id)}(o[this.name].__router,this,f),function(){s.removedRoute(e),!h&&v()}},s.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},s.toggleRoute=function(e,t){var n=o[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},s.template=function(e,n){(n=n||{}).helpers=n.helpers||this.options.helpers;var r=new t(e,n);if(n.share)for(var i in r.schnauzer.partials)this.options.partials[i]||"self"===i||(this.options.partials[i]=r.schnauzer.partials[i]);return r},s.renderModule=function(e){var t=e.require&&e.container,r=t&&"string"==typeof e.container?n.$(e.container):e.container,i=a[(e.context||"")+e.require],o=this;return t?i?new n.Promise(function(t){p(i.element,r,e.transition),i.instance&&i.instance.onLoad&&i.instance.onLoad(i.element,o),t(i)}):new n.Promise(function(t){require([e.path||e.require],function(n){var i=document.createElement(n.selector),s=i.setAttribute.bind(i);e.input&&s("cr-input",e.input),e.event&&s("cr-event",e.event),e.name&&s("cr-name",e.name);var c=!n.instance&&n.init(i,null,e.data),l=n.instance||c;p(i,r,e.transition),l&&l.onLoad&&l.onLoad(i,o),t(a[(e.context||"")+e.require]=n.instance?n:{element:i,instance:c})})}):new Promise(function(){})},Object.defineProperties(i,{Toolbox:{value:n},instance:{value:new i}}),s)r[f]={value:s[f]};return r}}),define("controller",["toolbox","VOM"],function(e,t){"use strict";var n=e.keys;function r(e){for(var t in this.options={element:document.body},this.events={},e)this.options[t]=e[t]}return r.prototype={installEvent:function(r,o,a,s){var c=this.options.element;this.events[a]||(this.events[a]=e.addEvent(o,a,function(o){!function(t,r,o,a,s){var c=e.closest(t.target,"[cr-event]"),l=c&&c.getAttribute("cr-id")||e.closest(t.target,"[cr-id]").getAttribute("cr-id"),u=s(l),p=u&&u.events&&n(u.events[t.type]),f=o&&n(o.events[t.type])||[],d=p&&p.length,h=d?u&&u.events:o&&o.events,v={_:!1};(d?p:o&&f||[]).forEach(function(e){i(r,h,u||o,e,t,v)}),c!==a&&d&&f.forEach(function(e){i(r,o.events,o,e,t,v)})}(o,r,s,c,t.getElementById)},!!/(?:focus|blur|mouseenter|mouseleave)/.test(a)))},installEvents:function(e,t,r,i){var o=this;n(r).forEach(function(n){o.installEvent(e,t,n,i)})},removeEvent:function(e){this.events[e]&&(this.events[e](),delete this.events[e])},removeEvents:function(e){e.forEach(this.removeEvent.bind(this))},destroy:function(){this.removeEvents(n(this.events)),this.options.element=null}},r;function i(e,t,n,r,i,o){e[r]&&t[i.type][r].forEach(function(t){!o._&&t.contains(i.target)&&(o._=!1===e[r](i,t,n),o._&&i.stopPropagation())})}}),define("circular",["toolbox","blick","VOM","api","controller"],function(e,t,n,r,i){"use strict";var o=e.$,a=e.$$,s=e.$create,c=e.isArray,l=e.keys,u=0,p={},f={},d=s("div");function h(e,t){this.options={hash:"#",partials:{},helpers:{},decorators:{}},function(e,t,n){var r="string"==typeof t;r||(n=t||{});for(var i in n)e.options[i]=n[i];e.version="1.0.0",e.id="cr_"+u++,e.name=r?t:e.id,f[e.id]={}}(this,e,t||{})}return Object.defineProperties(h.prototype,r({getComponent:{value:function(e){var t=f[this.id][e];return t&&t.instance}},destroyComponent:{value:function(e){var t=e["__cr-id"].split(":"),n=f[t[0]][t[1]],r=n.instance;for(var i in r.onDestroy&&r.onDestroy(),r)r[i]&&r.hasOwnProperty(i)&&c(r[i])&&(r[i]=[]);for(var i in n.controller.removeEvents(l(n.controller.events)),n.models.forEach(function(e){e.destroy()}),n.subscribers.forEach(function(e){e()}),n)n[i]=null;delete f[t[0]][t[1]]}},destroy:{value:function(){var e=f[this.id];this.destroyComponents(l(e).map(function(t){return e[t].instance}))}},getAttributeData:{value:w}},h)),Object.defineProperties(h,{Module:{value:function(e,t){var n=o(e.selector,e.context),r=h.Component(e,t);return{component:r,instance:r.init(n,null,function(e){var t=e.closest('[cr-id|="cr_"]'),n=t&&t.getAttribute("cr-id").substr(3).split(":"),r=n&&f["cr_"+n[0]][n[1]];return r&&r.instance||r}(n)),element:n}}},Component:{value:function(t,r){return t.plugins={},t.components={},p[t.selector]||(p[t.selector]={Klass:r,selector:t.selector,templates:t.template&&function(e,t){e.innerHTML=t.template||"";var n={};return a("[cr-for]",e).forEach(function(e,r){var i=o("[cr-child]",e),a=e.getAttribute("cr-for"),s=a+r;n[a]={container:s,child:i?N(i,t,"child",a):null,template:N(function(e,t){return e.parentNode.setAttribute("cr-parent-container",t),e}(e,s),t,"loop",a)}}),n.this={template:N(e.firstElementChild,t,"main","this")},n}(d,t),styles:function(e,t){if(!t.styles)return;var n=s("style");return n.setAttribute("name",e),n.innerHTML="\n"+t.styles+"\n",document.head.appendChild(n),n}(t.selector,t),name:t.name||r.name,init:function(a,s,d){return function(t,r,a,s,d){var v=r.selector,b=p[v],x={},_="",N={},P={},A=r.circular||h.instance,O={},T=[],S=b.templates||{},k=t.getAttribute("cr-id"),R=t.getAttribute("cr-name");if(k&&!s)return f[A.id+":"+k];["partials","helpers","decorators","attributes"].forEach(function(e){r[e]||(r[e]=A.options[e])}),x={"cr-id":!s&&(t.setAttribute("cr-id",A.id+":"+u),u)||u,elements:{element:t},events:{},parentNode:{},views:{}},_=x["cr-id"],P=f[A.id][_]={instance:{},controller:{},models:[],parent:"",subscribers:[]},R&&(f[A.id][R]=f[A.id][_]);N=P.instance=function(t,n,r,i,o,a,s,l){var u=c(l)?l[0]:l,p=l&&l[1],d=!1,h=function(t,n){for(var r=t&&t.split(/\s*,\s*/)||[],i=[],o={vars:{},origin:{},names:{},static:{}},a=!1,s="",c="",l=r.length;l--;)i=r[l].split(/\s+as\s+/),a="'"===i[0].charAt(0)||'"'===i[0].charAt(0),s=a?e.convertToType(i[0].replace(/'|"/g,"")):"",c=a?s:i[0],o.vars[i[1]||c]=a?s:n[c],o.origin[c]=a?s:n[c],o.names[c]=i[1]||c,o.static[c]=a;return o}(o||n.getAttribute("cr-input"),s.parent=u)||{},v=u&&u["__cr-id"].split(":")[1];return n.removeAttribute("cr-input"),new t(n,r,function(e,t){for(var n in h.vars)"null"!==n&&(e[n]="function"==typeof h.vars[n]?h.vars[n].bind(u):h.vars[n]);if(!1!==t)for(var n in h.origin)h.static[n]||"null"===n||((d="this"===n||"."===n)&&(e[h.names[n]]=p),f[r.id][i].subscribers.push(function(t,n){return r.subscribeToComponent(d?p["cr-id"]:v,n,function(r){e[t[n]]=r},!0)}(h.names,n)));o&&u!==p&&function(e,t,n){var r=n.events||{};for(var i in r)e["pl-"+r[i]]||function(n){Object.defineProperty(e,"pl-"+n,{value:function(e,r,i){return t[n](e,r,i)}})}(r[i])}(u,e,a)},function(){return u||p})}(a,t,A,u++,s,r,P,d),Object.defineProperty(N,"__cr-id",{value:A.id+":"+_}),!s&&function(e,t,n,r){w(e,"cr-plugin",function(e,r,i){p[e]&&(p[e].init(i,r,t),delete n.plugins[e],i.removeAttribute("cr-plugin"))});for(var i=e.children.length,o="",a={};i--;)a=e.children[i],o=a.tagName.toLowerCase(),p[o]&&p[o].init(a,null,t)}(t,N,r),O=P.controller=new i({element:t}),T=l(S).concat(l(r.subscribe$)),P.models=T.filter(function(e,t){return T.indexOf(e)===t}).sort(function(e){return"this"===e?-1:1}).map(function(e){var i=S[e];return e?function(e){var t=function(e){var t=e.instance,r=e.modelName,i=r+"$",o=r+"$$",a=r+"$PR";return new n("this"===r?t:t[r]||[],{idProperty:"cr-id",moveCallback:t[r+"$Move"]||function(){},enrichModelCallback:t[r+"$Enrich"]||function(){},listeners:e.listeners,preRecursionCallback:function(n,r,i){var o=e.template&&y(this,{item:n,type:r,siblPar:i,data:e});t[a]&&t[a](this,n,o)},subscribe:function(r,a,s,c,l){var u="childNodes"===r||!!n.prototype[r];e.template&&function(e,t,r,i,o,a,s){var c=r.elements&&r.elements.element,l=r.parentNode&&r.parentNode.elements||null,u=l?l.container||l.element:s.templateContainer,p=r["cr-id"],f=!r.childNodes&&s.childTemplate||s.template||null,d=f?f.collector:{},h="childNodes"===t||!!n.prototype[t];for(var v in"removeChild"===t?(E(c,t,c.parentElement),function(e,t,n){if(e[t]){for(var r in e[t])delete e[t][r];n||delete e[t]}}(d,p)):"sortChildren"===t?E(c,"appendChild",u):e[t]&&(r===a?y(e,{item:r,type:t,siblPar:a,data:s}):"replaceChild"!==t&&c&&h&&E(c,t,u,a.elements&&a.elements.element)),C(s,r,d,p,t,i,o),s.defData.helpers)C(s,r,d,p,v,i,o)}(this,r,a,s,c,l,e),t[i]&&!u&&t[i](r,a,s,c),t[o]&&t[o](r,a,s,c,u),!u&&e.crInstance.publish(e.crInstance.id,t["__cr-id"],r,s)}})}(e);if("this"===e.modelName||!c(e.instance[e.modelName]))return t;for(var r in n.prototype)Object.defineProperty(t.model,r,{value:t[r].bind(t)});return Object.defineProperty(e.instance,e.modelName,{get:function(){return t.model},set:function(e){g(t,t.model,e,e.isDelta)}}),t}({instance:N,items:x,defData:r,template:!s&&i&&i.template,childTemplate:!s&&i&&i.child,templateContainer:!s&&"this"!==e&&i?function(e,t){var n=void 0!==t&&o('[cr-parent-container="'+t+'"]',e);return n&&n.removeAttribute("cr-parent-container"),n||e}(t,i.container):t,modelName:e,listeners:r.subscribe$&&r.subscribe$[e],crInstance:A,controller:O}):null}),s||r.template||m(t,r,x,P);return t.removeAttribute("cr-cloak"),N.onInit&&N.onInit(t,A,x),N}("string"==typeof a?o(a):a,t,r,s,d)},preparePlugin:function(e,n,r){var i=n.plugins[t.selector]=n.plugins[t.selector]||{},o=i[r.where]=i[r.where]||{};(o[r.modelName]=o[r.modelName]||[]).push(r.value),function(e,t){var n=e.getAttribute("cr-event"),r=n?[n]:[];for(var i in t.events)r.push(i+": pl-"+t.events[i]);e.setAttribute("cr-event",r.join("; "))}(e,t)}})}},Plugin:{value:function(e,t){return h.Component(e,t)}}});function v(e,t,n,r){for(var i=[].slice.call(a('[cr-plugin*="'+e+'"]',n)),o=0,s=i.length;o<s;o++)p[e].init(i[o],t.join(","),r[0]||r[1]),i[o].removeAttribute("cr-plugin")}function m(e,t,n,r){var i=l(t.components).join(","),s=i?a(i,e):[],c=s.length?function(e,t){var n=[].slice.call(e).map(function(e,t){var n=document.createElement(e.tagName);return e.parentNode.replaceChild(n,e),n.setAttribute("cr-replace",t),{index:t,element:e}});return function(){!function e(t,n){for(var r=t.length,i=[];r--;){var a=o('[cr-replace="'+t[r].index+'"]',n);a?a.parentNode.replaceChild(t[r].element,a):i.push(t[r])}i.length&&e(i,n)}(n,t)}}(s,e):function(){};n.views=P(e,function(e){}),n.events=w(e,"cr-event",function(t){r.controller.installEvent(r.instance,e,t,n)}),c()}function g(e,t,n,r){for(var i=0,o=n.length;i<o;i++)t[i]?b(e,t[i],n[i]):e.appendChild(n[i],t.parentNode||t[0]&&t[0].parentNode);if(!r)for(;t.length>n.length;)e.removeChild(t[t.length-1])}function b(e,t,n){for(var r in n)"childNodes"!==r&&(t[r]=n[r]);n.childNodes&&g(e,t.childNodes,n.childNodes)}function y(e,t){var n=t.item,r=t.data,i=r.items.elements.element,a=r.templateContainer,s=e.reinforceProperty,c=!n.childNodes&&!!r.childTemplate,l=c?r.childTemplate:r.template,u=(r.defData.extraModel||[]).concat(function(e){var t=e.parentNode,n=e.index,r=t&&t.childNodes.length-1===e.index;return t?{"@last":r,"@first":0===n,"@index":n,"@counter":n+1}:{}}(n),r.instance),f=l&&l.renderHTML(n,u),d=n.parentNode&&n.parentNode.elements,h=d&&d.container||a,v=c?h.lastElementChild:h,g=t.siblPar&&t.siblPar.elements&&t.siblPar.elements.element,b=void 0!==n.__index&&!n.childNodes,y=f?b?f.children[0]:E(f.children[0],t.type,v,g,!0):a,C=c?v:y.hasAttribute("cr-mount")?y:o("[cr-mount]",y);if(y.hasAttribute("cr-id")||y.setAttribute("cr-id",e.id+":"+(n["cr-id"]||0)),a!==i)s(n,"elements",{element:y,container:C}),s(n,"views",P(y,function(e){})),s(n,"events",w(y,"cr-event",function(e){r.controller.installEvent(r.instance,i,e)}));else{var _=p[y.tagName.toLowerCase()];_?(y.removeAttribute("cr-id"),_.init(y,null,r.instance)):m(i,r.defData,r.items,{instance:r.instance,controller:r.controller})}return x(y,r.defData,r.modelName,c,[r.instance,n]),y}function x(e,t,n,r,i){var o=t.components,s=t.plugins,c="this"===n,l=c?"main":!c&&!r?"loop":r?"child":"",u=[],f={};for(var d in o)l&&o[d][l][n]&&[].slice.call(a(d,e)).forEach(function(e){(f=p[d].init(e,null,i))&&u.push(f)});for(var d in s)l&&s[d][l]&&s[d][l][n]&&v(d,s[d][l][n],e,i);return u}function C(e,t,n,r,i,o,a){var s=n[r]&&n[r][i],c={},l={};if(s)for(var u,p=s.length;p--;)if(l=(c=s[p]).components,o!==a||c.forceUpdate){if(u=c.fn(c.parent),e.controller&&u)for(var f=u.length;f--;)w(u[f],"cr-event",function(n,r){var i=(t.events||e.items.events)[n];i||(i=t.events[n]={},e.controller.installEvent(e.instance,e.instance.element,n)),i[r]?(i[r].filter(function(t,n){e.items.elements.element.contains(t)||i[r].splice(n,1)}),i[r].push(u[f])):i[r]=[u[f]]});if(l&&(e.crInstance.destroyComponents(l),c.components=null),u&&u.length)for(var d=0,h=u.length;d<h;d++)c.components=x(u[d].parentNode,e.defData,e.modelName,!1,[e.instance,t])}}function E(e,t,n,r,i){return"prependChild"===t?(t="insertBefore",r=n.children[0]):"insertAfter"===t&&(r.nextElementSibling?(t="insertBefore",r=r.nextElementSibling):t=""),n[t||"appendChild"](e,r),e}function _(e,t,n,r,i,o,a){var s,c=i&&n[i[0]]&&!Object.getOwnPropertyDescriptor(n[i[0]],"0").get,l=i?i.slice(0):i,u=a[n["cr-id"]]=a[n["cr-id"]]||{};i&&c&&l.push(e),u[s=l&&l.join(".")||e]=u[s]||[],u[s].push({fn:t,forceUpdate:2===r,parent:i&&("this"!==e&&"."!==e?i.concat(e.split(".")):i)})}function N(e,n,r,i){return e?(e.parentNode&&e.parentNode.removeChild(e),e.removeAttribute("cr-for"),e.removeAttribute("cr-child"),w(e,"cr-plugin",function(e,t,o){p[e]&&p[e].preparePlugin(o,n,{where:r,modelName:i,value:t||"null"})}),p[e.tagName.toLowerCase()]||function(e,t,n,r){for(var i=e.join(","),o=i?[].slice.call(a(i,n||document)):[],s=o.length,c={};s--;)if(o[s]){c=o[s];for(var l=o.length;l--;)c!==o[l]&&c.contains(o[l])&&o.splice(l,1)}for(s=o.length;s--;)t.push(o[s]),r&&r(o[s],o[s].tagName.toLowerCase())}(l(p),[],e,function(e,t){(n.components[t]=n.components[t]||{main:{},loop:{},child:{}})[r][i]=!0}),new t(e.outerHTML.replace(/(?:{{&gt;|cr-src=)/g,function(e){return"{"===e.charAt(0)?"{{>":"src="}),{helpers:n.helpers||{},decorators:n.decorators,partials:n.partials,attributes:n.attributes,registerProperty:_})):null}function w(e,t,n){for(var r={},i=[e].concat([].slice.call(a("["+t+"]",e))),o=i.length,s="",c=[];o--;)for(var l=(c=(s=i[o].getAttribute(t))?s.split(/\s*;+\s*/):[]).length,u=[],p="",f="";l--;)p=(u=c[l].split(/\s*:+\s*/))[0],(f=u[1])?(r[p]=r[p]||{},r[p][f]=r[p][f]||[],r[p][f].push(i[o])):(r[p]=r[p]||[],r[p].push(i[o])),n&&n(p,f,i[o]);return r}function P(e,t){for(var n=(e.hasAttribute("cr-view")?[e]:[]).concat([].slice.call(a("[cr-view]",e))),r={},i=n.length;i--;)r[n[i].getAttribute("cr-view")]=n[i],t&&t(n[i]);return r}});
//# sourceMappingURL=circular.min.js.map