!function(i){"use strict";var e=i.Math.random,r=document.createElement("a"),s=i.document.createDocumentFragment(),c=0,l=v.modules={},o={};function a(){return"_module_"+(e()+e())}function u(e){var t,n=/(?:^\!|^http[s]*:|.*\.js$)/.test(e)?"":".js";return e=(v.paths[e]||e).replace(/^\!/,""),t=function(e){return(-1!==(r.href=e).indexOf(r.host)?r.origin:"")+r.pathname+r.search}((v.baseUrl||".")+"/"+e+n).replace(/^.\//,""),v.mapPath?v.mapPath(e,n,t):t}function t(e){var t={mapPath:"function",baseUrl:"string"},n=["lookaheadMap","paths","options","mapPath","baseUrl"];if(!v[n[0]])for(var r=n.length;r--;)v[n[r]]="string"===t[n[r]]?"":"function"===t[n[r]]?null:{};for(var i in e)if(-1!==n.indexOf(i))if(t[i])v[i]=e[i];else for(var o in e[i])v[i][o]=e[i][o];return v}function p(e){var t=v.lookaheadMap[e],n=v.options.minifyPrefix;if(t&&-1===(v.paths[e]||"").indexOf(n)){v(t);for(var r=0,i=t.length;r<i;r++)l[t[r]]||p(t[r])}}function f(e){for(var t=e.deps,n=!0,r=t.length;r--;)l[t[r]]&&void 0===l[t[r]].done&&(n=!1);n&&d(e)}function d(e){var t=e.parents||[];e.factory&&!e.isFile?(e.done=e.factory.apply(null,e.deps.map(function(e){return l[e].done})),delete e.factory):void 0===e.done&&delete l[e.name];for(var n=t.length;n--;)l[t[n]]&&f(l[t[n]])}function h(e,t){var n,r=i.document.createElement("script");return r.type="text/javascript",r.async=r.defer=!t,r.charset="utf-8",r.onload=r.onreadystatechange=(n=e,function(e){var t=e.currentTarget||e.srcElement;"load"!==e.type&&"complete"!==t.readyState||(r.onload=r.onreadystatechange=null,function(e){if(e=l[e.name],0===o.name.indexOf("_module_")){e.done=o.done,e.factory=o.factory,e.deps=o.deps;for(var t=e.deps.length,n={};t--;)(n=l[e.deps[t]].parents)[n.indexOf(o.name)]=e.name;delete l[o.name]}f(e)}(n))}),r.src=e.path,r}function v(e,t,n){e.constructor===Array?m(a(),e,t,n):m(a(),[],e,t)}function m(e,t,n,r){var i={};if("string"!=typeof e)return v(e,t,n);e=e||a(),i=l[e],function(e,t,n){for(var r=t.length,i={},o="";r--;)o=t[r],l[o]?l[o].parents.push(e):(i=l[o]={name:o,isFile:"!"===o.charAt(0),path:u(o),parents:[e]}).isFile?v.getFile(i,d):(a=h(i,n),s.appendChild(a),clearTimeout(c),c=setTimeout(function(){document.head.appendChild(s)}),p(o));var a}(e,t,r),i?(i.deps=t,i.factory=n):f(i=l[e]={name:e,deps:t,factory:n,parents:[]}),o=i}m.amd={},v.config=t,v.getFile=function(e,t){return e},i.define=m,i.require=v,t({})}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,s){"use strict";var t=document.createElement("a"),n={undefined:s,null:null,NaN:NaN,true:!0,false:!1},c={convertToType:function(e){return n.hasOwnProperty(e)?n[e]:e.toString&&+e.toString()===e?+e:e},closest:function(e,t,n){if(e.closest)c.closest=function(e,t){return e.closest(t)};else{var r=e.msMatchesSelector||e.webkitMatchesSelector||e.matches;c.closest=function(e,t){if(!(n||document.documentElement).contains(e))return null;do{if(r.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}}return c.closest(e,t,n)},$create:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return(t||document).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArray:Array.isArray||function(e){return e&&e.constructor===Array},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&c.removeClass(e,n),t&&c.addClass(t,r||n)},addEvents:function(e,t,n,r){for(var i=[],o=e.length;o--;)i.push(c.addEvent(e[o],t,n,r));return i},removeEvents:function(e){for(var t=e.length;t--;)e[t]()},addEvent:function(e,t,n,r){return r=r!==s?r:!!/(?:focus|blur|mouseenter|mouseleave)/.test(t),e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){c.lazy(function(){c.storageHelper.save(e,t)},n||c.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:o<i?-1:0:i<o?-1:o<i?1:0},normalizePath:function(e){return(-1!==(t.href=e).indexOf(t.host)?t.origin:"")+t.pathname+t.search},ajax:function(o,a){var e,t,n=null,r=(new Date).getTime();return a=a||{},o=c.normalizePath(o),t=i[o]&&i[o].time||0,n=(n=(e=!0===a.cache?r+1e8:a.cache?r<t?t:r+a.cache:0)&&!a.resetCache&&r<t?i[o]:null)||new c.Promise(function(t,n){var e=new XMLHttpRequest,r=(a.method||a.type||"GET").toUpperCase();if(e||n("Giving up :( Cannot create an XMLHTTP instance"),a||(o=(a=o).url),e.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||299<e.status))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,a.dataType,n);if(e!==s){if("json"===a.dataType)try{e=JSON.parse(e)}catch(e){return void n("Caught Exception: "+e.stack)}t(e)}},e.open(r,o,a.async||!0,a.username,a.password),"xml"===a.dataType&&e.setRequestHeader("Content-Type","text/xml"),"GET"!==r&&a.csrf&&e.setRequestHeader("X-CSRF-Token",function(e){var t=document.cookie.split(e+"=")[1];return t&&t.split(";")[0]}(a.csrf)),a.headers)for(var i in a.headers)e.setRequestHeader(i,a.headers[i]);return e.send(a.data),function(){e.abort()}}),e?(i[o]=n,i[o].time=e):delete i[o],n},errorHandler:function(e){console.error(e)},Promise:o};function r(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n}e.Event=e.Event||r,e.CustomEvent=e.CustomEvent||r;var i={};function o(e){this._state=0,this._handled=!1,this._value=s,this._deferreds=[],this._returnFn=f(e,this)}function a(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,setTimeout(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void u(r.promise,e)}l(r.promise,e)}else(1===n._state?l:u)(r.promise,n._value)})):n._deferreds.push(r)}function l(t,e){try{if(e){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void p(t);if("function"==typeof n)return f(n.bind(e),t)}t._state=1,t._value=e,p(t)}catch(e){u(t,e)}}function u(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function f(e,t){function n(e){r||(r=!0,u(t,e))}var r=!1;try{return e(function(e){r||(r=!0,l(t,e))},n)}catch(e){n(e)}}return o._cache={},o.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},o.prototype.then=function(e,t){var n=this._returnFn,r=new o(function(){return n});return a(this,{onFulfilled:e||null,onRejected:t||null,promise:r}),r},o.prototype.cancel=function(e){var t=o._cache[e];return o._cache[e]=this,t&&(1!==t._state&&(t._returnFn&&"function"==typeof t._returnFn&&t._returnFn(),t._deferreds=[],t.then=t.catch=function(){},t._handled=!0,t._state=1),t._returnFn=null),this},o.all=function(e){var n=[];return e.reduce(function(e,t){return e.then(function(){return t}).then(function(e){return n.push(e)})},new o(function(e,t){e(null)})).then(function(){return n})},e.require&&(require.getFile=function(t,n){c.ajax(t.path,{cache:"!!"!==t.name.substr(0,2)}).then(function(e){t.done=e,n(t)})}),c}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,m){"use strict";function t(e,t){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:m,render:m},n(this,t||{},e)}var n=function(e,t,n){for(var r in t)e.options[r]=t[r];for(var i in t=e.options,e.entityRegExp=new RegExp("["+y(t.entityMap,[]).join("")+"]","g"),o(e,t.tags),e.helpers=t.helpers,e.decorators=t.decorators,e.partials={},t.partials)e.registerPartial(i,t.partials[i]);n&&e.registerPartial(t.recursion,n)},g=Array.isArray||function(e){return e&&e.constructor===Array},b=function(e){return e&&"function"==typeof e},y=Object.keys||function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return t.prototype={render:function(e,t){return this.partials[this.options.recursion](e,t)},parse:function(e){return this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerDecorator:function(e,t){this.decorators[e]=t},unregisterDecorator:function(e,t){delete this.decorators[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||"function"==typeof t?t:function c(l,n,u){var e="";var p=l.options.tags;for(;e!==n&&(e=n);)n=n.replace(l.sectionRegExp,function(e,t,n,r,i,o,a){if("#*"!==n)return a=a.split(l.elseSplitter),u.push(h(l,[d(l,a[0],u,r),a[1]&&d(l,a[1],u,r)],r,i&&i.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===t,"^"===n)),p[0]+"-section- "+(u.length-1)+" "+(i||r)+p[1];var s=i.replace(/(?:^['"]|['"]$)/g,"");return l.partials[s]=l.partials[s]||c(l,a,u),""});n=d(l,n,u);return function(e,t){return n(x(e,t&&(g(t)&&t||[t])))}}(this,t,[])},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){o(this,e)}},t;function o(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t,r=e.options.characters+"\\][";e.inlineRegExp=new RegExp("("+n[0]+")([>!&=])*\\s*([\\w\\"+r+"\\.]+)\\s*([\\w"+r+"|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp("("+n[0]+")([#^][*%]*)\\s*([\\w"+r+"]*)(?:\\s+([\\w$\\s|./"+r+"]*))*("+n[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),e.elseSplitter=new RegExp(n[0]+"else"+n[1])}function c(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t}function x(e,t,n,r){var i=n!==m,o=!e.__schnauzerData,a=i&&!o&&e.extra||[],s=!o&&e.helpers||[];return{extra:t?c(t,a):a,path:o?[e]:i?c(e.path,[n]):e.path,helpers:r?c(s,i&&[r]||[{}]):s,__schnauzerData:!0}}function C(e,t){for(var n=0,r=t.length;n<r;n++)"./"!==t[n]&&(e=e&&e[t[n]]);return e}function l(e,t,n){return e!==m?e:n?C(t,n):t}function E(e,t,n,r){if(n){var i=e.path[r]||{},o=e.helpers[r]||{},a=l(o[t],o,n);if("this"===t||"."===t)return e.path[0];if(a===m&&(a=C(i,n)),a!==m)return a;for(var s=e.extra.length;s--;)if((a=l(e.extra[s][t],e.extra[s],n))!==m)return a}}function p(e){if(!e)return{};var t=e.split("="),n=1<t.length?t[1]:t[0],r=n.charAt(0),i='"'===r||"'"===r,o=!1,a=0,s=[],c=[],l=!1,u="%"===n.charAt(1)?2:"%"===r?1:0;return n=i?n.replace(/(?:^['"]|['"]$)/g,""):(1<(c=(n=u?n.substr(u):n).split("../")).length&&(n=("@"===c[0]?"@":"")+c.pop(),a=c.length),s=n.split(/[\.\/]/),n.replace(/^(\.\/|this\.|this\/|\*)/,function(e,t){return"*"===t?o=!0:(l=!0,s[0]="./"),""}).replace(/(?:^\[|\]$)/g,"")),{name:1<t.length?t[0]:n,value:n,isActive:u,isString:i,isInline:o,strict:l,keys:s,depth:a}}function u(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function _(t,e,n,r,i,o,a,s){return t.options.tools?t.options.tools(t,E,x,e,n,r,i,o,a,s):e[g(r)||o.isInline?"apply":"call"]({getData:function(e){return(e=o.rawParts[e]||{value:e,keys:[e],depth:0}).isString?e.value:E(i,e.value,e.keys,e.depth)},escapeHtml:function(e){return u(e,t)},getBody:function(){return a&&a(i)||""},getAltBody:function(){return s&&s(i)||""}},o.isInline?[function(){return a||""},o.parts,t]:r)}function N(e,t,n,r,i,o,a){var s=t.name;return o=l(o,""),e.options.render?_(e,e.options.render,s,{name:s,data:n,section:!!t.section,partial:!!t.partial,isActive:t.isActive,fn:r,text:i,value:o,parent:t.parent,type:(t.isInline&&e.decorators[s]?"decorator":t.partial&&e.partials[s]&&"partial")||e.helpers[s]&&"helper"||a||""},n,t,r):i+o}function f(e,t,n,r,i){for(var o={},a={},s=[],c=0,l=t.length,u={};c<l;c++)if(""!==t[c]){if("as"===t[c]){t.splice(c,1),s=[t.splice(c,1)[c],t.splice(c,1)[c]];break}o[(u=p(t[c])).name]=u,a[t[c]]=u}return{name:n.name,vars:t,parts:o,rawParts:a,partial:">"===i,isInline:n.isInline,isUnescaped:!e.options.doEscape||"&"===i||r,isActive:n.isActive,depth:n.depth,strict:n.strict,keys:n.keys,helpers:s}}function w(e,t,n,r,i,o){var a=i?{"@index":o,"@last":o===i-1,"@first":0===o,_parent:n&&[n.name,o]}:{};return a["@key"]=t,a["."]=a.this=e,0!==r.length&&(a[r[0]]=e,a[r[1]]=t),a}function d(a,n,r,i){var s=[],c=a.options.splitter;return n=n.replace(a.inlineRegExp,function(e,t,n,r,i){var o=n&&n.charAt(0)||"";return"!"===o||"="===o?"":(i=i.split(/\s+/),"-section-"===r?((r=p(i[1])).section=i[0],s.push(r)):("*"===r&&(r+=i.shift()),s.push(f(a,i,p(r),"{{{"===t,o))),c)}).split(c),i=p(i).name,function(e,t){return function(e,t,n,r,i,o,a){for(var s,c="",l="",u=null,p={},f={},d=0,h=n.length;d<h;d++)if((p=o[d])!==m)if(c+=n[d],p.section)p.parent=a&&C(t.helpers,[0,"_parent"]),c=N(e,p,t,u=r[p.section],c,u(t,a),i);else if(p.isInline)c=_(e,e.decorators[p.name||p.vars[0]],p.name,p.vars,t,p,c)||c,b(c)&&(c=c());else{if(p.partial){for(var v in f=t.helpers[0]||(t.helpers[0]={}),s=m,p.parts)s=p.parts[v],f[v]=s.keys.length&&E(t,s.name,s.keys,s.depth)||s.isString&&(s.value||s.name);l=e.partials[p.name](t)}else p.parent=a&&C(t.helpers,[0,"_parent"]),u=P(e,p),l=u(t);c=N(e,p,t,u,c,l,i)}else c=i?N(e,{},t,u,c,n[d],i):c+n[d];return c}(a,e,n,r,i,s,t)}}function P(i,o){return function(e,t){var n=E(e,o.name,t||o.keys,o.depth),r=!o.strict&&(i.helpers[o.name]||i.partials[o.name])||b(n)&&n;return n=r?_(i,r,o.name,o.vars,e,o):n&&(o.isUnescaped?n:u(n,i))}}function h(n,r,i,o,e,a){var s=i;return i=p(!o.length||"if"!==i&&"each"!==i&&"with"!==i&&"unless"!==i?i:o.shift()),o=f(n,o,p(i.name),e,""),function(e,t){return function(e,t,n,r,i,o,a,s){var c=E(t,r.name,g(s)?s:r.keys,r.depth),l=!r.strict&&(e.helpers[r.name]||b(c)&&c),u=l&&_(e,l,r.name,i.vars,t,i,n[0],n[1]),p=g(c),f="each"===a&&!p&&"object"==typeof c&&c,d="";if(c=c===m?g(t.path[0])&&t.path[0]:c,l){if(t.helpers[0]=w(u,r.name,m,i.helpers),"if"===a)return u?n[0](t):n[1]&&n[1](t);if("unless"===a)return u?n[1]&&n[1](t):n[0](t);p=g(c=u)}"unless"===a?c=!c:f&&(c=y(c,[]));if(p||f){if(o)return c.length?"":n[0](c);t.path.unshift({}),t.helpers.unshift({});for(var h=0,v=c.length;h<v;h++)t.path[0]=p?c[h]:f[c[h]],t.helpers[0]=w(t.path[0],p?h:c[h],r,i.helpers,v,h),d+=n[0](t,c[h]);return t.path.shift(),t.helpers.shift(),d}if(o&&!c||!o&&c)return l&&"string"==typeof c?c:n[0]("unless"===a||"if"===a?t:x(t,m,c,w(c,r.name,m,i.helpers)));return n[1]&&n[1](t)}(n,e,r,i,o,a,s,t)}}}),function(t,n){"object"==typeof exports?module.exports=n(t,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(e){return n(t,e)}):t.Blick=n(t,t.Schnauzer)}(this,function(e,a,y){"use strict";function x(r,i){for(var e in r)r[e]=document.createElement(r[e]);x=function(e){var t=((e||"").match(i)||[])[1],n=r[t]||r._default;return n.innerHTML=e||"",n}}x({option:"select",legend:"fieldset",area:"map",param:"object",thead:"table",tr:"tbody",col:"colgroup",td:"tr",_default:"div"},/<\s*(\w*)\s*[\s\S]*?>/);function t(e,t){this.version="0.0.1",this.options={registerProperty:r,unregisterProperty:r,attributes:{value:o,disabled:i,checked:i,autocomplete:i,contenteditable:i,readonly:i,required:i,selected:i}},n(this,t||{},e)}var n=function(n,e,t){for(var r in e)if("attributes"===r)for(var i in e[r])n.options[r][i]=e[r][i];else n.options[r]=e[r];var o=n.options.registerProperty;n.options.registerProperty=function(e,t){o(e.name,e.replacer,e.data.path[0],e.isActive,e.parent,t,n.collector)},e.render=s,n.search=/{{#\d+}}[\S\s]*{{\/\d+}}/,n.attrSplitter=/([^}{]*)({{#(\d+)}}[\s\S]*?{{\/\d+}})/g,n.schnauzer=new a(t,e),n.collector={}},C=[],r=function(){},i=function(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1,"focus"===n&&e.focus())},o=function(e,t,n){e.setAttribute("value",n),e.value=n};return t.prototype={render:function(e,t){return this.schnauzer.render(e,t)},renderHTML:function(e,t){var n=document.createDocumentFragment(),r=this.schnauzer.render(e,t);return function a(s,e,t,n,c){s.search;var r=x(t);var i="";var o="";var l={};var u={};var p={};var d=s.options;var f=d.registerProperty;var h=[];var v=[];var m;var g={};for(var b=e.length;b--;)i="{{#"+b+"}}",o="{{/"+b+"}}",l=e[b],(u=E(r,i))?u.ownerElement?(u.valueSplitter||((g=u.valueSplitter=[]).valueTracker={},g.push(u.textContent.replace(s.attrSplitter,function(e,t,n,r){return g.push(t),g.push(n),g.valueTracker[r]=g.length-1,""}))),l.replacer=function(c,l,u,e,t,p,f){return function(e,t){var n=t||p.fn(p.data,e);if(n===y&&(n=""),d.attributes[u])c=null,d.attributes[u](l,u,n);else if(n!==y){var r=c.valueSplitter.join("").trim(),i=[],o="";r!==c.textContent&&(o=c.textContent.split(r)[1]||"",i=(i=O(c.textContent,r))&&i.split(/\s+/)),c.valueSplitter[c.valueSplitter.valueTracker[f]]=n;for(var a=c.valueSplitter.join("").trim()+o,s=i.length;s--;)i[s]&&(a=a.replace(i[s],""));c.textContent=a}}}(u,u.ownerElement,u.name,0,u.textContent,l,b),f(l,u),v=A(u.ownerElement.previousSibling,l,v,d),l.replacer(null,l.value)):N(l,u)?((v=A(u,l,v,d)).push({search:i,children:l.children=[]}),p=E(u.parentNode,o),l.lastNode=p=p.splitText(p.textContent.lastIndexOf(o)),p.textContent=p.textContent.replace(o,""),(u=u.splitText(u.textContent.indexOf(i))).textContent=u.textContent.replace(i,""),l.replacer=function(i,o){return function(e){for(;o.lastNode.previousSibling&&o.lastNode.previousSibling!==i;)i.parentNode.removeChild(o.lastNode.previousSibling);if(o.children)for(var t=o.children.length;t--;)o.children[t].unregister();i.textContent="",h=a(s,C,o.fn(o.data,e),i,c),o.children=w(h);for(var n=[],r=o.lastNode;r!==i&&(r=r.previousSibling);)1===r.nodeType&&n.push(r);return n}}(u,l),f(l,u)):(u=_(u,i,o),l.replacer=function(t,n){return function(e){t.textContent=n.fn(n.data,e)}}(u,l),u.textContent=l.value,f(l,u),v=A(u,l,v,d)):window.console&&console.warn("There might be an error in the SCHNAUZER template");m=P(n,r,c);n||(e=w(e));C=[];return n?e:m}(this,C,r,null,n)}},t;function E(e,t){return document.evaluate('//text()[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue||document.evaluate('//@*[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function s(e){var t=C.length;return e.fn&&e.name&&e.isActive&&!e.partial&&"@"!==e.name.charAt(0)?(e.isSection=N(e),(C[t]=e).text+"{{#"+t+"}}"+e.value+"{{/"+t+"}}"):e.text+e.value}function _(e,t,n){return e.splitText(e.textContent.lastIndexOf(n)+n.length).textContent,e.splitText(e.textContent.indexOf(t))}function N(e,t){return e.section&&(!e.type||"helper"===e.type||"decorator"===e.type)&&(-1!==e.value.indexOf("{{#")||t&&-1!==t.textContent.indexOf("{{#"))}function w(e){for(var t={replacer:!0,lastNode:!0,fn:!0,children:!0,unregister:!0,data:!0},n=e.length;n--;){for(var r in e[n])t[r]||delete e[n][r];e[n]=null}return null}function P(e,t,n){for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);if(!e)return n;e.parentNode.insertBefore(n,e.nextSibling)}function A(e,t,n,r){if(e&&0!==n.length)for(var i=n.length;i--;)n[i].children.push({unregister:function(e){return function(){r.unregisterProperty(e.name,e)}}(t)}),-1!==e.textContent.indexOf(n[i].search)&&(e.textContent=e.textContent.replace(n[i].search,""),n.pop());return n}function O(e,t){for(var n=0,r=0,i="";r<t.length;)e[n]!==t[r]||n===e.length?i+=t[r]:n++,r++;return i}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(n,u){"use strict";function e(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],forceEnhance:!1,childNodes:"childNodes",throwErrors:!1},this.model=e||[],r(this,t||{})}var r=function(e,t){var n={},r=e.options;for(var i in f.push({}),b(e,"id",f.length-1),t)r[i]=t[i];r.listeners=[];for(var o=(t.listeners||[]).length;o--;)t.listeners[o]&&(r.listeners[o]=t.listeners[o].split(p));e.model.constructor!==Array&&(e.model=[e.model],e.standalone=!0),n[r.childNodes]=e.model,e.standalone||b(e.model,"root",n),v(e,e.model)},p=/\.|\//,f=[],d=0;return e.prototype={getElementById:function(e){return f[this.id][e]},getElementsByProperty:function(e,t){var n=[],r="function"==typeof t,i=u!==t,o=u!==e,a=[],s=null,c=f[this.id];for(var l in c)s=u!==c[l][e]?c[l][e]:h(c[l],a[0]?a:a=o&&e.split(p)),(i&&s===t||r&&t(s)||!i&&u!==s||!i&&!o)&&n.push(c[l]);return n},appendChild:function(e,t){return o(this,e,t=t||this.model.root,c(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return o(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return o(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return o(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&l(this,t),o(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return l(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,n){return m(this,e.split(p)[0],{current:t,root:t},e,n)},reinforceProperty:b,getProperty:function(e,t){return h(t,e.split(p))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return i(this,this.model)}},e.getElementById=function(e){var t=e.split(":");return f[t[0]]&&f[t[0]][t[1]]},e;function h(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function i(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&i(e,t[n][e.options.childNodes]),delete f[e.id][t[n][e.options.idProperty]],t.pop();return t}function c(e,t){return e[t]=e[t]||[],e[t]}function o(e,t,n,r,i,o){var a=e.options,s=t.parentNode;return t.parentNode?a.parentCheck&&function(e,t,n){var r=t;e===t&&y("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&y("ERROR: can't move parent inside it's own child",n)}(t,n,a):(t.__index=r,v(e,[t],n,i,o)),e.type=i,e.sibling=o,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&l(e,t,!0)||t,c(n,a.childNodes).splice(r||0,0,t),t.parentNode=n,a.moveCallback.call(e,t,i,o,s),t}function l(e,t,n){return n||i(e,[t]),c(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function v(e,t,n,r,i){for(var o=e.options,a=!1,s=!0,c=o.idProperty,l={},u=0,p=t.length;u<p;u++)(l=t[u])[c]||e.standalone||(l[c]=d++,s=!1),a=!(f[e.id][l[c]]=l).parentNode,e.standalone||(l.parentNode=n||e.model.root,l.index=l.index||0),a&&(e.standalone||(b(l,c,l[c],s),m(e,"index",{current:l},null,!0),m(e,"parentNode",{current:l},null,!0)),g(e,l,e.options.listeners)),o.preRecursionCallback.call(e,l,r,i),l[o.childNodes]&&v(e,l[o.childNodes],l),o.enrichModelCallback.call(e,l,r,i),delete l.__index;return t}function m(e,t,n,r,i){var o={};if(e.options.forceEnhance||n.current.hasOwnProperty(t))return o[t]=n.current[t],function(t,n,r,i,e,o){return Object.defineProperty(r.current,n,{get:function(){return"index"===n?function(e,t){return t.__index!==u?t.__index:(t.parentNode?c(t.parentNode,e.options.childNodes):e.model).indexOf(t)}(t,r.current):i[n]},set:function(e){!function(e,t,n,r,i,o){e!==o.options.idProperty&&"index"!==e&&!o.options.subscribe.call(o,o.type||e,t.root||t.current,r,n,o.sibling)||(i[e]=n,y('ERROR: Cannot set property "'+e+'" to "'+r+'"',o.options));delete o.type,delete o.sibling}(o||n,r,i[n],i[n]=e,i,t)},enumerable:e})}(e,t,n,o,!i,r)}function g(e,t,n,r,i){for(var o=[],a=0,s=0,c="",l={},u=[],p=n.length;p--;)if(a=(o=n[p]).indexOf("*"),c=(r||"")+o.join("."),l=i||h(t,o),-1!==a)for(var f in s=a+1,l)s===o.length?m(e,f,{current:l,root:t},c.replace("*",f)):(u=o.slice(s),g(e,t,[o.slice(s)],c.split("*")[0]+f+".",h(l[f],u.slice(0,u.length-1))));else l=1!==o.length?h(i||t,o.slice(0,-1)):t,m(e,o[o.length-1],{current:i||l,root:t},c);return t}function b(e,t,n,r,i){return delete e[t],Object.defineProperty(e,t,{enumerable:!!i,configurable:!1,writable:r===u||!!r,value:n})}function y(e,t){if(!t.throwErrors&&n!==u&&n.console)return console.warn?console.warn(e):console.log(e);throw e}}),define("api",["VOM","blick","toolbox"],function(i,o,v){return function(e,t){var l={},u={},n={};function p(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r]&&t[r].call(e,n)}function f(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function d(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function h(e,t,n){if(n)return n(function(){t.children[0]&&t.removeChild(t.children[0])},function(){t.appendChild(e)});t.children[0]?t.replaceChild(e,t.children[0]):t.appendChild(e)}for(var r in n.model=function(e,t){return new i(e,t)},n.sendToComponent=function(e,t){var n=this.getComponent(e);if(n&&n.onSend)return n.onSend(t)},n.triggerEvent=function(e,t,n){var r,i=n||{};i.detail=t,r=new CustomEvent(e,i),(i.element||window).dispatchEvent(r,t)},n.installEvent=function(e,t,n,r){return v.addEvent(e||window,t,n,r)},n.subscribeToComponent=function(e,t,n,r){var i=this,o=this.getComponent(e),a=o&&o["__cr-id"];return o?(this.subscribe(this.id,a,t,n,r),function(){i.unsubscribe(i.id,a,t,n)}):function(){}},n.destroyComponents=function(e){var t=this;e.forEach(function(e){t.destroyComponent(e)})},n.subscribe=function(e,t,n,r,i){var o=this;if(e=e?e.name||e.components&&e.components[t]||e:this.name,l[e]=l[e]||{},(t=l[e][t]=l[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),function(){o.unsubscribe(e,t,n,r)};delete l[e]},n.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,l[e]=l[e]||{},l[e]&&((t=l[e][t]=l[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&p(this,t[n],r))},n.unsubscribe=function(e,t,n,r){var i=-1,o={};return e="string"==typeof e?e:e.name||this.name,l[e]&&l[e][t]&&l[e][t][n]&&-1!==(i=(o=l[e][t][n]).indexOf(r.callback||r))&&o.splice(i,1),r.callback||r},n.addRoute=function(e,t,n){var r=this,i="object"==typeof e.path?{regexp:e.path}:function(e){var n=[];return e=e.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return n.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$"),names:n}}(e.path),o=n||this.options.hash,a=d(i,f(o)),s=l[this.name]&&l[this.name].__router,c={};return this.subscribe(null,"__router",e.path,{callback:e.callback,names:i.names,regexp:i.regexp||i},t),t&&a&&e.callback.call(this,a),c=!s&&function(r,i,o){var e=void 0!==window.onpopstate?"popstate":"hashchange";return v.addEvent(window,e,function(e){var t={};for(var n in r)(t=d(r[n],f(o)))&&p(i,r[n],t)},i.id)}(l[this.name].__router,this,o),function(){r.removedRoute(e),s||c()}},n.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},n.toggleRoute=function(e,t){var n=l[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},n.template=function(e,t){(t=t||{}).helpers=t.helpers||this.options.helpers;var n=new o(e,t);if(t.share)for(var r in n.schnauzer.partials)this.options.partials[r]||"self"===r||(this.options.partials[r]=n.schnauzer.partials[r]);return n},n.renderModule=function(a){var e=a.require&&a.container,s=e&&"string"==typeof a.container?v.$(a.container):a.container,t=u[(a.context||"")+a.require],c=this;return e?t?new v.Promise(function(e){h(t.element,s,a.transition),t.instance&&t.instance.onLoad&&t.instance.onLoad(t.element,c),e(t)}):new v.Promise(function(o){require([a.path||a.require],function(e){var t=document.createElement(e.selector),n=!e.instance&&e.init(t,null,a.data),r=e.instance||n,i=t.setAttribute.bind(t);a.input&&i("cr-input",a.input),a.event&&i("cr-event",a.event),a.name&&i("cr-name",a.name),h(t,s,a.transition),r&&r.onLoad&&r.onLoad(t,c),o(u[(a.context||"")+a.require]=e.instance?e:{element:t,instance:n})})}):new Promise(function(){})},Object.defineProperties(t,{Toolbox:{value:v},instance:{value:new t}}),n)e[r]={value:n[r]};return e}}),define("controller",["toolbox","VOM"],function(d,o){"use strict";var h=d.keys;function e(e){for(var t in this.options={element:document.body},this.events={},e)this.options[t]=e[t]}return e.prototype={installEvent:function(t,e,n,r){var i=this.options.element;this.events[n]||(this.events[n]=d.addEvent(e,n,function(e){!function(t,n,r,e,i){var o=d.closest(t.target,"[cr-event]"),a=o&&o.getAttribute("cr-id")||d.closest(t.target,"[cr-id]").getAttribute("cr-id"),s=i(a),c=s&&s.events&&h(s.events[t.type]),l=r&&h(r.events[t.type])||[],u=c&&c.length,p=u?s&&s.events:r&&r.events,f={_:!1};(u?c:r&&l||[]).forEach(function(e){v(n,p,s||r,e,t,f)}),o!==e&&u&&l.forEach(function(e){v(n,r.events,r,e,t,f)})}(e,t,r,i,o.getElementById)},!!/(?:focus|blur|mouseenter|mouseleave)/.test(n)))},installEvents:function(t,n,e,r){var i=this;h(e).forEach(function(e){i.installEvent(t,n,e,r)})},removeEvent:function(e){this.events[e]&&(this.events[e](),delete this.events[e])},removeEvents:function(e){e.forEach(this.removeEvent.bind(this))},destroy:function(){this.removeEvents(h(this.events)),this.options.element=null}},e;function v(t,e,n,r,i,o){t[r]&&e[i.type][r].forEach(function(e){!o._&&e.contains(i.target)&&(o._=!1===t[r](i,e,n),o._&&i.stopPropagation())})}}),define("circular",["toolbox","blick","VOM","api","controller"],function(g,t,b,e,y){"use strict";var x=g.$,f=g.$$,i=g.$create,C=g.isArray,E=g.keys,_=0,N={},w={},n=i("div");function P(e,t){this.options={hash:"#",partials:{},helpers:{},decorators:{}},function(e,t,n){var r="string"==typeof t;r||(n=t||{});for(var i in n)e.options[i]=n[i];e.version="1.0.0",e.id="cr_"+_++,e.name=r?t:e.id,w[e.id]={}}(this,e,t||{})}return Object.defineProperties(P.prototype,e({getComponent:{value:function(e){var t=w[this.id][e];return t&&t.instance}},destroyComponent:{value:function(e){var t=e["__cr-id"].split(":"),n=w[t[0]][t[1]],r=n.instance;for(var i in r.onDestroy&&r.onDestroy(),r)r[i]&&r.hasOwnProperty(i)&&C(r[i])&&(r[i]=[]);for(var i in n.controller.removeEvents(E(n.controller.events)),n.models.forEach(function(e){e.destroy()}),n.subscribers.forEach(function(e){e()}),n)n[i]=null;delete w[t[0]][t[1]]}},destroy:{value:function(){var t=w[this.id];this.destroyComponents(E(t).map(function(e){return t[e].instance}))}}},P)),Object.defineProperties(P,{Module:{value:function(e,t){var n=x(e.selector,e.context),r=P.Component(e,t);return{component:r,instance:r.init(n,null,function(e){var t=e.closest('[cr-id|="cr_"]'),n=t&&t.getAttribute("cr-id").substr(3).split(":"),r=n&&w["cr_"+n[0]][n[1]];return r&&r.instance||r}(n)),element:n}}},Component:{value:function(o,r){return o.plugins={},o.components={},N[o.selector]||(N[o.selector]={Klass:r,selector:o.selector,templates:o.template&&function(e,o){e.innerHTML=o.template||"";var t=f("[cr-for]",e),a={};return t.forEach(function(e,t){var n=x("[cr-child]",e),r=e.getAttribute("cr-for"),i=r+t;a[r]={container:i,child:n?c(n,o,"child",r):null,template:c(function(e,t){return e.parentNode.setAttribute("cr-parent-container",t),e}(e,i),o,"loop",r)}}),a.this={template:c(e.firstElementChild,o,"main","this")},a}(n,o),styles:function(e,t){if(!t.styles)return;var n=i("style");return n.setAttribute("name",e),n.innerHTML="\n"+t.styles+"\n",document.head.appendChild(n),n}(o.selector,o),name:o.name||r.name,init:function(e,t,n){return function(n,r,e,i,t){var o,a,s,c=r.selector,l=N[c],u={},p={},f=r.circular||P.instance,d=[],h=l.templates||{},v=n.getAttribute("cr-id"),m=n.getAttribute("cr-name");if(v&&!i)return w[f.id+":"+v];["partials","helpers","decorators","attributes"].forEach(function(e){r[e]||(r[e]=f.options[e])}),o={"cr-id":!i&&(n.setAttribute("cr-id",f.id+":"+_),_)||_,elements:{element:n},events:{},parentNode:{},views:{}},a=o["cr-id"],p=w[f.id][a]={instance:{},controller:{},models:[],parent:"",subscribers:[]},m&&(w[f.id][m]=w[f.id][a]);u=p.instance=function(e,t,i,n,o,a,r,s){var c=C(s)?s[0]:s,l=s&&s[1],u=!1,p=function(e,t){for(var n=e&&e.split(/\s*,\s*/)||[],r=[],i={vars:{},origin:{},names:{},static:{}},o=!1,a="",s="",c=n.length;c--;)r=n[c].split(/\s+as\s+/),o="'"===r[0].charAt(0)||'"'===r[0].charAt(0),a=o?g.convertToType(r[0].replace(/'|"/g,"")):"",s=o?a:r[0],i.vars[r[1]||s]=o?a:t[s],i.origin[s]=o?a:t[s],i.names[s]=r[1]||s,i.static[s]=o;return i}(o||t.getAttribute("cr-input"),r.parent=c)||{},f=c&&c["__cr-id"].split(":")[1];return t.removeAttribute("cr-input"),new e(t,i,function(r,e){for(var t in p.vars)"null"!==t&&(r[t]="function"==typeof p.vars[t]?p.vars[t].bind(c):p.vars[t]);if(!1!==e)for(var t in p.origin)p.static[t]||"null"===t||((u="this"===t||"."===t)&&(r[p.names[t]]=l),w[i.id][n].subscribers.push(function(t,n){return i.subscribeToComponent(u?l["cr-id"]:f,n,function(e){r[t[n]]=e},!0)}(p.names,t)));o&&c!==l&&function(e,i,t){var n=t.events||{};for(var r in n)e["pl-"+n[r]]||function(r){Object.defineProperty(e,"pl-"+r,{value:function(e,t,n){return i[r](e,t,n)}})}(n[r])}(c,r,a)},function(){return c||l})}(e,n,f,_++,i,r,p,t),Object.defineProperty(u,"__cr-id",{value:f.id+":"+a}),i||function(e,r,i,o){j(e,"cr-plugin",function(e,t,n){N[e]&&(N[e].preparePlugin(n,i,{where:o,modelName:"this",value:t||"null"}),N[e].init(n,t,r))});for(var t=e.children.length,n="",a={};t--;)a=e.children[t],n=a.tagName.toLowerCase(),N[n]&&N[n].init(a,null,r)}(n,u,r,a),s=p.controller=new y({element:n}),d=E(h).concat(E(r.subscribe$)),p.models=d.filter(function(e,t){return d.indexOf(e)===t}).sort(function(e){return"this"===e?-1:1}).map(function(e){var t=h[e];return e?function(e){var t=function(a){var s=a.instance,e=a.modelName,c=e+"$",l=e+"$$",i=e+"$PR";return new b("this"===e?s:s[e]||[],{idProperty:"cr-id",moveCallback:s[e+"$Move"]||function(){},enrichModelCallback:s[e+"$Enrich"]||function(){},listeners:a.listeners,preRecursionCallback:function(e,t,n){var r=a.template&&T(this,{item:e,type:t,siblPar:n,data:a});s[i]&&s[i](this,e,r)},subscribe:function(e,t,n,r,i){var o="childNodes"===e||!!b.prototype[e];a.template&&function(e,t,n,r,i,o,a){var s=n.elements&&n.elements.element,c=n.parentNode&&n.parentNode.elements||null,l=c?c.container||c.element:a.templateContainer,u=n["cr-id"],p=!n.childNodes&&a.childTemplate||a.template||null,f=p?p.collector:{},d="childNodes"===t||!!b.prototype[t];"removeChild"===t?(R(s,t,s.parentElement),function(e,t,n){if(!e[t])return;for(var r in e[t])delete e[t][r];n||delete e[t]}(f,u)):"sortChildren"===t?R(s,"appendChild",l):e[t]&&(n===o?T(e,{item:n,type:t,siblPar:o,data:a}):"replaceChild"!==t&&s&&d&&R(s,t,l,o.elements&&o.elements.element));for(var h in k(a,n,f,u,t,r,i),a.defData.helpers)k(a,n,f,u,h,r,i)}(this,e,t,n,r,i,a),s[c]&&!o&&s[c](e,t,n,r),s[l]&&s[l](e,t,n,r,o),o||a.crInstance.publish(a.crInstance.id,s["__cr-id"],e,n)}})}(e);if("this"===e.modelName||!C(e.instance[e.modelName]))return t;for(var n in b.prototype)Object.defineProperty(t.model,n,{value:t[n].bind(t)});return Object.defineProperty(e.instance,e.modelName,{get:function(){return t.model},set:function(e){O(t,t.model,e,e.isDelta)}}),t}({instance:u,items:o,defData:r,template:!i&&t&&t.template,childTemplate:!i&&t&&t.child,templateContainer:!i&&"this"!==e&&t?function(e,t){var n=void 0!==t&&x('[cr-parent-container="'+t+'"]',e);n&&n.removeAttribute("cr-parent-container");return n||e}(n,t.container):n,modelName:e,listeners:r.subscribe$&&r.subscribe$[e],crInstance:f,controller:s}):null}),i||r.template||A(n,r,o,p);return n.removeAttribute("cr-cloak"),u.onInit&&u.onInit(n,f,o),u}("string"==typeof e?x(e):e,o,r,t,n)},preparePlugin:function(e,t,n){var r=t.plugins[o.selector]=t.plugins[o.selector]||{},i=r[n.where]=r[n.where]||{};(i[n.modelName]=i[n.modelName]||[]).push(n.value),function(e,t){var n=e.getAttribute("cr-event"),r=n?[n]:[];for(var i in t.events)r.push(i+": pl-"+t.events[i]);e.setAttribute("cr-event",r.join("; "))}(e,o)}})}},Plugin:{value:function(e,t){return P.Component(e,t)}}});function d(e,t,n,r){for(var i=-1!==(n.getAttribute("cr-plugin")||"").indexOf(e),o=[].slice.call(f('[cr-plugin*="'+e+'"]',n)),a=i?[n].concat(o):o,s=0,c=a.length;s<c;s++)N[e].init(a[s],t[s],r),a[s].removeAttribute("cr-plugin")}function A(t,e,n,r){var i=E(e.components).join(","),o=i?f(i,t):[],a=o.length?function(e,t){var n=[].slice.call(e).map(function(e,t){var n=document.createElement(e.tagName);return e.parentNode.replaceChild(n,e),n.setAttribute("cr-replace",t),{index:t,element:e}});return function(){!function e(t,n){for(var r=t.length,i=[];r--;){var o=x('[cr-replace="'+t[r].index+'"]',n);o?o.parentNode.replaceChild(t[r].element,o):i.push(t[r])}i.length&&e(i,n)}(n,t)}}(o,t):function(){};n.views=M(t,function(e){}),n.events=j(t,"cr-event",function(e){r.controller.installEvent(r.instance,t,e,n)}),a()}function O(e,t,n,r){for(var i=0,o=n.length;i<o;i++)t[i]?a(e,t[i],n[i]):e.appendChild(n[i],t.parentNode||t[0]&&t[0].parentNode);if(!r)for(;t.length>n.length;)e.removeChild(t[t.length-1])}function a(e,t,n){for(var r in n)"childNodes"!==r&&(t[r]=n[r]);n.childNodes&&O(e,t.childNodes,n.childNodes)}function T(e,t){var n=t.item,r=t.data,i=r.items.elements.element,o=r.templateContainer,a=e.reinforceProperty,s=!n.childNodes&&!!r.childTemplate,c=s?r.childTemplate:r.template,l=(r.defData.extraModel||[]).concat(function(e){var t=e.parentNode,n=e.index,r=t&&t.childNodes.length-1===e.index;return t?{"@last":r,"@first":0===n,"@index":n,"@counter":n+1}:{}}(n),r.instance),u=c&&c.renderHTML(n,l),p=n.parentNode&&n.parentNode.elements,f=p&&p.container||o,d=s?f.lastElementChild:f,h=t.siblPar&&t.siblPar.elements&&t.siblPar.elements.element,v=void 0!==n.__index&&!n.childNodes,m=u?v?u.children[0]:R(u.children[0],t.type,d,h,!0):o,g=s?d:m.hasAttribute("cr-mount")?m:x("[cr-mount]",m);return m.hasAttribute("cr-id")||m.setAttribute("cr-id",e.id+":"+(n["cr-id"]||0)),o!==i?(a(n,"elements",{element:m,container:g}),a(n,"views",M(m,function(e){})),a(n,"events",j(m,"cr-event",function(e){r.controller.installEvent(r.instance,i,e)}))):A(i,r.defData,r.items,{instance:r.instance,controller:r.controller}),S(m,r.defData,r.modelName,s,[r.instance,n]),m}function S(e,t,n,r,i){var o=t.components,a=t.plugins,s="this"===n,c=s?"main":!s&&!r?"loop":r?"child":"",l=[],u={};for(var p in o)c&&o[p][c][n]&&[].slice.call(f(p,e)).forEach(function(e){(u=N[p].init(e,null,i))&&l.push(u)});for(var p in a)c&&a[p][c]&&a[p][c][n]&&d(p,a[p][c][n],e,i);return l}function k(i,t,e,n,r,o,a){var s=e[n]&&e[n][r],c={},l={};if(s)for(var u,p=s.length;p--;)if(l=(c=s[p]).components,o!==a||c.forceUpdate){if(u=c.fn(c.parent),i.controller&&u)for(var f=u.length;f--;)j(u[f],"cr-event",function(e,n){var r=(t.events||i.items.events)[e];r||(r=t.events[e]={},i.controller.installEvent(i.instance,i.instance.element,e)),r[n]?(r[n].filter(function(e,t){i.items.elements.element.contains(e)||r[n].splice(t,1)}),r[n].push(u[f])):r[n]=[u[f]]});if(l&&(i.crInstance.destroyComponents(l),c.components=null),u&&u.length)for(var d=0,h=u.length;d<h;d++)c.components=S(u[d].parentNode,i.defData,i.modelName,!1,[i.instance,t])}}function R(e,t,n,r){return"prependChild"===t?(t="insertBefore",r=n.children[0]):"insertAfter"===t&&(r.nextElementSibling?(t="insertBefore",r=r.nextElementSibling):t=""),n[t||"appendChild"](e,r),e}function s(e,t,n,r,i,o,a){var s,c=i&&n[i[0]]&&!Object.getOwnPropertyDescriptor(n[i[0]],"0").get,l=i?i.slice(0):i,u=a[n["cr-id"]]=a[n["cr-id"]]||{};i&&c&&l.push(e),u[s=l&&l.join(".")||e]=u[s]||[],u[s].push({fn:t,forceUpdate:2===r,parent:i&&("this"!==e&&"."!==e?i.concat(e.split(".")):i)})}function c(e,r,i,o){return e?(e.parentNode&&e.parentNode.removeChild(e),e.removeAttribute("cr-for"),e.removeAttribute("cr-child"),j(e,"cr-plugin",function(e,t,n){N[e]&&N[e].preparePlugin(n,r,{where:i,modelName:o,value:t||"null"})}),function(e,t,n,r){for(var i=e.join(","),o=i?[].slice.call(f(i,n||document)):[],a=o.length,s={};a--;)if(o[a]){s=o[a];for(var c=o.length;c--;)s!==o[c]&&s.contains(o[c])&&o.splice(c,1)}for(a=o.length;a--;)t.push(o[a]),r&&r(o[a],o[a].tagName.toLowerCase())}(E(N),[],e,function(e,t){(r.components[t]=r.components[t]||{main:{},loop:{},child:{}})[i][o]=!0}),new t(e.outerHTML.replace(/(?:{{&gt;|cr-src=)/g,function(e){return"{"===e.charAt(0)?"{{>":"src="}),{helpers:r.helpers||{},decorators:r.decorators,partials:r.partials,attributes:r.attributes,registerProperty:s})):null}function j(e,t,n){for(var r={},i=[e].concat([].slice.call(f("["+t+"]",e))),o=i.length,a="",s=[];o--;)for(var c=(s=(a=i[o].getAttribute(t))?a.split(/\s*;+\s*/):[]).length,l=[],u="",p="";c--;)u=(l=s[c].split(/\s*:+\s*/))[0],(p=l[1])?(r[u]=r[u]||{},r[u][p]=r[u][p]||[],r[u][p].push(i[o])):(r[u]=r[u]||[],r[u].push(i[o])),n&&n(u,p,i[o]);return r}function M(e,t){for(var n=(e.hasAttribute("cr-view")?[e]:[]).concat([].slice.call(f("[cr-view]",e))),r={},i=n.length;i--;)r[n[i].getAttribute("cr-view")]=n[i],t&&t(n[i]);return r}});
//# sourceMappingURL=circular.min.js.map