!function(u,a){"use strict";var t=u.require||{},s=u.Math.random,p=null,d=0,n=document.createElement("a"),r=function(e,t){if("object"!=typeof t||!t)return t;for(var n in e=e||{},t)e[n]=t[n].constructor===Array?t[n]:"object"==typeof t[n]?r(e[n],t[n]):t[n];return e},f=function(e){return(-1!==(n.href=e).indexOf(n.host)?n.origin:"")+n.pathname+n.search},h=function(n,e,r,i){var o=u.document.createElement("script"),a={};return o.type="text/javascript",o.async=o.defer=!e,o.charset="utf-8",o.onload=o.onreadystatechange=function(e){var t=r._last;delete r._last,"load"!==e.type&&"complete"!==(e.currentTarget||e.srcElement).readyState||(n.factory||g(n),t&&!n.done&&(a=r[t.name],-1===n.parentNames.indexOf(i)&&n.parentNames.push(i),a.done&&(n.factory=function(){return a.done},g(n))),o.onload=o.onreadystatechange=null)},o.src=n.path,o},m=function(e){for(var t=0,n=e.resolvedDeps.length;n--;)(e.resolvedDeps[n]||{}).done!==a&&t++;e.deps.length===t&&g(e)},v=function(e){for(var t=null,n=0,r=0,i=e.parentNames.length;r<i;r++)n=(t=x[e.parentNames[r]]).deps.indexOf(e.name),t.resolvedDeps[n]=e,!t.done&&m(t);e.parentNames=[]},g=function(e){e.done||(e.done=(e.factory||function(){}).apply(null,e.resolvedDeps.map(function(e){return e.done}))),v(e),b.options.debug||(delete e.factory,e.name.indexOf("_mod"))},y=function(e){var t=b.lookaheadMap[e];if(t&&-1===(b.paths[e]||"").indexOf(b.options.minifyPrefix)){b(t);for(var n=0,r=t.length;n<r;n++)b.lookaheadMap[t[n]]&&!x[t[n]]&&y(t[n])}};if(!u.define||!u.define.amd){var l=u.define=function(e,t,n,r){var i,o,a,s=[];if("string"!=typeof e)return b(e,t,n);if(x[e]){if(x[e].done)return v(x[e]),x[e].done;x[e].deps=t,x[e].factory=n}else x[e]={name:e,deps:t,factory:n,resolvedDeps:[],parentNames:[]};for(var l=0,c=t.length;l<c;l++)s=x[t[l]]&&x[t[l]].parentNames,x[t[l]]?-1===s.indexOf(e)&&s.push(e):(x[t[l]]={name:t[l],isFile:"!"===t[l].substr(0,1),path:(o=t[l],a=void 0,a=/(?:^\!|^http[s]*:|.*\.js$)/.test(o)?"":".js",o=(b.paths[o]||o).replace(/^\!/,""),f((b.baseUrl||".")+"/"+o+a).replace(/^.\//,"")),resolvedDeps:[],parentNames:[e]},x[t[l]].isFile?b.getFile(x[t[l]],g):(i=h(x[t[l]],r,x,e),(p=p||u.document.createDocumentFragment()).appendChild(i),clearTimeout(d),d=setTimeout(function(){document.head.appendChild(p)},0),y(t[l]))),x[t[l]].done&&v(x[t[l]]);return m(x[e]),x[e]},b=u.require=function(e,t,n){var r="_mod"+(s()+s()),i=e.constructor===Array,o=i?t:e;return x._last=o?{factory:o,name:r}:a,i?l(r,e,t,n):l(r,[],e,t)},x=b.modules={},e=b.config=function(e){!function(e){for(var t=["lookaheadMap","paths","options","baseUrl"],n=t.length;n--;)b[t[n]]=r(b[t[n]],e[t[n]])||b[t[n]]||""}(t=e)};b.getFile=function(e,t){return e},l.amd={},e(t)}}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,f){"use strict";var h=null,t=document.createElement("a"),m={closest:function(e,t,n){if(e.closest)m.closest=function(e,t){return e.closest(t)};else{var r=e.msMatchesSelector||e.webkitMatchesSelector||e.matches;m.closest=function(e,t){if(!(n||document.documentElement).contains(e))return null;do{if(r.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}}return m.closest(e,t,n)},$:function(e,t){return(t||document.body).querySelector(e)},$$:function(e,t){return(t||document.body).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&m.removeClass(e,n),t&&m.addClass(t,r||n)},addEvents:function(e,t,n,r,i){for(var o=e.length;o--;)m.addEvent(e[o],t,n,r,i)},removeEvents:function(e,t,n){for(var r=t.length;r--;)m.removeEvent(e,t[r],n)},addEvent:function(e,t,n,r,i){m.addEvent.events=m.addEvent.events||[],m.addEvent.events.push({e:e,t:t,f:n,c:r,i:i||m}),e.addEventListener(t,n,r)},removeEvent:function(e,t,n){var r={},i=!1,o=0;for(o=(m.addEvent.events||[]).length;o--;)r=m.addEvent.events[o],i=!t||r.e===t&&(!n||n===r.t),r.i===(e||m)&&i&&(r.e.removeEventListener(r.t,r.f,r.c),m.addEvent.events.splice(o,1))},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){m.lazy(function(){m.storageHelper.save(e,t)},n||m.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:o<i?-1:0:i<o?-1:o<i?1:0},normalizePath:function(e){return(-1!==(t.href=e).indexOf(t.host)?t.origin:"")+t.pathname+t.search},ajax:function(s,l){var e,t,n=null,r=(new Date).getTime();return l=l||{},s=m.normalizePath(s),t=i[s]&&i[s].time||0,n=(n=(e=!0===l.cache?r+1e8:l.cache?r<t?t:r+l.cache:0)&&!l.resetCache&&r<t?i[s]:null)||new m.Promise(function(t,n){var e,r,i=new XMLHttpRequest,o=(l.method||l.type||"GET").toUpperCase();if(i||n("Giving up :( Cannot create an XMLHTTP instance"),l||(s=(l=s).url),i.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||299<e.status))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,l.dataType,n);if(e!==f){if("json"===l.dataType)try{e=JSON.parse(e)}catch(e){return void n("Caught Exception: "+e.stack)}t(e)}},i.open(o,s,l.async||!0,l.username,l.password),"xml"===l.dataType&&i.setRequestHeader("Content-Type","text/xml"),"GET"!==o&&l.csrf&&i.setRequestHeader("X-CSRF-Token",(e=l.csrf,(r=document.cookie.split(e+"=")[1])&&r.split(";")[0])),l.headers)for(var a in l.headers)i.setRequestHeader(a,l.headers[a]);i.send(l.data)}),e?(i[s]=n,i[s].time=e):delete i[s],n},errorHandler:function(e){console.error(e)},Promise:r,requireResources:function(e,t,n){for(var r=[],i=null,o="",a=!1,s="",l="",c="styles"===t,u=c?"href":"src",p=c?e.styleSheets:e.scripts,d=h=h||m.captureResources();i=p.shift();)a=(o=i.getAttribute(u))&&-1!==o.indexOf("://"),s=m.normalizePath(e.path&&!a?e.path+"/"+o:""+o),o&&d[s]||(c||(l=i.text,(i=document.createElement("script")).setAttribute("type","text/javascript"),i.async=!0,o||(i.text=l)),o&&(i[u]=s,document.head.appendChild(i),d[s]=i),r.push(new m.Promise(function(e){o&&i.onload!==f?i.onload=function(){e(this)}:(!o&&(c?n:document.body).appendChild(i),e(i))})));return m.Promise.all(r)},captureResources:function(){for(var e={},t=[].slice.call(document.scripts).concat([].slice.call(m.$$("link",document))),n="",r=t.length;r--;)(n=t[r].getAttribute("src")||t[r].getAttribute("href"))&&(e[n=m.normalizePath(n)]=t[r]);return e}};e.Event=e.Event||function(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n};var i={};function r(e){this._state=0,this._handled=!1,this._value=f,this._deferreds=[],c(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,setTimeout(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void s(r.promise,e)}a(r.promise,e)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(t,e){try{if(e){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void c(n.bind(e),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1,r=function(e){n||(n=!0,s(t,e))};try{e(function(e){n||(n=!0,a(t,e))},r)}catch(e){r(e)}}return r._cache={},r.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},r.prototype.then=function(e,t){var n=new r(function(){});return o(this,{onFulfilled:e||null,onRejected:t||null,promise:n}),n},r.prototype.cancel=function(e){var t=r._cache[e];return t&&(t._deferreds=[],t.then=t.catch=function(){},t._handled=!0),r._cache[e]=this},r.all=function(e){var n=[];return e.reduce(function(e,t){return e.then(function(){return t}).then(function(e){return n.push(e)})},new r(function(e,t){e(null)})).then(function(){return n})},e.require&&(require.getFile=function(t,n){m.ajax(t.path,{cache:"!!"!==t.name.substr(0,2)}).then(function(e){t.done=e,n(t)})}),m}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,v){"use strict";var t=function(e,t){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:v,render:v},n(this,t||{},e)},n=function(e,t,n){for(var r in t)e.options[r]=t[r];for(var i in t=e.options,e.entityRegExp=new RegExp("["+b(t.entityMap,[]).join("")+"]","g"),o(e,t.tags),e.helpers=t.helpers,e.decorators=t.decorators,e.partials={},t.partials)e.registerPartial(i,t.partials[i]);n&&e.registerPartial(t.recursion,n)},g=Array.isArray||function(e){return e&&e.constructor===Array},y=function(e){return e&&"function"==typeof e},b=Object.keys||function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return t.prototype={render:function(e,t){return this.partials[this.options.recursion](e,t)},parse:function(e){return this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerDecorator:function(e,t){this.decorators[e]=t},unregisterDecorator:function(e,t){delete this.decorators[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||"function"==typeof t?t:function l(c,n,u){var e="";var p=c.options.tags;for(;e!==n&&(e=n);)n=n.replace(c.sectionRegExp,function(e,t,n,r,i,o,a){if("#*"!==n)return a=a.split(c.elseSplitter),u.push(h(c,[f(c,a[0],u,r),a[1]&&f(c,a[1],u,r)],r,i&&i.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===t,"^"===n)),p[0]+"-section- "+(u.length-1)+" "+(i||r)+p[1];var s=i.replace(/(?:^['"]|['"]$)/g,"");return c.partials[s]=c.partials[s]||l(c,a,u),""});n=f(c,n,u);return function(e,t){return n(x(e,t&&(g(t)&&t||[t])))}}(this,t,[])},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){o(this,e)}},t;function o(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t,r=e.options.characters+"\\][";e.inlineRegExp=new RegExp("("+n[0]+")([>!&=])*\\s*([\\w\\"+r+"\\.]+)\\s*([\\w"+r+"|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp("("+n[0]+")([#^][*%]*)\\s*([\\w"+r+"]*)(?:\\s+([\\w$\\s|./"+r+"]*))*("+n[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),e.elseSplitter=new RegExp(n[0]+"else"+n[1])}function l(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t}function x(e,t,n,r){var i=n!==v,o=!e.__schnauzerData,a=i&&!o&&e.extra||[],s=!o&&e.helpers||[];return{extra:t?l(t,a):a,path:o?[e]:i?l(e.path,[n]):e.path,helpers:r?l(s,i&&[r]||[{}]):s,__schnauzerData:!0}}function C(e,t){for(var n=0,r=t.length;n<r;n++)"./"!==t[n]&&(e=e&&e[t[n]]);return e}function c(e,t,n){return e!==v?e:n?C(t,n):t}function E(e,t,n,r){if(n){var i=e.path[r]||{},o=e.helpers[r]||{},a=c(o[t],o,n);if(a===v&&(a=C(i,n)),a!==v)return a;for(var s=e.extra.length;s--;)if((a=c(e.extra[s][t],e.extra[s],n))!==v)return a}}function p(e){if(!e)return{};var t=e.split("="),n=1<t.length?t[1]:t[0],r=n.charAt(0),i='"'===r||"'"===r,o=!1,a=0,s=[],l=[],c=!1,u="%"===n.charAt(1)?2:"%"===r?1:0;return n=i?n.replace(/(?:^['"]|['"]$)/g,""):(1<(l=(n=u?n.substr(u):n).split("../")).length&&(n=("@"===l[0]?"@":"")+l.pop(),a=l.length),name=name.replace(/^(?:\.|this)\//,function(){return c=!0,""}),s=n.split(/[\.\/]/),n.replace(/^(\.\/|this\.|this\/|\*)/,function(e,t){return"*"===t?o=!0:(c=!0,s[0]="./"),""}).replace(/(?:^\[|\]$)/g,"")),{name:1<t.length?t[0]:n,value:n,isActive:u,isString:i,isInline:o,strict:c,keys:s,depth:a}}function u(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function _(t,e,n,r,i,o,a,s){return t.options.tools?t.options.tools(t,E,x,e,n,r,i,o,a,s):e[g(r)||o.isInline?"apply":"call"]({getData:function(e){return(e=o.rawParts[e]||{value:e,keys:[e],depth:0}).isString?e.value:E(i,e.value,e.keys,e.depth)},escapeHtml:function(e){return u(e,t)},getBody:function(){return a&&a(i)||""},gatAltBody:function(){return s&&s(i)||""}},o.isInline?[function(){return a||""},o.parts,t]:r)}function N(e,t,n,r,i,o,a){var s=t.name;return o=c(o,""),e.options.render?_(e,e.options.render,s,{name:s,data:n,section:!!t.section,partial:!!t.partial,isActive:t.isActive,fn:r,text:i,value:o,parent:t.parent,type:(t.isInline&&e.decorators[s]?"decorator":t.partial&&e.partials[s]&&"partial")||e.helpers[s]&&"helper"||a||""},n,t,r):i+o}function d(e,t,n,r,i){for(var o={},a={},s=[],l=0,c=t.length,u={};l<c;l++)if(""!==t[l]){if("as"===t[l]){t.splice(l,1),s=[t.splice(l,1)[l],t.splice(l,1)[l]];break}o[(u=p(t[l])).name]=u,a[t[l]]=u}return{name:n.name,vars:t,parts:o,rawParts:a,partial:">"===i,isInline:n.isInline,isUnescaped:!e.options.doEscape||"&"===i||r,isActive:n.isActive,depth:n.depth,strict:n.strict,keys:n.keys,helpers:s}}function w(e,t,n,r,i,o){var a=i?{"@index":o,"@last":o===i-1,"@first":0===o,_parent:n&&[n.name,o]}:{};return a["@key"]=t,a["."]=a.this=e,0!==r.length&&(a[r[0]]=e,a[r[1]]=t),a}function f(a,n,r,i){var s=[],l=a.options.splitter;return n=n.replace(a.inlineRegExp,function(e,t,n,r,i){var o=n&&n.charAt(0)||"";return"!"===o||"="===o?"":(i=i.split(/\s+/),"-section-"===r?((r=p(i[1])).section=i[0],s.push(r)):("*"===r&&(r+=i.shift()),s.push(d(a,i,p(r),"{{{"===t,o))),l)}).split(l),i=p(i).name,function(e,t){return function(e,t,n,r,i,o,a){for(var s,l="",c="",u=null,p={},d={},f=0,h=n.length;f<h;f++)if((p=o[f])!==v)if(l+=n[f],p.section)p.parent=a&&C(t.helpers,[0,"_parent"]),l=N(e,p,t,u=r[p.section],l,u(t,a),i);else if(p.isInline)l=_(e,e.decorators[p.name||p.vars[0]],p.name,p.vars,t,p,l)||l,y(l)&&(l=l());else{if(p.partial){for(var m in d=t.helpers[0]||(t.helpers[0]={}),s=v,p.parts)s=p.parts[m],d[m]=s.keys.length&&E(t,s.name,s.keys,s.depth)||s.isString&&(s.value||s.name);c=e.partials[p.name](t)}else p.parent=a&&C(t.helpers,[0,"_parent"]),u=A(e,p),c=u(t);l=N(e,p,t,u,l,c,i)}else l=i?N(e,{},t,u,l,n[f],i):l+n[f];return l}(a,e,n,r,i,s,t)}}function A(i,o){return function(e,t){var n=E(e,o.name,t||o.keys,o.depth),r=!o.strict&&(i.helpers[o.name]||i.partials[o.name])||y(n)&&n;return n=r?_(i,r,o.name,o.vars,e,o):n&&(o.isUnescaped?n:u(n,i))}}function h(n,r,i,o,e,a){var s=i;return i=p(!o.length||"if"!==i&&"each"!==i&&"with"!==i&&"unless"!==i?i:o.shift()),o=d(n,o,p(i.name),e,""),function(e,t){return function(e,t,n,r,i,o,a,s){var l=E(t,r.name,g(s)?s:r.keys,r.depth),c=!r.strict&&(e.helpers[r.name]||y(l)&&l),u=c&&_(e,c,r.name,i.vars,t,i,n[0],n[1]),p=g(l),d="each"===a&&!p&&"object"==typeof l&&l,f="";if(l=l===v?g(t.path[0])&&t.path[0]:l,c){if(t.helpers[0]=w(u,r.name,v,i.helpers),"if"===a)return u?n[0](t):n[1]&&n[1](t);if("unless"===a)return u?n[1]&&n[1](t):n[0](t);p=g(l=u)}"unless"===a?l=!l:d&&(l=b(l,[]));if(p||d){if(o)return l.length?"":n[0](l);t.path.unshift({}),t.helpers.unshift({});for(var h=0,m=l.length;h<m;h++)t.path[0]=p?l[h]:d[l[h]],t.helpers[0]=w(t.path[0],p?h:l[h],r,i.helpers,m,h),f+=n[0](t,l[h]);return t.path.shift(),t.helpers.shift(),f}if(o&&!l||!o&&l)return c&&"string"==typeof l?l:n[0]("unless"===a||"if"===a?t:x(t,v,l,w(l,r.name,v,i.helpers)));return n[1]&&n[1](t)}(n,e,r,i,o,a,s,t)}}}),function(t,n){"object"==typeof exports?module.exports=n(t,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(e){return n(t,e)}):t.Blick=n(t,t.Schnauzer)}(this,function(e,a,b){"use strict";function x(r,i){for(var e in r)r[e]=document.createElement(r[e]);x=function(e){var t=((e||"").match(i)||[])[1],n=r[t]||r._default;return n.innerHTML=e||"",n}}x({option:"select",legend:"fieldset",area:"map",param:"object",thead:"table",tr:"tbody",col:"colgroup",td:"td",_default:"div"},/<\s*(\w*)\s*[\s\S]*?>/);var t=function(e,t){this.version="0.0.1",this.options={registerProperty:r,unregisterProperty:r,attributes:{value:o,disabled:i,checked:i,autocomplete:i,contenteditable:i,readonly:i,required:i,selected:i}},n(this,t||{},e)},n=function(e,t,n){for(var r in t)if("attributes"===r)for(var i in t[r])e.options[r][i]=t[r][i];else e.options[r]=t[r];var o=e.options.registerProperty;e.options.registerProperty=function(e,t){o(e.name,e.replacer,e.data.path[0],e.isActive,e.parent,t)},t.render=s,e.search=/{{#\d+}}[\S\s]*{{\/\d+}}/,e.attrSplitter=/([^}{]*)({{#(\d+)}}[\s\S]*?{{\/\d+}})/g,e.schnauzer=new a(n,t)},C=[],r=function(){},i=function(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1,"focus"===n&&e.focus())},o=function(e,t,n){e.setAttribute("value",n),e.value=n};return t.prototype={render:function(e,t){return this.schnauzer.render(e,t)},renderHTML:function(e,t){var n=document.createDocumentFragment(),r=this.schnauzer.render(e,t);return function a(s,e,t,n,l){s.search;var r=x(t);var i="";var o="";var c={};var u={};var p={};var d=s.options;var f=d.registerProperty;var h=[];var m=[];var v;var g={};for(var y=e.length;y--;)i="{{#"+y+"}}",o="{{/"+y+"}}",c=e[y],(u=E(r,i))?u.ownerElement?(u.valueSplitter||((g=u.valueSplitter=[]).valueTracker={},g.push(u.textContent.replace(s.attrSplitter,function(e,t,n,r){return g.push(t),g.push(n),g.valueTracker[r]=g.length-1,""}))),c.replacer=function(r,i,o,e,t,a,s){return function(e,t){var n=t||a.fn(a.data,e);n===b&&(n=""),d.attributes[o]?(r=null,d.attributes[o](i,o,n)):n!==b&&(r.valueSplitter[r.valueSplitter.valueTracker[s]]=n,r.textContent=r.valueSplitter.join("").trim())}}(u,u.ownerElement,u.name,0,u.textContent,c,y),f(c,u),m=k(u.ownerElement.previousSibling,c,m,d),c.replacer(null,c.value)):N(c,u)?((m=k(u,c,m,d)).push({search:i,children:c.children=[]}),p=E(u.parentNode,o),c.lastNode=p=p.splitText(p.textContent.lastIndexOf(o)),p.textContent=p.textContent.replace(o,""),(u=u.splitText(u.textContent.indexOf(i))).textContent=u.textContent.replace(i,""),c.replacer=function(i,o){return function(e){for(;o.lastNode.previousSibling&&o.lastNode.previousSibling!==i;)i.parentNode.removeChild(o.lastNode.previousSibling);if(o.children)for(var t=o.children.length;t--;)o.children[t].unregister();i.textContent="",h=a(s,C,o.fn(o.data,e),i,l),o.children=w(h);for(var n=[],r=o.lastNode;r!==i&&(r=r.previousSibling);)1===r.nodeType&&n.push(r);return n}}(u,c),f(c,u)):(u=_(u,i,o),c.replacer=function(t,n){return function(e){t.textContent=n.fn(n.data,e)}}(u,c),u.textContent=c.value,f(c,u),m=k(u,c,m,d)):window.console&&console.warn("There might be an error in the SCHNAUZER template");v=A(n,r,l);n||(e=w(e));C=[];return n?e:v}(this,C,r,null,n)}},t;function E(e,t){return document.evaluate('//text()[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue||document.evaluate('//@*[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function s(e){var t=C.length;return e.fn&&e.name&&e.isActive&&!e.partial&&"decorator"!==e.type&&"helper"!==e.type&&"@"!==e.name.charAt(0)?(e.isSection=N(e),(C[t]=e).text+"{{#"+t+"}}"+e.value+"{{/"+t+"}}"):e.text+e.value}function _(e,t,n){return e.splitText(e.textContent.lastIndexOf(n)+n.length).textContent,e.splitText(e.textContent.indexOf(t))}function N(e,t){return e.section&&!e.type&&(-1!==e.value.indexOf("{{#")||t&&-1!==t.textContent.indexOf("{{#"))}function w(e){for(var t={replacer:!0,lastNode:!0,fn:!0,children:!0,unregister:!0,data:!0},n=e.length;n--;){for(var r in e[n])t[r]||delete e[n][r];e[n]=null}return null}function A(e,t,n){for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);if(!e)return n;e.parentNode.insertBefore(n,e.nextSibling)}function k(e,t,n,r){if(e&&0!==n.length)for(var i=n.length;i--;)n[i].children.push({unregister:function(e){return function(){r.unregisterProperty(e.name,e)}}(t)}),-1!==e.textContent.indexOf(n[i].search)&&(e.textContent=e.textContent.replace(n[i].search,""),n.pop());return n}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(n,d){"use strict";var e=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],forceEnhance:!1,childNodes:"childNodes",throwErrors:!1},this.model=e||[],r(this,t||{})},r=function(e,t){var n={},r=e.options;for(var i in f.push({}),x(e,"id",f.length-1),t)r[i]=t[i];r.listeners=[];for(var o=t.listeners.length;o--;)t.listeners[o]&&(r.listeners[o]=t.listeners[o].split(l));n[r.childNodes]=e.model,x(e.model,"root",n),g(e,e.model)},l=/\.|\//,f=[],h=0;return e.prototype={getElementById:function(e){return f[this.id][e]},getElementsByProperty:function(e,t){var n=[],r=d!==t,i=d!==e,o=[],a=null;for(var s in f[this.id])a=d!==f[this.id][s][e]?f[this.id][s][e]:m(f[this.id][s],o[0]?o:o=i&&e.split(l)),(r&&a===t||!r&&d!==a||!r&&!i)&&n.push(f[this.id][s]);return n},appendChild:function(e,t){return o(this,e,t=t||this.model.root,v(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return o(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return o(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return o(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&s(this,t),o(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return s(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,n){return y(this,e.split(l)[0],{current:t,root:t},e,n)},reinforceProperty:x,getProperty:function(e,t){return m(t,e.split(l))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return i(this,this.model)}},e;function m(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function i(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&i(e,t[n][e.options.childNodes]),delete f[e.id][t[n][e.options.idProperty]],t.pop();return t}function v(e,t){return e[t]=e[t]||[],e[t]}function o(e,t,n,r,i,o){var a=e.options;return a.moveCallback.call(e,t,i,o),t.parentNode?a.parentCheck&&function(e,t,n){var r=t;e===t&&C("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&C("ERROR: can't move parent inside it's own child",n)}(t,n,a):(t.__index=r,g(e,[t],n,i,o)),e.type=i,e.sibling=o,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&s(e,t,!0)||t,v(n,a.childNodes).splice(r||0,0,t),t.parentNode=n,t}function s(e,t,n){return!n&&i(e,[t]),v(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function g(e,t,n,r,i){for(var o=e.options,a=!1,s=!0,l=o.idProperty,c={},u=0,p=t.length;u<p;u++)(c=t[u])[l]||(c[l]="vom_"+h++,s=!1),a=!(f[e.id][c[l]]=c).parentNode,c.parentNode=n||e.model.root,c.index=c.index||0,a&&(x(c,l,c[l],s),y(e,"index",{current:c},null,!0),y(e,"parentNode",{current:c},null,!0),b(e,c,e.options.listeners)),o.preRecursionCallback.call(e,c,r,i),c[o.childNodes]&&g(e,c[o.childNodes],c),o.enrichModelCallback.call(e,c,r,i),delete c.__index;return t}function y(e,t,n,r,i){var s,l,c,u,o,p,a={};if(e.options.forceEnhance||n.current.hasOwnProperty(t))return a[t]=n.current[t],s=e,l=t,c=n,u=a,o=!i,p=r,Object.defineProperty(c.current,l,{get:function(){return"index"===l?(e=s,(t=c.current).__index!==d?t.__index:(t.parentNode?v(t.parentNode,e.options.childNodes):e.model).indexOf(t)):u[l];var e,t},set:function(e){var t,n,r,i,o,a;t=p||l,n=c,r=u[l],i=u[l]=e,o=u,(t===(a=s).options.idProperty||"index"===t||a.options.subscribe.call(a,a.type||t,n.root||n.current,i,r,a.sibling))&&(o[t]=r,C('ERROR: Cannot set property "'+t+'" to "'+i+'"',a.options)),delete a.type,delete a.sibling},enumerable:o})}function b(e,t,n,r,i){for(var o=[],a=0,s=0,l="",c={},u=[],p=n.length;p--;)if(a=(o=n[p]).indexOf("*"),l=(r||"")+o.join("."),c=i||m(t,o),-1!==a)for(var d in s=a+1,c)s===o.length?y(e,d,{current:c,root:t},l.replace("*",d)):(u=o.slice(s),b(e,t,[o.slice(s)],l.split("*")[0]+d+".",m(c[d],u.slice(0,u.length-1))));else c=1!==o.length?m(i||t,o.slice(0,-1)):t,y(e,o[o.length-1],{current:i||c,root:t},l);return t}function x(e,t,n,r,i){return delete e[t],Object.defineProperty(e,t,{enumerable:!!i,configurable:!1,writable:!!r,value:n})}function C(e,t){if(!t.throwErrors&&n!==d&&n.console)return console.warn?console.warn(e):console.log(e);throw e}}),function(r,i){"object"==typeof exports?module.exports=i(r,require("toolbox"),require("blick"),require("VOM")):"function"==typeof define&&define.amd?define("circular",["toolbox","blick","VOM"],function(e,t,n){return i(r,e,t,n)}):r.Circular=i(r,r.Toolbox,r.Blick,r.VOM)}(this,function(f,R,P,c,S){"use strict";var u,p=function(e,t){this.options={componentAttr:"cr-component",containerAttr:"cr-container",templateAttr:"cr-template-for",templatesAttr:"cr-template",eventAttribute:"cr-event",viewAttr:"cr-view",devAttribute:"cr-dev",mountAttribute:"cr-mount",modelAttribute:"cr-model",elements:"elements",events:"events",views:"views",hash:"#",partials:{},helpers:{},decorators:{}},n(this,e,t)},n=function(e,t,n){var r="string"==typeof t;for(var i in r||(n=t),n)e.options[i]=n[i];e.version="0.1.0",e.components={},e.data={},e.id="cr_"+M++,e.Toolbox=R,e.name=r?t:e.id},d=function(e){this.options={appElement:document.body},t(this,e)},t=function(e,t){for(var n in t)e.options[n]=t[n];e.events={}},O=R.$,T=R.$$,M=0,L={},h={},D={},i=null,j={};function m(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r].call(e,n)}function v(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function g(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function y(e){for(var t=e.container.childNodes;t[0];)h[e.previousName].cache.appendChild(t[0])}function b(e,t,n,r){var i=e&&e.then?e:t.data,o=t.container,a=t.previousName,s=n[a],l=t.name,c=n[l].wrap,u=function(){a&&a!==l&&s.cache.appendChild(s.wrap)},p=function(){n[l].dontWrap&&(n[l].wrap=c=n[l].wrap.children[0],delete n[l].dontWrap),o&&o.appendChild(c),r&&!1!==t.init&&e(t.data,r)};!0===t.transition?(u(),p()):t.transition({container:o,remove:u,append:p,promise:new R.Promise(function(t){i?i.then(function(e){return t(),e}):t()}),component:c,previousComponent:(s||{}).wrap})}return p.prototype.component=function(f,h){if("string"!=typeof f&&(f=(h=f).name||"component_"+M++),this.components[f])return this.components[f].reset(h.model,h.extraModel);var m=this,v={},e={},g=this.options,y=g.elements,t=g.componentAttr,n=$(t,f),i="string"==typeof h.element?O(h.element,h.wrapper||document):h.element||O(n,h.wrapper||document)||O(f,h.wrapper||document);if(i){var r=H(i,t),o=i&&i.getAttribute("name"),p=function(e,t,n,r){for(var i,o=n.getAttribute(e.componentAttr),a=o&&o!==r?o:r,s=n||document.body,l=e.containerAttr,c=$(e.templateAttr,a),u=n.hasAttribute(l)?n:O($(l),n),p=u&&u.getAttribute(e.containerAttr),d=u&&(O(c,s)||O(c,document.body)),f=T($(e.templatesAttr,a),s)||[],h={},m=f.length;m--;)i=z(f[m],e),h[f[m].id||f[m].getAttribute("name")]=new P(i,{helpers:t.helpers||e.helpers});return{element:n,template:d?z(d,e):d,templates:h,container:u,type:p?p+"Child":""}}(g,h,i,o||f),b=this.components[f]={name:f,model:h.model||[],element:p.element,container:p.container,templates:p.templates},x=h.mountSelector||$(g.mountAttribute),a=h.template,C=h.storage,E=C||{},_=R.storageHelper,N=C&&_.fetch(E.name)||{},w=E.category,A=E.listeners||h.listeners,k=E.storeAll||A&&-1!==A.indexOf("*");if(m.data[f]={extraModel:h.extraModel||g.extraModel},j[this.name]=j[this.name]||{},j[this.name][f]={},L[this.id]=L[this.id]||{},(v=L[this.id][f]={}).nestingData=r,h.onBeforeInit&&h.onBeforeInit(b),v.controller=h.eventListeners&&new d({appElement:p.element,eventAttribute:g.eventAttribute,eventListeners:h.eventListeners,instanceID:m.id}),v.collector={},v.template=a&&a.version?a:D[f]||a||p.template?new P(a||p.template,{helpers:h.helpers||g.helpers,decorators:h.decorators||g.decorators,attributes:h.attributes||g.attributes||{},partials:g.partials,registerProperty:function(e,t,n,r,i){var o=i&&n[i[0]]&&!Object.getOwnPropertyDescriptor(n[i[0]],"0").get,a=i?i.slice(0):i;i&&o&&a.push(e);var s=v.collector[n["cr-id"]]=v.collector[n["cr-id"]]||{},l=a&&a.join(".")||e;s[l]=s[l]||[],s[l].push({fn:t,forceUpdate:2===r,parent:i&&("this"!==e&&"."!==e?i.concat(e.split(".")):i)})}}):null,v.template&&(D[f]=v.template),C){var s=N[w]||N;for(var l in b.model[0])s&&s[l]!==S&&(b.model[0][l]=s[l])}return v.vom=new c(b.model,{idProperty:m.options.idProperty||"cr-id",preRecursionCallback:function(e,t,n){var r=this.options.idProperty,i=e[r],o=v.template&&v.template.schnauzer.partials.self&&v.template.renderHTML(e,m.data[f].extraModel),a="replaceChild"===t&&n[y].element,s=e.parentNode[y]&&e.parentNode[y].container,l=o&&c||s||b.container,c=l?a||S:n&&n[y]&&n[y].element,u=o&&I(o,t||p.type||"appendChild",l,c,r,i)||b.element;this.reinforceProperty(e,y,{element:u,container:u.hasAttribute("cr-mount")?u:O(x,u)},!0),this.reinforceProperty(e,g.events,{},!0),v.controller&&v.controller.getEventListeners(e[y].element||b.element,e[g.events],b,r),this.reinforceProperty(e,g.views,{},!0),q(g,e[g.views],e[y].element||b.element),h.preRecursionCallback&&h.preRecursionCallback.call(this,e,u)},enrichModelCallback:this.options.enrichModelCallback||h.enrichModelCallback||function(){},listeners:this.options.listeners||h.listeners||[],subscribe:function(e,t,n,r,i){var o=this.options.idProperty,a=t[o],s=t[y]&&t[y].element,l=t.parentNode&&t.parentNode[y]?t.parentNode[y].container||t.parentNode[y].element:b.container,c=[];if("removeChild"===e)I(s,e,s.parentElement),delete v.collector[a];else if("sortChildren"===e)I(s,"appendChild",l);else if(this[e])if(t===i){s=I(v.template.renderHTML(t,m.data[f].extraModel),e,l,i[y].element,o,t[o]),t[y].element=s,t[y].container=O(x,s);for(var u=(t.childNodes||[]).length;u--;)t[y].container.appendChild(t.childNodes[u].elements.element);t[g.events]={},v.controller&&v.controller.getEventListeners(t[y].element||b.element,t[g.events],b,this.options.idProperty),t[g.views]={},q(g,t[g.views],t[y].element||b.element)}else"replaceChild"===e||this.__isNew||I(s,e,l,i[y]&&i[y].element);else C&&(k||-1!==A.indexOf(e))&&(N=_.fetch(E.name)||{},k?N[w]=b.model[0]:(N[w]=N[w]||{},N[w][e]=n),_[!1===E.saveLazy?"save":"saveLazy"](w?N:N[w],E.name,this));if(c=v.collector[a]&&v.collector[a][e]){var p;for(u=c.length;u--;)if((c[u].forceUpdate||n!==r)&&(p=c[u].fn(c[u].parent),v.controller&&p))for(var d=p.length;d--;)v.controller.getEventListeners(p[d],t[g.events],b,o,!0)}h.subscribe&&h.subscribe.call(this,e,t,n,r),m.publish(b,f,e,{property:e,item:t,value:n,oldValue:r})}}),H(i,null,r),(e=function(e,t,n,r,i){for(var o in e.prototype)r[o]||(i[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));return i}(c,v.vom,0,this,e)).uncloak=function(e){e=e&&e.element||b.element;R.removeClass(e,"cr-cloak"),e.removeAttribute("cr-cloak")},e.reset=function(e,t){t&&(m.data[b.name].extraModel=t),v.vom.destroy(),this.container&&(this.container.innerHTML=""),v.vom.__isNew=!0;for(var n=0,r=e.length;n<r;n++)this.appendChild(e[n]);return v.nestingData.length&&H(i,null,v.nestingData),delete v.vom.__isNew,b},b.__proto__=e,h.onInit&&h.onInit(b),b}},p.prototype.getBaseModel=function(e){var t=this.components[e];return t?t.model[0]:null},p.prototype.destroy=function(e){var t=L[this.id],n={};for(var r in t)if(!e||e===r)for(var i in t[r])(n=t[r][i])&&n.destroy&&n.destroy(r)},p.prototype.model=function(e,t){return new c(e,t)},p.prototype.template=function(e,t){(t=t||{}).helpers=t.helpers||this.options.helpers;var n=new P(e,t);if(t.share)for(var r in n.schnauzer.partials)this.options.partials[r]||"self"===r||(this.options.partials[r]=n.schnauzer.partials[r]);return n},p.Toolbox=R,p.extend=(u=["eventListeners","helpers","decorators","attributes","storage"],function(e,t,n){var r=!1,i="",o=n?[].concat(u,n):u,a={},s={};for(var l in this.extend&&!this.prototype&&(n=t,t=e,e=this),t=t||{},e)if(a[l]=e[l]||{},"model"!==l||t.model||(a[l]=JSON.parse(JSON.stringify(e[l]))),o[l])for(var c in e[l])a[l][c]=e[l][c];for(var l in t)"extend"!==l&&(r=!1,"$"===(i=l).charAt(0)&&(r=!0,i=l.substr(1),-1!==o.indexOf(i)&&(r=!1)),"function"==typeof(s=t[l])?a[i]=r&&a[i]?function(e){return function(){return e.apply(e,arguments),s.apply(s,arguments)}}(a[i]):s:s&&s.constructor===Array?a[i]=r&&a[i]&&"*"!==s.toString()?a[i].concat(s):s:-1!==o.indexOf(i)?a[i]=p.extend(a[i],s):a[i]=s);return a}),p.prototype.subscribe=function(e,t,n,r,i){if(e=e?e.name||e.components&&e.components[t]||e:this.name,j[e]=j[e]||{},(t=j[e][t]=j[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&t[n].value!==S&&(r.callback||r).call(this,t[n].value),r.callback||r;delete j[e]},p.prototype.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,j[e]=j[e]||{},j[e]&&((t=j[e][t]=j[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&m(this,t[n],r))},p.prototype.unsubscribe=function(e,t,n,r){var i=-1,o={};return e=e||this.name,j[e]&&j[e][t]&&j[e][t][n]&&-1!==(i=(o=j[e][t][n]).indexOf(r.callback||r))&&o.splice(i,1),r.callback||r},p.prototype.addRoute=function(e,t,n){var r,i,o,a,s,l,c="object"==typeof e.path?{regexp:e.path}:(r=e.path,i=[],r=r.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return i.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+r+"(?:\\?([\\s\\S]*))?$"),names:i}),u=n||this.options.hash,p=g(c,v(u)),d=j[this.name]&&j[this.name].__router;return this.subscribe(null,"__router",e.path,{callback:e.callback,names:c.names,regexp:c.regexp||c},t),t&&p&&e.callback.call(this,p),!d&&(o=j[this.name].__router,a=this,s=u,l=f.onpopstate!==S?"popstate":"hashchange",R.addEvent(f,l,function(e){var t={};for(var n in o)(t=g(o[n],v(s)))&&m(a,o[n],t)},a.id)),e},p.prototype.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},p.prototype.toggleRoute=function(e,t){var n=j[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},p.prototype.loadResource=function(t,e){var n=this,r=function(e){return!e.hasAttribute(n.options.devAttribute)};return R.ajax(t,{cache:e}).then(function(e){return(i=i||document.implementation.createHTMLDocument("")).documentElement.innerHTML=e,{scripts:[].slice.call(i.scripts).filter(function(e){return"text/javascript"===e.type&&r(e.parentNode.removeChild(e))}),styleSheets:[].slice.call(T("link",i)||[]).filter(r).concat([].slice.call(T("style",i)||[]).filter(r)),body:i.body,head:i.head,path:t.split("/").slice(0,-1).join("/")}}).catch()},p.prototype.insertResources=function(e,t){var n=O($(this.options.devAttribute,"container"),t.body)||t.body;for(R.requireResources(t,"styles",e);n.childNodes[0];)e.appendChild(n.childNodes[0]);return R.requireResources(t,"scripts",e)},p.prototype.insertModule=function(e,t){var n=this;return this.loadResource(e,!0).then(function(e){return n.insertResources(t,e).then(function(){return{path:e.path,container:t}})})},p.prototype.renderModule=function(r){var i=null,o=r.container,a=h,s=r.name,l=s&&a[s],t=l&&l.init,c=r.transition,e=R.Promise;return!a[r.previousName]||c&&s||y(r),s&&l?(t=t&&!1!==r.init&&t(r.data,l.path),c?b(t,r,a):r.container.appendChild(l.cache),new e(function(e){e(r.returnData?r.data:t)})):(a[s]=l={cache:document.createDocumentFragment(),dontWrap:r.dontWrap},o||((i=document.createElement("div")).style.display="none",document.body.appendChild(i)),c&&(l.wrap=document.createElement("div"),l.wrap.setAttribute("cr-wrap",s),i?i.appendChild(l.wrap):r.data&&-1===(r.preInit||[]).indexOf(r.name)&&"*"!==(r.preInit||[])[0]||r.container.appendChild(l.wrap)),s?this.insertModule(r.path,l.wrap||r.container||i).then(function(n){return new e(function(t){var e=!0===r.require?s:!1===r.require?"":r.require;l.path=n.path,e?require([e],function(e){l.init=e,o||c?c?b(e,r,a,n.path):!1!==r.init&&e(r.data,n.path):(!1!==r.init&&e(r.data,n.path),r.container=i,y(r),i.parentElement.removeChild(i)),r.data&&r.data.then?r.data.then(function(){t(r.returnData?r.data:e)}):t(r.returnData?r.data:e)}):i&&(y(r),i.parentElement.removeChild(i),t())})}).catch():new e(function(e){e()}))},d.prototype={getEventListeners:function(e,t,n,r,i){for(var o=this.options.eventAttribute,a=e.querySelectorAll($(o)),s="",l="",c="",u="",p=[],d={},f=e!==n.element?n.element:[],h=(a=[e].concat([].slice.call(a),f)).length;h--;)if(s=a[h].getAttribute(o))for(var m=(p=s.split(/\s*;+\s*/)).length;m--;)c=(l=p[m].split(/\s*:+\s*/))[0],u=l[1],(d=t[c]=t[c]||{})[u]===S&&(d[u]=[]),d[u].push(a[h]),this.events[c]||(this.events[c]=!0);this.installed&&!i||this.installEventListeners(n,r)},installEventListeners:function(t,n){var r=this;for(var e in this.installed=this.installed||{},this.events)this.installed[e]||(R.addEvent(this.options.appElement,e,function(e){o(e,n,t,r)},!!/(?:focus|blur|mouseenter|mouseleave)/.test(e),this.options.instanceID+"_"+t.name),this.installed[e]=!0);e||(this.installed=!1)},destroy:function(e){R.removeEvent(this.options.instanceID+"_"+e.name)}},p;function I(e,t,n,r,i,o){var a="prependChild"===t,s={};11===e.nodeType?(s=e.children[0],"parent"===n.getAttribute("cr-mount")?s=s.children[0]:s.hasAttribute("cr-mount")&&s.removeChild(s.children[0]),s.setAttribute(i,o)):s=e;return s&&((a||"insertAfter"===t)&&(r=r&&r.nextSibling||a&&n.children[0],t=r?"insertBefore":"appendChild"),(n||s.parentElement)[t](s,r)),s}function q(e,t,n){for(var r=T($(e.viewAttr),n),i="",o=(r=[n].concat([].slice.call(r))).length;o--;)(i=r[o].getAttribute(e.viewAttr))&&(t[i]=r[o])}function H(e,t,n,r){var i=[],o=[],a={};if(n){a={};for(var s=0,l=0,c=(i=r||T("[cr-replace]",e)).length;l<c;l++)a[s=i[l].getAttribute("cr-replace")]||(i[l].parentNode.replaceChild(n[s],i[l]),a[s]=!0);(i=i.length!==n.length&&T("[cr-replace]",e)).length&&H(e,t,n,i)}else if(e&&t){for(var u={},p=(l=0,(i=T($(t),e)).length);l<p;l++)(u=document.createElement(i[l].tagName)).setAttribute("cr-replace",l),i[l].parentNode.replaceChild(u,i[l]),o.push(i[l]);return o}}function z(e,t){var n="";return"script"===e.tagName.toLowerCase()?e.innerHTML:(e.removeAttribute(t.templateAttr),n=e.outerHTML.replace(/(?:{{&gt;|cr-src=)/g,function(e){return"{"===e.charAt(0)?"{{>":"src="}),e.parentNode.removeChild(e),n)}function $(e,t){return"["+e+(t?'="'+t+'"]':"]")}function o(e,t,n,r){var i,o,a=(R.closest(e.target,$(t))||n.element).getAttribute(t),s="elements.element",l=n.getElementById(a)||n.getElementsByProperty(s,n.element)[0]||n.getElementsByProperty(s,e.target)[0]||n.model[0],c=l&&l.events[e.type],u={},p=!1;for(var d in c)if(i=r.options.eventListeners[d])for(var f=c[d].length;f--;)u=c[d][f],o=u,r.options.appElement,(o.isConnected!==S?o.isConnected:_this.options.appElement.contains(eventElement))?p||u!==e.target&&!u.contains(e.target)||(p=!1===i.call(n,e,u,l))&&e.stopPropagation():c[d].splice(f,1)}});
//# sourceMappingURL=circular.min.js.map