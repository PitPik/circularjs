!function(e){"use strict";var t=e.Math.random,n=document.createElement("a"),r=e.document.createDocumentFragment(),i=d.modules={},o={};function s(){return"_module_"+(t()+t())}function a(e){var t,r=/(?:^\!|^http[s]*:|.*\.js$)/.test(e)?"":".js";return e=(d.paths[e]||e).replace(/^[!%]/,""),t=function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search}((d.baseUrl||".")+"/"+e+r).replace(/^.\//,""),d.mapPath?d.mapPath(e,r,t):t}function l(e){var t={mapPath:"function",baseUrl:"string"},n=["lookaheadMap","paths","options","mapPath","baseUrl"];if(!d[n[0]])for(var r=n.length;r--;)d[n[r]]="string"===t[n[r]]?"":"function"===t[n[r]]?null:{};for(var i in e)if(-1!==n.indexOf(i))if(t[i])d[i]=e[i];else for(var o in e[i])d[i][o]=e[i][o];return d}function c(e){var t=d.lookaheadMap[e],n=d.options.minifyPrefix;if(t&&-1===(d.paths[e]||"").indexOf(n)){d(t);for(var r=0,o=t.length;r<o;r++)i[t[r]]||c(t[r])}}function u(e){for(var t=e.deps,n=!0,r=t.length;r--;)i[t[r]]&&void 0===i[t[r]].done&&(n=!1);n&&p(e)}function p(e){var t=e.parents||[];e.factory&&!e.isFile?(e.done=e.factory.apply(null,e.deps.map(function(e){return i[e].done})),delete e.factory):void 0===e.done&&delete i[e.name];for(var n=t.length;n--;)i[t[n]]&&u(i[t[n]])}function f(t,n){var r,s=e.document.createElement("script");return s.type="text/javascript",s.async=s.defer=!n,s.charset="utf-8",s.onload=s.onreadystatechange=(r=t,function(e){var t=e.currentTarget||e.srcElement;"load"!==e.type&&"complete"!==t.readyState||(s.onload=s.onreadystatechange=null,function(e){var e=i[e.name];if(0===o.name.indexOf("_module_")){e.done=o.done,e.factory=o.factory,e.deps=o.deps;for(var t=e.deps.length,n={};t--;)(n=i[e.deps[t]].parents)[n.indexOf(o.name)]=e.name;delete i[o.name]}u(e)}(r))}),s.src=t.path,s}function d(e,t,n){e.constructor===Array?h(s(),e,t,n):h(s(),[],e,t)}function h(e,t,n,l){var h={};if("string"!=typeof e)return d(e,t,n);e=e||s(),h=i[e],function(e,t,n){for(var o=t.length,s={},l="";o--;)l=t[o],i[l]?i[l].parents.push(e):(s=i[l]={name:l,isInline:"%"===l.charAt(0),isFile:"!"===l.charAt(0),path:a(l),parents:[e]}).isFile?d.getFile(s,p):s.isInline||(r.appendChild(f(s,n)),c(l));r.childNodes.length&&document.head.appendChild(r)}(e,t,l),h?(h.deps=t,h.factory=n,h.isInline&&p(h)):u(h=i[e]={name:e,deps:t,factory:n,parents:[]}),o=h}e.define&&e.define.amd||(h.amd={},d.config=l,d.getFile=function(e,t){return e},e.define=h,e.require=d,l({}))}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,t){"use strict";var n=document.createElement("a"),r={undefined:t,null:null,NaN:NaN,true:!0,false:!1},i={convertToType:function(e){return r.hasOwnProperty(e)?r[e]:e.toString&&+e.toString()===e?+e:e},closest:function(e,t,n){if(e.closest)i.closest=function(e,t){return e.closest(t)};else{var r=e.msMatchesSelector||e.webkitMatchesSelector||e.matches;i.closest=function(e,t){if(!(n||document.documentElement).contains(e))return null;do{if(r.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}}return i.closest(e,t,n)},$create:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return(t||document).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArray:Array.isArray||function(e){return e&&e.constructor===Array},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&i.removeClass(e,n),t&&i.addClass(t,r||n)},addEvents:function(e,t,n,r){for(var o=[],s=e.length;s--;)o.push(i.addEvent(e[s],t,n,r));return o},removeEvents:function(e){for(var t=e.length;t--;)e[t]()},addEvent:function(e,n,r,i){return i=i!==t?i:!!/(?:focus|blur|mouseenter|mouseleave)/.test(n),e.addEventListener(n,r,i),function(){e.removeEventListener(n,r,i)}},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){i.lazy(function(){i.storageHelper.save(e,t)},n||i.storageHelper)},save:function(e,t){if(null===e)return localStorage.removeItem(t);localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:i>o?-1:0:i<o?-1:i>o?1:0},normalizePath:function(e){return n.href=e,(-1!==e.indexOf(n.host)?n.origin:"")+n.pathname+n.search},ajax:function(e,n){var r,o,a=null,l=(new Date).getTime();return n=n||{},e=i.normalizePath(e),o=s[e]&&s[e].time||0,a=(a=(r=!0===n.cache?l+1e8:n.cache?o>l?o:l+n.cache:0)&&!n.resetCache&&o>l?s[e]:null)||new i.Promise(function(r,i){var o,s,a=new XMLHttpRequest,l=(n.method||n.type||"GET").toUpperCase();if(a||i("Giving up :( Cannot create an XMLHTTP instance"),n||(e=(n=e).url),a.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||e.status>299))return e["xml"===t?"responseXML":"raw"===t?"response":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,n.dataType,i);if(e!==t){if("json"===n.dataType)try{e=JSON.parse(e)}catch(e){return void i("Caught Exception: "+e.stack)}r(e)}},a.open(l,e,n.async||!0,n.username,n.password),"raw"===n.dataType&&(a.responseType="blob"),"xml"===n.dataType&&a.setRequestHeader("Content-Type","text/xml"),"json"===n.dataType&&a.setRequestHeader("Content-Type","application/json"),"GET"!==l&&n.csrf&&a.setRequestHeader("X-XSRF-TOKEN",(o=n.csrf,(s=document.cookie.split(o+"=")[1])&&s.split(";")[0])),n.headers)for(var c in n.headers)a.setRequestHeader(c,n.headers[c]);return a.send(n.data),function(){a.abort()}}),r?(s[e]=a,s[e].time=r):delete s[e],a},errorHandler:function(e){console.error(e)},Promise:a};function o(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n}e.Event=e.Event||o,e.CustomEvent=e.CustomEvent||o;var s={};function a(e,n){this._state=0,this._handled=!1,this._value=t,this._deferreds=[],this._returnFn=f(e,this),this._staticData=n}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,setTimeout(function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){try{n=r(e._value)}catch(e){return void u(t.promise,e)}c(t.promise,n)}else(1===e._state?c:u)(t.promise,e._value)})):e._deferreds.push(t)}function c(e,t){try{if(t){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return f(n.bind(t),e)}e._state=1,e._value=t,p(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function f(e,t){var n=!1,r=function(e){n||(n=!0,u(t,e))};try{return e(function(e){n||(n=!0,c(t,e))},r)}catch(e){r(e)}}return a._cache={},a.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},a.prototype.then=function(e,t){var n=this._returnFn,r=new a(function(){return n});return l(this,{onFulfilled:e||null,onRejected:t||null,promise:r}),r},a.prototype.cancel=function(e){var t=a._cache[e];return a._cache[e]=this,t?(1!==t._state&&(t._returnFn&&"function"==typeof t._returnFn&&t._returnFn(),t._deferreds=[],t.then=t.catch=function(){},t._handled=!0,t._state=1),t._returnFn=null,this):this},a.all=function(e){var t=[];return e.reduce(function(e,n){return e.then(function(){return n}).then(function(e){return t.push(e)})},new a(function(e,t){e(null)})).then(function(){return t})},e.require&&(require.getFile=function(e,t){var n=e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase(),r=/^(?:json|xml)$/.test(n)?n:"";i.ajax(e.path,{cache:"!!"!==e.name.substr(0,2),dataType:r}).then(function(n){e.done=n,t(e)})}),i}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this&&this.window||global,function(e,t){"use strict";var n=Object.keys||function(e){var t=function(e,t,n){e.hasOwnProperty(t)&&n.push(t)},n=[];for(var r in e)t(e,r,n);return n},r=function(e,t){var n=function(e,t,n){t[n]=e[n]};for(var r in e)n(e,t,r);return t},i=function(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t},o=function(e,t){this.version="1.5.0",this.partials={},this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},helpers:{},partials:{},self:"self",nameCharacters:"",escapeHTML:!0,renderHook:null},s(this,t||{},e)},s=function(e,t,r){for(var i in t)e.options[i]=t[i];for(var o in a(e,(t=e.options).tags),e.entityRegExp=new RegExp("["+n(t.entityMap).join("")+"]","g"),e.helpers=t.helpers,t.partials)e.registerPartial(o,t.partials[o]);r&&e.parse(r)};return o.prototype={render:function(e,t){return this.partials[this.options.self](function(e,t){return{extra:t,scopes:[{scope:e,helpers:{},level:{"@root":e},path:[]}]}}(e,t||{}))},parse:function(e){return this.registerPartial(this.options.self,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,n){return this.partials[e]=this.partials[e]||(n.constructor===Function?n:function e(n,r,i){var o=function(r,o,s,a,l,c,u,p,f){return"#*"===s?n.registerPartial(l.replace(/['"]/g,""),e(n,u,i))&&"":function(e,n,r,i,o,s,a,l,c){var u=o.split(l),p=S(e,l,c,a||"",r,null),f=function(e,n,r,i,o,s){for(var a=0,l=n.length,c=!1,u=[];a<l;a+=4)c=u[1]!==t?u[1]:o[0],u=n[1+a]?E(n[1+a],n[3+a]):[o[1]],s.push(S(e,n[2+a-4]||"","","",0!==a?n[1+a-4]||"":i,j(e,_(n[a],c,u[0]),r,[],[])));return s}(e,s.split(e.elseSplitter),n,r,E(i,u[0]),[]);return n.push(function(t){return N(e,p,t,f)}),r+"-block- "+(n.length-1)+u[1]}(n,i,o,c,f,u,s,a,l)};for(;r!==(r=r.replace(n.sectionRegExp,o)););return j(n,r,i,[],[])}(this,n,[]))},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){a(this,e)}},o;function a(e,t){var n="{{"===t[0]?["({{2,3}~*)","(~*}{2,3})"]:t,r=e.options.nameCharacters+"!-;=?@[-`|",i=(n[0]+"\\/\\3"+n[1]).replace(/[()]/g,"");e.inlineRegExp=new RegExp(n[0]+"([>!&=])*\\s*([\\w\\"+r+"<>|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp(n[0]+"([#^][*%]*)\\s*([\\w"+r+"~]*)(?:\\s+([\\w$\\s|.\\/"+r+"]*))*"+n[1]+"(?:\\n*)((?:(?!"+n[0]+"[#])[\\S\\s])*?)("+i+")","g"),e.elseSplitter=new RegExp(n[0]+"(?:else|\\^)\\s*(.*?)"+n[1])}function l(e,t,n){return n&&t.options.escapeHTML?String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]}):e}function c(e,t,n,r,i){return{"@index":e,"@last":e===n-1,"@first":0===e,"@length":n,"@parent":i,"@key":t,this:r,".":r}}function u(e,t,n,r,o,s,a){return s?t.splice(t.length-2,2,a,""):t.push(a,""),n={scope:n,helpers:r,level:o,path:t},s?(e[0]=n,e):i(e,[n])}function p(e,t,n){for(var r=0,i=t.path.length;r<i;r++)if(!(e=e[t.path[r]]))return;return n?e:e[t.value]}function f(e,n,r){var i=r.root,o=i.variable,s=n.scopes&&n.scopes[o.parentDepth]||{},a=s.scope||{},l=o.value,c=!i.isStrict&&!i.isString&&e.helpers[l]||null,u=r.isPartial&&e.partials[l]||null,f="",h=o.root?function(e,t,n){var r=n.variable.root;return d(e,{key:r,value:e.helpers[r],type:"helper"},t,{vars:n.variable.vars},null)}(e,n,i):i.isString&&o.name||o.isLiteral?l:(f=p(s.level||{},o))!==t?f:(f=p(s.helpers||{},o))!==t?f:(f=p(a,o))!==t?f:c||u||(a[l]!==t?a[l]:i.isString?l:p(n.extra,o)),v=h===t||null===h?"":c?"helper":u?"partial":h.constructor===Array?"array":typeof h,m=n.scopes[0].path;return m.splice(m.length-1,1,function(e,t){var n=e.length?e.length>1?e.join("."):e[0]:"";return n?n+"."+t:t}(o.path,c||u?r.vars[0]&&r.vars[0].variable.value:o.value)),o._path=m.join("."),{value:h,type:v}}function d(e,t,n,r,i){return"helper"===t.type||"function"===t.type?m(e,t,n,r,[{bodyFn:i}]):t.value}function h(e,t,n,r,i,o,s){for(var a=r.length,l={},c="",u=null,p="";a--;)c=(u=(p=(l=r[a]).variable).root?d(e,t,n,p,null):null)||!p.name?"$"+a:p.name,p.name&&(s[c]=i[c]),i[c]=u||f(e,n,{root:l}).value,o.push(i[c]),l.isAlias&&(n.scopes[0].level[c]=i[c]);return{obj:i,arr:o,restore:s}}function v(e,n,r,i,o){return e.root.isAlias&&(r[n.name||n.value]=o,i!==t&&(r[e.root.aliasKey||"@key"]=i)),r}function m(e,t,n,r,i){return r.isHelper=!0,t.value.apply({name:r.root?r.root.variable.value:"",scope:n.scopes[0].scope,rootScope:n.scopes[n.scopes.length-1].scope,getBody:function(){return i[0]?i[0].bodyFn(n):""},getData:function(t){return f(e,n,{root:O(t)}).value},escape:function(t){return l(t,e,!0)}},h(e,t,n,r.vars,{},[],{}).arr)}function g(e,t,n,r,i,o){for(var s=0,a=i[s],l=!r.helper||"if"===r.helper,c=!1,u=d(e,t,n,r,a.bodyFn);!(c=l&&!!u||!l&&!u)&&i[s+1];)l=!(a=i[++s]).helper||"if"===a.helper,u=d(e,t=a.root?f(e,n,a):{value:l},n,a,a.bodyFn);return o.fnIdx=s,c?a.bodyFn(n):""}function b(e,t,r,i,o){for(var s="",a="array"===t.type,l=a?t.value||[]:n(t.value||{}),p=0,f=l.length,d="";p<f;p++)d=a?p:l[p],r.scopes=u(r.scopes,r.scopes[0].path,t.value[d],c(p,d,f,a?l[p]:t.value[d],t.value),v(i,i.root.variable,{},d,t.value[d]),!!p,p),s+=o[0].bodyFn(r);return l.length&&(r.scopes.shift(),r.scopes[0].path.splice(r.scopes[0].path.length-3,3)),s}function y(e,n,i,o,s){var a=o.root.variable,l=i.scopes[0],c=a.value,f=r({".":n.value,this:n.value},l.level);return i.scopes=u(i.scopes,i.scopes[0].path,n.value,{"@parent":p(i.scopes[a.parentDepth],a,!0)},v(o,a,f,t,n.value),!1,c),[s[0].bodyFn(i),i.scopes.shift(),i.scopes[0].path.splice(i.scopes[0].path.length-2,2)][0]}function x(e,t,n,r,i,o,s,a){return e.options.renderHook?e.options.renderHook.call(e,i,n,t,r,a,n.root.variable._path,n.root?n.root.variable.value:"",t.scopes[0]&&p(t.scopes[0].scope,n.root.variable,!0)||{},function(r){return o(e,n,t,s||r&&{value:r}||f(e,t,n),a)}):i}function C(e,n,i,o){return o.value===t?"":n.isPartial?function(e,t,n,i){var o=n.scopes[0].helpers,s=h(e,t,n,i.vars,o,[],{});return[t.value(n),r(s.restore,o)][0]}(e,o,i,n):l("helper"===o.type||"function"===o.type?m(e,o,i,n,[]):o.value,e,"boolean"!==o.type&&"number"!==o.type&&n.isEscaped)}function N(e,n,r,i,o){var s=f(e,r,n),a=n.helper,l="if"===a||"unless"===a,c=o||{fnIdx:0},u=("helper"===s.type||"function"===s.type&&!a?m:l||s.value===t?g:"with"===a||!a&&"array"!==s.type?y:b)(e,s,r,n,i,c);return o?u:x(e,r,n,!0,u,N,i,c)}function _(e,t,n){var r=t||n?t?n?"^\\s*|\\s*$":"^\\s*":"\\s*$":"";return r?e.replace(new RegExp(r,"g"),""):e}function E(e,t){return[-1!==e.indexOf("~"),-1!==t.indexOf("~")]}function w(e,t){return'"'===e.charAt(0)||"'"===e.charAt(0)?(t.isString=!0,e.substr(1,e.length-2)):(/\.|\|/.test(e)&&(t.isStrict=!0),"true"===e||"false"!==e&&(isNaN(e)||""===e?e:+e))}function P(e){return e.lastIndexOf("%")+1}function T(e,t){return e?(e.replace(/\(.*?\)|(?:("|'|\|).*?\1)|\S+/g,function(e){e&&t.push(e)}),t):t}function A(e,t,n){var r="string"==typeof e,i=r&&!("."===e)&&!n,o=i?e.split("../"):[],s=i?o.pop().split(/[.\/]/):[e];return"@"===o[0]&&(s[o.length-1]=o[0]+s[o.length-1]),r?{name:t,value:s.pop(),path:s,parentDepth:o.length,_path:""}:{name:t,value:e,isLiteral:!0,path:[]}}function O(e){var t,n,r=[],i={variable:{},isAlias:!1,aliasKey:"",isString:!1,isStrict:!1,active:0};return"("===(e=(t=e,n=i,t.replace(/^(?:this[/.]|\.\/)/,function(e){return e&&(n.isStrict=!0),""}).replace(/[[\]]/g,"")).substr(i.active=P(e))).charAt(0)?{variable:{root:(r=T(e=e.substr(1,e.length-2),[])).shift(),vars:R(r,[],{}),path:[]}}:(r=e.split("="),i.variable=r[1]?A(w(r[1],i),r[0],i.isString):A(w(r[0],i),"",i.isString),i)}function k(e,t){var n=t.replace(/\s*\|\s*/g,"").split(/\s+/);e.variable.name=n[0],e.aliasKey=n[1]||"",e.isAlias=!0}function R(e,t,n){for(var r=0,i=e.length,o=n||{};r<i;r++)"as"!==e[r]?(o=O(e[r]),t.push(o)):k(o,e[++r]);return t}function S(e,t,n,r,i,o){var s=T(t+(n?" "+n:""),[]),a=s.shift()||"",l=/^(?:if|each|with|unless)$/.test(a)?a:"",c=P(a=l?s.shift()||"":a);return o&&!a?{bodyFn:o}:{root:a=O(a.substr(c)),isPartial:">"===r,isHelper:!1,isEscaped:i.lastIndexOf(e.options.tags[0])<1,helper:"^"===r?"unless":l,vars:R(s,[],a),active:c,bodyFn:o||null}}function j(e,t,n,r,i){for(var o=t.split(e.inlineRegExp),s=0,a=o.length,l="",c=[];s<a;s+=5)o[2+s]&&/^(?:!|=)/.test(o[2+s])||(l=o[3+s]||"",c=E(s?o[4+s-5]:"",l?o[1+s]:""),i.push(_(o[s],c[0],c[1])),l&&r.push(-1!==l.indexOf("-block-")?{blockIndex:+l.substr(8)}:S(e,l,"",o[2+s]||"",o[1+s],null)));return function(t){return function(e,t,n,r,i){for(var o=0,s=n.length,a="";o<s;o++)a+=n[o],t[o]&&(a+=t[o].blockIndex>-1?r[t[o].blockIndex](i):x(e,i,t[o],!1,C(e,t[o],i,f(e,i,t[o])),C,null));return a}(e,r,i,n,t)}}}),function(e,t){"object"==typeof exports?module.exports=t(e,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(n){return t(e,n)}):e.Blick=t(e,e.Schnauzer)}(this,function(e,t,n){"use strict";var r=function(e,t){for(var n in t)t[n]=document.createElement(t[n]);return function(n,r,i){var o=((n||"").match(e)||[])[1],s=t[o]||t.default;return r&&(s=s.cloneNode()),i?s.textContent=n||"":s.insertAdjacentHTML("afterbegin",n||""),s}}(/<\s*(\w*)[\s\S]*?>/,{option:"select",legend:"fieldset",area:"map",param:"object",thead:"table",tr:"tbody",col:"colgroup",td:"tr",default:"div"}),i=function(e,t){this.version="0.1.0",this.options={registerProperty:function(e,t,n,r,i){},forceUpdate:!1,attributes:{value:a,disabled:s,hidden:s,checked:s,autocomplete:s,contenteditable:s,readonly:s,required:s,selected:s},renderHook:u,isDynamic:function(e,t){return!0}},this.collector={},this.schnauzer={},this.dataDump=[],o(this,t||{},e)},o=function(e,n,r){for(var i in n)if("attributes"===i)for(var o in n[i])e.options[i][o]=n[i][o];else e.options[i]=n[i];e.schnauzer=new t(r,e.options),e.schnauzer.dataDump=[]};return i.prototype={renderHTML:function(e,t){return p(this,this.schnauzer.dataDump,r(this.schnauzer.render(e,t)))}},i;function s(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,"selected"===t?t:""),setTimeout(function(){e[t]=!0})):(e.removeAttribute(t),setTimeout(function(){e[t]=!1}),"focus"===n&&e.focus())}function a(e,t,n){e.setAttribute("value",n),e.value=n}function l(e,t){for(var n=e.parentNode.childNodes,r=n.length,i={},o=0,s=null;r--;)if(3===(i=n[r]).nodeType&&-1!==(o=i.textContent.indexOf(t))){s=i.splitText(o+t.length),i.textContent=i.textContent.substring(0,i.textContent.length-t.length);break}return s}function c(e,t){return(e=e.splitText(e.textContent.indexOf(t)).splitText(0)).textContent=e.textContent.substring(t.length),e}function u(e,t,n,r,i,o,s,a,l){var c=this.dataDump.length,u=t.isHelper||t.isPartial,p=u&&t.vars[0]&&(t.vars[0].root=t.vars[0])||t,f=u?p.root.variable.value:s,d=!!p.active||this.options.forceUpdate,h=!!s&&d&&!!this.options.isDynamic(a,f),v=t.helper,m=n.scopes,g="{{#"+c+"}}",b="{{/"+c+"}}",y="";return!h&&p.active<3?e:(y=p.root.variable.path.join("."),y+=(y?".":"")+p.root.variable.value,this.dataDump.push({isBlock:r,track:i,bodyFn:l,active:p.active,isEscaped:p.isEscaped,start$:g,end$:b,path:o,noCache:(/^[ew]/.test(v)||t.isPartial)&&p.active>0||p.active>2,root:m[m.length-1].scope,helper:v,scope:m[0].scope||{},parent:a,key:y,out:e,helperFn:u?l:null,isOdd:u}),g+e+b)}function p(e,t,n,r){for(var i,o,s,a=null,l=null,c=t.length,u={};c--;)u=t.pop(),i=n,o=u.start$,void 0,s=XPathResult.FIRST_ORDERED_NODE_TYPE,(l=(a=document.evaluate('//text()[contains(., "'+o+'")]',i,null,s,null).singleNodeValue||document.evaluate('//@*[contains(., "'+o+'")]',i,null,s,null).singleNodeValue)?a.ownerElement?f:u.isBlock?h:d:null)&&l(e,a,u.start$,u.end$,u,t,r);return n}function f(e,t,n,i,o,s){var a=/>/g,l=t.ownerElement,c=e.options.attributes[t.nodeName],u=function(e){var n=e.parentNode;if(11!==n.nodeType)return c?c(l,t.nodeName,n.textContent):void(t.textContent=n.textContent.replace(a,""))},p=t._cache=t._cache||r(t.textContent.replace(a,""),!0,!0),f=[].slice.call(p.childNodes).filter(function(e){return-1!==e.textContent.indexOf(n)})[0];u(o.isBlock?h(e,f,n,i,o,s,u):d(e,f,n,i,o,s,u))}function d(e,t,n,i,o,s,a){return t=c(t,n),e.options.registerProperty(function(e,t,n,i,o,s){var a=i?null:document.createDocumentFragment(),l=[];return function(c){var u=[],p=s?s():c;if(o||i)return e.textContent=p,o&&o(e),[];for(l=[],u=r(p+"").childNodes;n.previousSibling!==t;)n.parentNode.removeChild(n.previousSibling);for(;u.length;)l.push(a.appendChild(u[0]));return n.parentNode.insertBefore(a,n),l}}(t,t.previousSibling,l(t,i),o.isEscaped,a,o.helperFn),o.key,o.path||o.key,o.parent,o.scope,o.root,o.active,e.collector),t}function h(e,t,n,i,o,s,a){return-1!==t.textContent.indexOf(i)&&t.splitText(t.textContent.indexOf(n)+n.length),t=c(t,n),e.options.registerProperty(function(e,t,n,i,o,s,a,l,c){var u=[],f=o.fnIdx,d=[];return d[f]=document.createDocumentFragment(),u[f]=!c&&s.length>0,function(s){var h=[],v=i(s),m={},g=t,b=f;for(f=o.fnIdx;(g=t.nextSibling)&&g!==n;)c?g.parentNode.removeChild(g):d[b].appendChild(g);if(!u[f]||c){for(d[f]=d[f]||document.createDocumentFragment(),m=p(e,a,r(v),l);g=m.childNodes[0];)h.push(d[f].appendChild(g));u[f]=!!h.length}return v&&n.parentNode.insertBefore(d[f],n),l&&l(t),a.length&&a.splice(0,a.length),h}}(e,t,l(t,i),o.bodyFn,o.track,o.out,s,a,o.noCache),o.key,o.path||o.key,o.parent,o.scope,o.root,o.active,e.collector),t}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(e,t){"use strict";var n=/\.|\//,r=[],i=0,o=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],forceEnhance:!1,childNodes:"childNodes",throwErrors:!1},this.model=e||[],s(this,t||{},this.model)},s=function(e,t,i){var o,s={},a=e.options;for(var l in r.push({}),d(e,"id",r.length-1),t)a[o=l]=t[o];a.listeners=[];for(var c=(t.listeners||[]).length;c--;)t.listeners[c]&&(a.listeners[c]=t.listeners[c].split(n));i.constructor!==Array&&(e.model=i=[i],e.standalone=!0),s[a.childNodes]=i,e.standalone||d(i,"root",s),h(e,i)};return o.prototype={getElementById:function(e){return r[this.id][e]},getElementsByProperty:function(e,n){var i=[],o="function"==typeof n,s=t!==n,l=t!==e,c=[],u=r[this.id];for(var p in u)a(u,p,e,n,i,o,s,l,c);return i},appendChild:function(e,t){return p(this,e,t=t||this.model.root,u(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return p(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return p(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return p(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&f(this,t),p(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return f(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,r){return g(this,e.split(n)[0],{current:t,root:t},e,r)},reinforceProperty:d,getProperty:function(e,t){return l(t,e.split(n))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return c(this,this.model)}},o.getElementById=function(e){var t=e.split(":");return r[t[0]]&&r[t[0]][t[1]]},o;function a(e,r,i,o,s,a,c,u,p){var f=t!==e[r][i]?e[r][i]:l(e[r],p[0]?p:p=u&&i.split(n));(c&&f===o||a&&o(f,e[r])||!c&&t!==f||!c&&!u)&&s.push(e[r])}function l(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function c(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&c(e,t[n][e.options.childNodes]),delete r[e.id][t[n][e.options.idProperty]];return t}function u(e,t){return e[t]=e[t]||[],e[t]}function p(e,t,n,r,i,o){var s=e.options,a=t.parentNode;return t.parentNode?s.parentCheck&&function(e,t,n){var r=t;e===t&&b("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&b("ERROR: can't move parent inside it's own child",n)}(t,n,s):(t.__index=r,h(e,[t],n,i,o)),e.type=i,e.sibling=o,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&f(e,t,!0)||t,u(n,s.childNodes).splice(r||0,0,t),t.parentNode=n,s.moveCallback.call(e,t,i,o,a),t}function f(e,t,n){return!n&&c(e,[t]),u(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function d(e,n,r,i,o){return delete e[n],Object.defineProperty(e,n,{enumerable:!!o,configurable:!1,writable:i===t||!!i,value:r})}function h(e,t,n,o,s){for(var a=e.options,l=!1,c=!0,u=a.idProperty,p={},f=0,m=t.length;f<m;f++)(p=t[f])[u]||e.standalone||(p[u]=i++,c=!1),!e.standalone&&(r[e.id][p[u]]=p),l=!p.parentNode,e.standalone||(p.parentNode=n||e.model.root,p.index=p.index||0),l&&(e.standalone||(d(p,u,p[u],c),g(e,"index",{current:p},null,!0),g(e,"parentNode",{current:p},null,!0)),a.interseptor&&a.interseptor(e,p),v(e,p,e.options.listeners)),a.preRecursionCallback.call(e,p,o,s),p[a.childNodes]&&h(e,p[a.childNodes],p),a.enrichModelCallback.call(e,p,o,s),delete p.__index;return t}function v(e,t,n){for(var r=n.length;r--;)m(e,t,t,n[r],[])}function m(e,n,r,i,o,s,a,l){for(var c="",u=r,p=s||0,f=i.length;p<f;p++){if("childNodes"===(c=i[p]))return;if("*"===c){for(var d in u)m(e,n,u[d],i,o.concat(d),p+1,d,u);return}o.push(c),p<f-1&&(u=u[c]),l=a=null}(u!==t&&null!==u||l)&&(l||u).hasOwnProperty(a||c)&&g(e,a||c||"",{current:l||u,root:n},o.join("."))}function g(e,n,r,i,o){var s={};if(e.options.forceEnhance||r.current.hasOwnProperty(n))return s[n]=r.current[n],function(e,n,r,i,o,s){return Object.defineProperty(r.current,n,{get:function(){return"index"===n?function(e,n){return n.__index!==t?n.__index:(n.parentNode?u(n.parentNode,e.options.childNodes):e.model).indexOf(n)}(e,r.current):i[n]},set:function(t){!function(e,t,n,r,i,o){(e===o.options.idProperty||"index"===e||o.options.subscribe.call(o,o.type||e,t.root||t.current,r,n,o.sibling))&&(i[e]=n,b('ERROR: Cannot set property "'+e+'" to "'+r+'"',o.options));o.type=null,o.sibling=null}(s||n,r,i[n],i[n]=t,i,e)},enumerable:o})}(e,n,r,s,!o,i)}function b(n,r){if(!r.throwErrors&&e!==t&&e.console)return console.warn?console.warn(n):console.log(n);throw n}}),define("api",["VOM","blick","toolbox"],function(e,t,n){return function(r,i){var o={},s={},a={},l=n.Promise;function c(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r]&&t[r].call(e,n)}function u(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function p(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function f(e,t,r){if(r.transition)return r.transition(function(){t.children[0]&&t.removeChild(t.children[0])},function(){t.appendChild(e)});t.children[0]?(t.children[0]._scroll=r.scroll&&(n.$(r.scroll,r.container)||{}).scrollTop,t.replaceChild(e,t.children[0]),e._scroll&&r.scroll&&((n.$(r.scroll,e)||{}).scrollTop=e._scroll||0)):(t.appendChild(e),e._scroll&&r.scroll&&((n.$(r.scroll,r.container)||{}).scrollTop=e._scroll||0))}for(var d in a.model=function(t,n){return new e(t,n)},a.sendToComponent=function(e,t){var n=this.getComponent(e);if(n&&n.onSend)return n.onSend(t)},a.triggerEvent=function(e,t,n){var r,i=n||{};i.detail=t,r=new CustomEvent(e,i),(i.element||window).dispatchEvent(r,t)},a.installEvent=function(e,t,r,i){return n.addEvent(e||window,t,r,i)},a.subscribeToComponent=function(e,t,n,r){var i=this,o=this.getComponent(e),s=o&&o["__cr-id"];return o&&t?(this.subscribe(this.id,s,t,n,r),function(){i.unsubscribe(i.id,s,t,n)}):function(){}},a.destroyComponents=function(e){var t=this;e.forEach(function(e){t.destroyComponent(e)})},a.subscribe=function(e,t,n,r,i){var s=this,a=t;if(e=e?e.name||e.components&&e.components[t]||e:this.name,o[e]=o[e]||{},(t=o[e][t]=o[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),function(){s.unsubscribe(e,a,n,r)};delete o[e]},a.publish=function(e,t,n,r){return e="string"==typeof e?e:this.name,o[e]=o[e]||{},o[e]&&((t=o[e][t]=o[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&c(this,t[n],r)),r},a.unsubscribe=function(e,t,n,r){var i=-1,s={};return e="string"==typeof e?e:e.name||this.name,o[e]&&o[e][t]&&o[e][t][n]&&-1!==(i=(s=o[e][t][n]).indexOf(r.callback||r))&&s.splice(i,1),r.callback||r},a.addRoute=function(e,t,r){var i,s,a=this,l="object"==typeof e.path?{regexp:e.path}:(i=e.path,s=[],i=i.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return s.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+i+"(?:\\?([\\s\\S]*))?$"),names:s}),f=r||this.options.hash,d=p(l,u(f)),h=o[this.name]&&o[this.name].__router,v={};return this.subscribe(null,"__router",e.path,{callback:e.callback,names:l.names,regexp:l.regexp||l},t),t&&d&&e.callback.call(this,d),v=!h&&function(e,t,r){var i=void 0!==window.onpopstate?"popstate":"hashchange";return n.addEvent(window,i,function(n){var i={};for(var o in e)(i=p(e[o],u(r)))&&c(t,e[o],i)},t.id)}(o[this.name].__router,this,f),function(){a.removedRoute(e),!h&&v()}},a.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},a.toggleRoute=function(e,t){var n=o[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},a.template=function(e,n){(n=n||{}).helpers=n.helpers||this.options.helpers;var r=new t(e,n);if(n.share)for(var i in r.schnauzer.partials)this.options.partials[i]||"self"===i||(this.options.partials[i]=r.schnauzer.partials[i]);return r},a.renderModule=function(e){var t=e.require&&e.container,r=t&&"string"==typeof e.container?n.$(e.container):e.container,i=s[(e.context||"")+e.require],o=this;return t?i?new n.Promise(function(t){f(i.element,r,e),i.instance&&i.instance.onLoad&&i.instance.onLoad(i.element,o,e.parent),i.instance&&i.instance.onRender&&i.instance.onRender(e.data),t(i)}):new n.Promise(function(t){require([e.path||e.require],function(n){var i=document.createElement(n.selector),a=i.setAttribute.bind(i);e.input&&a("cr-input",e.input),e.event&&a("cr-event",e.event),e.name&&a("cr-name",e.name);var l=!n.instance&&n.init(i,null,e.this),c=n.instance||l;f(i,r,e),c&&c.onLoad&&c.onLoad(i,o,e.parent),c&&c.onRender&&c.onRender(e.data),t(s[(e.context||"")+e.require]=n.instance?n:{element:i,instance:l})})}):(e.scroll&&r.children&&(r.children[0]._scroll=(n.$(e.scroll,r)||{}).scrollTop),new l(function(){}))},Object.defineProperties(i,{Toolbox:{value:n},instance:{value:new i}}),a)r[d]={value:a[d]};return r}}),define("controller",["toolbox","VOM"],function(e,t){"use strict";var n=e.keys;function r(e){for(var t in this.options={element:document.body},this.events={},e)this.options[t]=e[t]}return r.prototype={installEvent:function(r,o,s,a){var l=this.options.element,c=s.split("!"),u=c[2]||c[1]||c[0],p=!!c[2]||!c[1]&&!!/(?:focus|blur|mouseenter|mouseleave)/.test(u);this.events[u]||(this.events[u]=e.addEvent(o,u,function(o){!function(t,r,o,s,a){var l=e.closest(t.target,"[cr-event]"),c=l&&l.getAttribute("cr-id")||e.closest(t.target,"[cr-id]").getAttribute("cr-id"),u=a(c),p=u&&u.events&&n(u.events[t.type]),f=o&&n(o.events[t.type])||[],d=p&&p.length,h=d?u&&u.events:o&&o.events,v={_:!1};(d?p:o&&f||[]).forEach(function(e){i(r,h,u||o,e,t,v)}),l!==s&&d&&f.forEach(function(e){i(r,o.events,o,e,t,v)})}(o,r,a,l,t.getElementById)},p))},installEvents:function(e,t,r,i){var o=this;n(r).forEach(function(n){o.installEvent(e,t,n,i)})},removeEvent:function(e){this.events[e]&&(this.events[e](),delete this.events[e])},removeEvents:function(e){e.forEach(this.removeEvent.bind(this))},destroy:function(){this.removeEvents(n(this.events)),this.options.element=null}},r;function i(e,t,n,r,i,o){e[r]&&t[i.type][r].forEach(function(t){!o._&&t.contains(i.target)&&(o._=!1===e[r](i,t,n),o._&&i.stopPropagation())})}}),define("circular",["toolbox","blick","VOM","api","controller"],function(e,t,n,r,i){"use strict";var o=e.$,s=e.$$,a=e.$create,l=e.isArray,c=e.keys,u=0,p={},f={},d=a("div");function h(e,t){this.options={hash:"#",partials:{},helpers:{},decorators:{}},function(e,t,n){var r="string"==typeof t;r||(n=t||{});for(var i in n)e.options[i]=n[i];e.version="1.3.2",e.id="cr_"+u++,e.name=r?t:e.id,f[e.id]={}}(this,e,t||{})}return Object.defineProperties(h.prototype,r({getComponent:{value:function(e){var t=f[this.id][e];return t&&t.instance}},destroyComponent:{value:function(e){var t=e["__cr-id"].split(":"),n=f[t[0]][t[1]],r=n&&n.instance||e;if(n){for(var i in r.onDestroy&&r.onDestroy(),r)r[i]&&r.hasOwnProperty(i)&&l(r[i])&&(r[i]=[]);for(var i in n.controller.removeEvents(c(n.controller.events)),n.models.forEach(function(e){e.destroy()}),n.subscribers.forEach(function(e){e()}),n)n[i]=null;delete f[t[0]][t[1]]}}},destroy:{value:function(){var e=f[this.id];this.destroyComponents(c(e).map(function(t){return e[t].instance}))}},getAttributeData:{value:j}},h)),Object.defineProperties(h,{Module:{value:function(e,t){var n=o(e.selector,e.context),r=h.Component(e,t);return{component:r,instance:r.init(n,null,function(e){var t=e.closest('[cr-id|="cr_"]'),n=t&&t.getAttribute("cr-id").substring(3).split(":"),r=n&&f["cr_"+n[0]][n[1]];return r&&r.instance||r}(n)),element:n}}},Component:{value:function(t,r){return t.plugins={},t.components={},p[t.selector]||(p[t.selector]={Klass:r,selector:t.selector,subscribe$:t.subscribe$,templates:t.template&&function(e,t){e.insertAdjacentHTML("beforeend",t.template||"");var n="",r={},i=[];s("[cr-for]",e).forEach(function(e,n){var s=o("[cr-child]",e),a=e.getAttribute("cr-for"),l=a+n,c=/{{>/.test(t.template);i.push(r[a]={hasPartial:c,container:l,child:s?S(s,t,"child",a):null,template:S(function(e,t){return e.parentNode.setAttribute("cr-parent-container",t),e}(e,l),t,"loop",a)})}),n=e.firstElementChild?e.firstElementChild.innerHTML:"",r.this={template:S(e.firstElementChild,t,"main","this")};var a=n&&r.this.template.schnauzer.partials,l=[];if(a&&i.length&&c(a).length>1){n.replace(/{{#\*inline\s*["'](.*?)["']}}([\S\s]*){{\/inline}}/,function(e,t,n){l.push({name:t,html:n})});for(var u=i.length;u--;)for(var p=l.length;p--;)i[u].template.schnauzer.registerPartial(l[p].name,l[p].html)}return r}(d,t),styles:function(e,t){if(!t.styles)return;var n=l(t.styles)?t.styles.join("\n"):t.styles,r=a("style");return r.setAttribute("name",e),r.innerHTML="\n"+n+"\n",document.head.appendChild(r),r}(t.selector,t),name:t.name||r.name,init:function(s,a,d){return function(t,r,s,a,d){var x=r.selector,C=p[x],N={},E="",w={},P={},A=r.circular||h.instance,O={},S=[],$=C.templates||{},D=t.getAttribute("cr-id"),F=t.getAttribute("cr-name");if(r.singleton){if(p[r.selector].singleton)return;p[r.selector].singleton=!0}if(D&&!a)return f[A.id+":"+D];["partials","helpers","decorators","attributes"].forEach(function(e){r[e]||(r[e]=A.options[e])}),N={"cr-id":!a&&(t.setAttribute("cr-id",A.id+":"+u),u)||u,elements:{element:t},events:{},parentNode:{},views:{}},E=N["cr-id"],P=f[A.id][E]={instance:{},controller:{},models:[],parent:"",subscribers:[]},F&&(f[A.id][F]=f[A.id][E]);w=P.instance=function(t,n,r,i,o,s,a,c){var u=l(c)?c[0]:c,p=c&&c[1],d=function(t,n){for(var r=t&&t.split(/\s*,\s*/)||[],i=[],o={vars:{},origin:{},names:{},static:{}},s=!1,a="",l="",c={},u=r.length;u--;)i=r[u].split(/\s+as\s+/),s="'"===i[0].charAt(0)||'"'===i[0].charAt(0),a=s?e.convertToType(i[0].replace(/'|"/g,"")):"",l=s?a:i[0],c="this"===l||"."===l?n:n&&n[l],o.vars[i[1]||l]=s?a:c,o.origin[l]=s?a:c,o.names[l]=i[1]||l,o.static[l]=s;return o}(o||n.getAttribute("cr-input"),a.parent=u)||{},h=u&&u["__cr-id"].split(":")[1];return n.removeAttribute("cr-input"),new t(n,r,function(e,t){for(var n in d.vars)v(n,d,e,u);if(!1!==t)for(var n in d.origin)m(n,d,e,!1,f,r,i,p,h);o&&u!==p&&function(e,t,n){var r=n.events||{};for(var i in r)g(i,r,t,e)}(u,e,s)},function(){return u||p})}(s,t,A,u++,a,r,P,d),Object.defineProperty(w,"__cr-id",{value:A.id+":"+E}),!a&&function(e,t,n,r){j(e,"cr-plugin",function(e,r,i){p[e]&&(p[e].init(i,r,t),delete n.plugins[e],i.removeAttribute("cr-plugin"))});for(var i=e.children.length,o="",s={};i--;)s=e.children[i],o=s.tagName.toLowerCase(),p[o]&&p[o].init(s,null,t)}(t,w,r),O=P.controller=new i({element:t}),S=c($).concat(c(r.subscribe$)),P.models=S.filter(function(e,t){return S.indexOf(e)===t}).sort(function(e){return"this"===e?-1:1}).map(function(e){var i=$[e];return e?function(e){var t=function(e){var t=e.instance,r=e.modelName,i=r+"$",o=r+"$$",s=r+"$PR",a=r+"$Intersept";return new n("this"===r?t:t[r]||[],{idProperty:"cr-id",moveCallback:t[r+"$Move"]||function(){},enrichModelCallback:t[r+"$Enrich"]||function(){},listeners:e.listeners,interseptor:t[a],preRecursionCallback:function(n,r,i){t[s]&&t[s](this,n),e.template&&_(this,{item:n,type:r,siblPar:i,data:e})},subscribe:function(r,s,a,l,c){var u="childNodes"===r||!!n.prototype[r];e.template&&function(e,t,r,i,o,s,a){var l=r.elements&&r.elements.element,c=r.parentNode&&r.parentNode.elements||null,u=c?c.container||c.element:a.templateContainer,p=r["__cr-id"]||r["cr-id"],f=!r.childNodes&&a.childTemplate||a.template||null,d=f?f.collector:{},h="childNodes"===t||!!n.prototype[t];"removeChild"===t?(l&&R(l,t,l.parentElement),function e(t,n,r,i){for(var o in t)T(o,t,n,i);if(r)for(var s=r.length,a={};s--;)a=r[s]["cr-id"]||r[s]["__cr-id"],e(t,a,r[s].childNodes,i)}(a.defData.components,p,r.childNodes,a.crInstance),function(e,t,n){var r=function(n){delete e[t][n]};if(e&&e[t]){for(var i in e[t])r(i);n||delete e[t]}}(d,p)):"sortChildren"===t?R(l,"appendChild",u):e[t]&&(r===s?_(e,{item:r,type:t,siblPar:s,data:a}):"replaceChild"!==t&&l&&h&&R(l,t,u,s.elements&&s.elements.element)),function(e,t,n,r,i,o,s){var a=n&&n[r]&&n[r][i];if(a)for(var l=a.length;l--;)k(a[l],e,t,o,s)}(a,r,d,p,t,i,o)}(this,r,s,a,l,c,e),t[i]&&!u&&t[i](r,s,a,l),t[o]&&t[o](r,s,a,l,u),u||(void 0===s.parentNode&&void 0===s.childNodes?e.crInstance.publish(e.crInstance.id,t["__cr-id"],r,a):s["cr-id"]&&e.crInstance.publish(e.crInstance.id,s["cr-id"],r,a))}})}(e);if("this"===e.modelName||!l(e.instance[e.modelName]))return t;for(var r in n.prototype)Object.defineProperty(t.model,r,{value:t[r].bind(t)});return Object.defineProperty(e.instance,e.modelName,{get:function(){return t.model},set:function(e){y(t,t.model,e,e.isDelta)}}),t}({instance:w,items:N,defData:r,template:!a&&i&&i.template,childTemplate:!a&&i&&i.child,templateContainer:!a&&"this"!==e&&i?function(e,t){var n=void 0!==t&&o('[cr-parent-container="'+t+'"]',e);return n&&n.removeAttribute("cr-parent-container"),n||e}(t,i.container):t,modelName:e,hasPartial:i&&i.hasPartial,listeners:r.subscribe$&&r.subscribe$[e],crInstance:A,controller:O}):null}),a||r.template||b(t,r,N,P);return t.removeAttribute("cr-cloak"),w.onInit&&w.onInit(t,A,N),w}("string"==typeof s?o(s):s,t,r,a,d)},preparePlugin:function(e,n,r){var i=n.plugins[t.selector]=n.plugins[t.selector]||{},o=i[r.where]=i[r.where]||{};(o[r.modelName]=o[r.modelName]||[]).push(r.value),function(e,t){var n=e.getAttribute("cr-event"),r=n?[n]:[];for(var i in t.events)r.push(i+": pl-"+t.events[i]);e.setAttribute("cr-event",r.join("; "))}(e,t)}})}},Plugin:{value:function(e,t){return h.Component(e,t)}}});function v(e,t,n,r){var i=t.vars[e];"null"!==e&&(n[e]="function"==typeof i?i.bind(r):i)}function m(e,t,n,r,i,o,s,a,l){!t.static[e]&&"null"!==e&&e&&((r="this"===e||"."===e)&&(n[t.names[e]]=a||t.origin[e]),i[o.id][s].subscribers.push(function(e,t){return o.subscribeToComponent(a&&r?a["cr-id"]:l,t,function(r){n[e[t]]=r},!0)}(t.names,e)))}function g(e,t,n,r){var i;r["pl-"+t[e]]||(i=t[e],Object.defineProperty(r,"pl-"+i,{value:function(e,t,r){return n[i](e,t,r)}}))}function b(e,t,n,r){var i=c(t.components).join(","),a=i?s(i,e):[],l=a.length?function(e,t){var n=[].slice.call(e).map(function(e,t){var n=document.createElement(e.tagName);return e.parentNode.replaceChild(n,e),n.setAttribute("cr-replace",t),{index:t,element:e}});return function(){!function e(t,n){for(var r=t.length,i=[];r--;){var s=o('[cr-replace="'+t[r].index+'"]',n);s?s.parentNode.replaceChild(t[r].element,s):i.push(t[r])}i.length&&e(i,n)}(n,t)}}(a,e):function(){};n.views=$(e,function(e){}),n.events=j(e,"cr-event",function(t){r.controller.installEvent(r.instance,e,t,n)}),l()}function y(e,t,n,r,i){for(var o=0,s=n.length;o<s;o++)t[o]?typeof t[o]==typeof n[o]&&N(e,t[o],n[o]):e.appendChild(n[o],t.parentNode||t[0]&&t[0].parentNode||i);for(;t.length>n.length;)e.removeChild(t[t.length-1])}function x(e,t,n,r){var i,o,s;"childNodes"!==r&&t&&(o=l(t[r])&&l(n[r]),s="object"==typeof t[r]&&"object"==typeof n[r],i=o&&Object.getOwnPropertyDescriptor(t,r).get,t[r]=i?n[r]:s||o?N(e,t[r],n[r]||{}):n[r])}function C(e,t,n,r){if(!e.hasOwnProperty(n)){if("childNodes"===n)for(var i=t.childNodes.length;i--;)r.removeChild(t.childNodes[i]);t[n]=null,t.splice?t.splice(n,1):delete t[n]}var o=l(t[n])&&l(e[n]),s=o&&t[n].length-e[n].length;"childNodes"!==n&&o&&s>0&&t[n].splice(e[n].length,s)}function N(e,t,n){for(var r in n)x(e,t,n,r);for(var r in t)C(n,t,r,e);if(n.childNodes&&n.childNodes.length)if(t.childNodes)y(e,t.childNodes,n.childNodes,0,t);else for(var i=0,o=n.childNodes.length;i<o;i++)e.appendChild(n.childNodes[i],t);else if(t&&t.childNodes)for(i=t.childNodes.length;i--;)e.removeChild(t.childNodes[i]);return t}function _(e,t){var n=t.item,r=t.data,i=r.items.elements.element,s=r.templateContainer,a=e.reinforceProperty,l=!n.childNodes&&!!r.childTemplate,c=l?r.childTemplate:r.template,u=function(e,t){var n=e.parentNode,r=e.index;return n?(t["@last"]=n.childNodes.length-1===r,t["@first"]=0===r,t["@index"]=r,t["@counter"]=r+1,t):t}(n,r.defData.extraModel||{}),f=c&&c.renderHTML(n,u),d=n.parentNode&&n.parentNode.elements,h=d&&d.container||s,v=l?h.lastElementChild:h,m=t.siblPar&&t.siblPar.elements&&t.siblPar.elements.element,g=void 0!==n.__index&&!n.childNodes,y=f?g?f.children[0]:R(f.children[0],t.type,v,m,!0):s,x=l?v:y.hasAttribute("cr-mount")?y:o("[cr-mount]",y);if(y.hasAttribute("cr-id")||y.setAttribute("cr-id",e.id+":"+(n["cr-id"]||0)),s!==i)a(n,"elements",{element:y,container:x}),a(n,"views",$(y,function(e){})),a(n,"events",j(y,"cr-event",function(e){r.controller.installEvent(r.instance,i,e)}));else{var C=p[y.tagName.toLowerCase()];C?(y.removeAttribute("cr-id"),C.init(y,null,r.instance)):b(i,r.defData,r.items,{instance:r.instance,controller:r.controller})}return P(y,r.defData,r.hasPartial,r.modelName,l,[r.instance,n]),y}function E(e,t,n,r,i,o,a,l,c){var u={};r&&(t[e][r][i]||n)&&[].slice.call(s(e+', [cr-name="'+e+'"]',l)).forEach(function(t){t.getAttribute(["cr-id"])||(u=p[e].init(t,null,c))&&(a.push(u),o.components[e].instances[c[1]["cr-id"]]=u)})}function w(e,t,n,r,i,o){n&&t[e][n]&&t[e][n][r]&&function(e,t,n,r){for(var i=[].slice.call(s('[cr-plugin*="'+e+'"]',n)),o=0,a=i.length;o<a;o++)p[e].init(i[o],t.join(","),r[0]||r[1]),i[o].removeAttribute("cr-plugin")}(e,t[e][n][r],i,o)}function P(e,t,n,r,i,o){var s=t.components,a=t.plugins,l="this"===r,c=l?"main":!l&&!i?"loop":i?"child":"",u=[];for(var p in s)E(p,s,n,c,r,t,u,e,o);for(var p in a)w(p,a,c,r,e,o);return u}function T(e,t,n,r){t[e].instances[n]&&(r.destroyComponent(t[e].instances[n]),delete t[e].instances[n])}function A(e,t,n,r,i,o,s,a){var l=o["__cr-id"]||o["cr-id"],c=a[l]=a[l]||{};c[n]=c[n]||[],c[n].push({fn:e,forceUpdate:s>1,components:null})}function O(e,t,n,r,i){var o=(t.events||e.items.events)[r],s=e.items&&e.items.elements.element||e.instance.element;o||(t.events||(t.events={}),o=t.events[r]={},e.controller.installEvent(e.instance,s,r,t)),o[i]?(o[i].filter(function(t,n){e.items.elements.element.contains(t)||o[i].splice(n,1)}),o[i].push(n)):o[i]=[n]}function k(e,t,n,r,i){var o,s=e.components;if(r!==i||e.forceUpdate){if(o=e.fn(r),t.controller)for(var a=o.length;a--;)1===o[a].nodeType&&j(o[a],"cr-event",function(e,r,i){O(t,n,i||o[a],e,r)});s&&(t.crInstance.destroyComponents(s),e.components=null);for(var l=0,c=o.length;l<c;l++)1===o[l].nodeType&&(e.components=P(o[l].parentNode,t.defData,t.hasPartial,t.modelName,!1,[t.instance,n]))}}function R(e,t,n,r,i){return"prependChild"===t?(t="insertBefore",r=n.children[0]):"insertAfter"===t&&(r.nextElementSibling?(t="insertBefore",r=r.nextElementSibling):t=""),n[t||"appendChild"](e,r),e}function S(e,n,r,i){return e?(e.parentNode&&e.parentNode.removeChild(e),e.removeAttribute("cr-for"),e.removeAttribute("cr-child"),j(e,"cr-plugin",function(e,t,o){p[e]&&p[e].preparePlugin(o,n,{where:r,modelName:i,value:t||"null"})}),p[e.tagName.toLowerCase()]||function(e,t,n,r){for(var i=e.join(",")+(e.length?', [cr-name="'+e.join('"], [cr-name="')+'"]':""),o=i?[].slice.call(s(i,n||document)):[],a=o.length,l={};a--;)if(o[a]){l=o[a];for(var c=o.length;c--;)l!==o[c]&&l.contains(o[c])&&o.splice(c,1)}for(a=o.length;a--;)t.push(o[a]),r&&r(o[a],o[a].getAttribute("cr-name")||o[a].tagName.toLowerCase())}(c(p),[],e,function(e,t){(n.components[t]=n.components[t]||{main:{},loop:{},child:{},instances:{}})[r][i]=!0}),new t(e.outerHTML.replace(/(?:{{&gt;|cr-src=)/g,function(e){return"{"===e.charAt(0)?"{{>":"src="}),{helpers:n.helpers||{},partials:n.partials||{},attributes:n.attributes||{},registerProperty:A,isDynamic:function(e,t){return e?(Object.getOwnPropertyDescriptor(e,t)||{}).get:null}})):null}function j(e,t,n){for(var r={},i=[e].concat([].slice.call(s("["+t+"]",e))),o=i.length,a="",l=[];o--;)for(var c=(l=(a=i[o].getAttribute(t))?a.split(/\s*;+\s*/):[]).length,u=[],p="",f="";c--;)p=(u=l[c].split(/\s*:+\s*/))[0],(f=u[1]||u[0])?(r[p]=r[p]||{},r[p][f]=r[p][f]||[],r[p][f].push(i[o])):(r[p]=r[p]||[],r[p].push(i[o])),n&&n(p,f,i[o]);return r}function $(e,t){for(var n=(e.hasAttribute("cr-view")?[e]:[]).concat([].slice.call(s("[cr-view]",e))),r={},i=n.length;i--;)r[n[i].getAttribute("cr-view")]=n[i],t&&t(n[i]);return r}});
//# sourceMappingURL=circular.min.js.map