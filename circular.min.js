!function(e){"use strict";var t=e.require||{},n=e.Math.random,r=null,i=0,o={},a=document.createElement("a"),s=function(e,t){if("object"!=typeof t||!t)return t;e=e||{};for(var n in t)e[n]=t[n].constructor===Array?t[n]:"object"==typeof t[n]?s(e[n],t[n]):t[n];return e},l=function(e){for(var t=["lookaheadMap","paths","options","baseUrl"],n=t.length;n--;)b[t[n]]=s(b[t[n]],e[t[n]])||b[t[n]]||""},c=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1},u=function(e,t,n){return n=/(?:^\!|^http[s]*:|.*\.js$)/.test(e)?"":".js",e=(b.paths[e]||e).replace(/^\!/,""),p((b.baseUrl||".")+"/"+e+n).replace(/^.\//,"")},p=function(e){return a.href=e,(-1!==e.indexOf(a.host)?a.origin:"")+a.pathname+a.search},d=function(t,n){var r=e.document.createElement("script");return r.type="text/javascript",r.async=r.defer=!n,r.charset="utf-8",r.onload=r.onreadystatechange=function(e){"load"!==e.type&&"complete"!==(e.currentTarget||e.srcElement).readyState||(t.factory||v(t),r.onload=r.onreadystatechange=null)},r.src=t.path,r},f=function(t){(r=r||e.document.createDocumentFragment()).appendChild(t),clearTimeout(i),i=setTimeout(function(){document.head.appendChild(r)},0)},h=function(e){for(var t=0,n=e.resolvedDeps.length;n--;)void 0!==e.resolvedDeps[n]&&t++;e.deps.length===t&&v(e)},m=function(e){for(var t=null,n=0,r=0,i=e.parentNames.length;r<i;r++)t=x[e.parentNames[r]],n=c(t.deps,e.name),t.resolvedDeps[n]=e.done,!t.done&&h(t);e.parentNames=[]},v=function(e){e.done||(e.done=(e.factory||function(){}).apply(null,e.resolvedDeps)),m(e),b.options.debug||(delete e.factory,e.name.indexOf("_mod"))},g=function(e){var t=b.lookaheadMap[e];if(t&&-1===(b.paths[e]||"").indexOf(b.options.minifyPrefix)){b(t);for(var n=0,r=t.length;n<r;n++)b.lookaheadMap[t[n]]&&!x[t[n]]&&g(t[n])}};if(!e.define||!e.define.amd){var y=e.define=function(e,t,n,r){var i=[];if("string"!=typeof e)return o=b(e,t,n);if(x[e]){if(x[e].done)return m(x[e]),x[e].done;x[e].deps=t,x[e].factory=n}else x[e]={name:e,deps:t,factory:n,resolvedDeps:[],parentNames:[]};for(var a=0,s=t.length;a<s;a++)i=x[t[a]]&&x[t[a]].parentNames,x[t[a]]?-1===c(i,e)&&i.push(e):(x[t[a]]={name:t[a],isFile:"!"===t[a].substr(0,1),path:u(t[a]),resolvedDeps:[],parentNames:[e]},x[t[a]].isFile?b.getFile(x[t[a]],v):(f(d(x[t[a]],r)),g(t[a]))),x[t[a]].done&&m(x[t[a]]);return h(x[e]),x[e]},b=e.require=function(e,t,r){return e.constructor===Array?y("_mod"+(n()+n()),e,t,r):y("_mod"+(n()+n()),[],e,t)},x=b.modules={},C=b.config=function(e){l(t=e)};b.getFile=function(e,t){return e},y.amd={},C(t)}}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,t){"use strict";function n(e){var t=document.cookie.split(e+"=")[1];return t&&t.split(";")[0]}function r(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||e.status>299))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}function i(e){this._state=0,this._handled=!1,this._value=t,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,setTimeout(function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){try{n=r(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,n)}else(1===e._state?a:s)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void c(n.bind(t),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1,r=function(e){n||(n=!0,s(t,e))};try{e(function(e){n||(n=!0,a(t,e))},r)}catch(e){r(e)}}var u=null,p=document.createElement("a"),d={closest:function(e,t,n){for(;e!==n&&e.parentNode;){if(e.matches(t))return e;e=e.parentNode}},$:function(e,t){return(t||document.body).querySelector(e)},$$:function(e,t){return(t||document.body).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&d.removeClass(e,n),t&&d.addClass(t,r||n)},addEvents:function(e,t,n,r,i){for(var o=e.length;o--;)d.addEvent(e[o],t,n,r,i)},removeEvents:function(e,t,n){for(var r=t.length;r--;)d.removeEvent(e,t[r],n)},addEvent:function(e,t,n,r,i){d.addEvent.events=d.addEvent.events||[],d.addEvent.events.push({e:e,t:t,f:n,c:r,i:i||d}),e.addEventListener(t,n,r)},removeEvent:function(e,t,n){var r={},i=!1,o=0;for(o=(d.addEvent.events||[]).length;o--;)r=d.addEvent.events[o],i=!t||r.e===t&&(!n||n===r.t),r.i===(e||d)&&i&&(r.e.removeEventListener(r.t,r.f,r.c),d.addEvent.events.splice(o,1))},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){d.lazy(function(){d.storageHelper.save(e,t)},n||d.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t){clearTimeout(t._timer),t._timer=setTimeout(e,0)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:i>o?-1:0:i<o?-1:i>o?1:0},normalizePath:function(e){return p.href=e,(-1!==e.indexOf(p.host)?p.origin:"")+p.pathname+p.search},ajax:function(e,i){var o=null,a=!1,s=(new Date).getTime(),l=0;return i=i||{},e=d.normalizePath(e),l=f[e]&&f[e].time||0,a=!0===i.cache?s+1e8:i.cache?l>s?l:s+i.cache:0,o=a&&!i.resetCache&&l>s?f[e]:null,o=o||new d.Promise(function(o,a){var s=new XMLHttpRequest,l=(i.method||i.type||"GET").toUpperCase();if(s||a("Giving up :( Cannot create an XMLHTTP instance"),i||(e=(i=e).url),s.onreadystatechange=function(){var e=r(this,i.dataType,a);if(e!==t){if("json"===i.dataType)try{e=JSON.parse(e)}catch(e){return void a("Caught Exception: "+e.stack)}o(e)}},s.open(l,e,i.async||!0,i.username,i.password),"xml"===i.dataType&&s.setRequestHeader("Content-Type","text/xml"),"GET"!==l&&i.csrf&&s.setRequestHeader("X-CSRF-Token",n(i.csrf)),i.headers)for(var c in i.headers)s.setRequestHeader(c,i.headers[c]);s.send(i.data)}),a?(f[e]=o,f[e].time=a):delete f[e],o},errorHandler:function(e){console.error(e)},Promise:i,requireResources:function(e,t,n){var r=[],i=null,o="",a="",s="",l="styles"===t,c=l?"href":"src",p=l?e.links.concat(e.styles):e.scripts;for(u=u||d.captureResources();p.length;)i=p.shift(),o=i.getAttribute(c),a=d.normalizePath(e.path?e.path+"/"+o:""+o),o&&u[a]||(l||(s=i.text,(i=document.createElement("script")).setAttribute("type","text/javascript"),i.async=!0,o||(i.text=s),r.push(new d.Promise(function(e){o?i.onload=function(){e(this)}:(n&&n.appendChild(i),e(i))}))),o?(i[c]=a,document.head.appendChild(i),u[a]=i):n&&l&&n.appendChild(i));return 0===r.length&&r.push(new d.Promise(function(e){e(function(){})})),d.Promise.all(r)},captureResources:function(){for(var e={},t=[].slice.call(d.$$("script",document)).concat([].slice.call(d.$$("link",document))),n="",r=t.length;r--;)(n=t[r].getAttribute("src")||t[r].getAttribute("href"))&&(e[n=d.normalizePath(n)]=t[r]);return e}};e.Event=e.Event||function(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n};var f={};return i._cache={},i.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},i.prototype.then=function(e,t){var n=new i(function(){});return o(this,{onFulfilled:e||null,onRejected:t||null,promise:n}),n},i.prototype.cancel=function(e){var t=i._cache[e];return t&&(t._deferreds=[],t.then=t.catch=function(){},t._handled=!0),i._cache[e]=this},i.all=function(e){var t=[];return e.reduce(function(e,n){return e.then(function(){return n}).then(function(e){return t.push(e)})},new i(function(e,t){e(null)})).then(function(){return t})},e.require&&(require.getFile=function(e,t){d.ajax(e.path,{cache:"!!"!==e.name.substr(0,2)}).then(function(n){e.done=n,t(e)})}),d}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,t){"use strict";function n(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t,r=e.options.characters+"\\][";e.inlineRegExp=new RegExp("("+n[0]+")([>!&=])*\\s*([\\w\\"+r+"\\.]+)\\s*([\\w"+r+"|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp("("+n[0]+")([#^][*%]*)\\s*([\\w"+r+"]*)(?:\\s+([\\w$\\s|./"+r+"]*))*("+n[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),e.elseSplitter=new RegExp(n[0]+"else"+n[1])}function r(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t}function i(e,n,i,o){var a=i!==t,s=!e.__schnauzerData,l=a&&!s&&e.extra||[],c=!s&&e.helpers||[];return{extra:n?r(n,l):l,path:s?[e]:a?r(e.path,[i]):e.path,helpers:o?r(c,a&&[o]||[{}]):c,__schnauzerData:!0}}function o(e,t){for(var n=0,r=t.length;n<r;n++)e=e&&e[t[n]];return e}function a(e,n){return e!==t?e:n}function s(e,n,r,i){if(r){var s=e.path[i]||{},l=e.helpers[i]||{},c=a(l[n],o(l,r));if(c!==t&&"./"!==r[0]||(c=a(s[n],o(s,r))),c!==t)return c;for(var u=e.extra.length;u--;)if((c=a(e.extra[u][n],o(e.extra[u],r)))!==t)return c}}function l(e){if(!e)return{};var t=e.split("="),n=t.length>1?t[1]:t[0],r='"'===n.charAt(0)||"'"===n.charAt(0),i=!1,o=0,a=[],s=[],l=!1,c="%"===n.charAt(0);return r?n=n.replace(/(?:^['"]|['"]$)/g,""):((s=(n=c?n.substr(1):n).split("../")).length>1&&(n=("@"===s[0]&&"@"||"")+s.pop(),o=s.length),name=name.replace(/^(?:\.|this)\//,function(){return l=!0,""}),a=n.split(/[\.\/]/),n=n.replace(/^(\.\/|this\.|this\/|\*)/,function(e,t){return"*"===t?(i=!0,""):(l=!0,a[0]="./","")}).replace(/(?:^\[|\]$)/g,"")),{name:t.length>1?t[0]:n,value:n,isActive:c,isString:r,isInline:i,strict:l,keys:a,depth:o}}function c(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function u(e,t,n,r,o,a,l,u){return e.options.tools?e.options.tools(e,s,i,t,n,r,o,a,l,u):t[E(r)||a.isInline?"apply":"call"]({getData:function(e){return(e=a.rawParts[e]||{value:e,keys:[e],depth:0}).isString?e.value:s(o,e.value,e.keys,e.depth)},escapeHtml:function(t){return c(t,e)},getBody:function(){return l&&l(o)||""},gatAltBody:function(){return u&&u(o)||""}},a.isInline?[function(){return l||""},a.parts,e]:r)}function p(e,t,n,r,i,o,s){var l=t.name;return o=a(o,""),e.options.render?u(e,e.options.render,l,{name:l,data:n,section:!!t.section,partial:!!t.partial,isActive:t.isActive,fn:r,text:i,value:o,type:t.isInline&&e.decorators[l]&&"decorator"||t.partial&&e.partials[l]&&"partial"||e.helpers[l]&&"helper"||s||""},n,t,r):i+o}function d(e,t,n,r,i){for(var o={},a={},s=[],c=0,u=t.length,p={};c<u;c++)if(""!==t[c]){if("as"===t[c]){t.splice(c,1),s=[t.splice(c,1)[c],t.splice(c,1)[c]];break}o[(p=l(t[c])).name]=p,a[t[c]]=p}return{name:n.name,vars:t,parts:o,rawParts:a,partial:">"===i&&(e.partials[n.name]||e.partials[e.options.recursion]),isInline:n.isInline,isUnescaped:!e.options.doEscape||"&"===i||r,isActive:n.isActive,depth:n.depth,strict:n.strict,keys:n.keys,helpers:s}}function f(e,t,n,r,i){var o=r?{"@index":i,"@last":i===r-1,"@first":0===i}:{};return o["@key"]=t,o["."]=o.this=e,0!==n.length&&(o[n[0]]=e,o[n[1]]=t),o}function h(e,t,n,r){var i=[],o=e.options.splitter;return t=t.replace(e.inlineRegExp,function(t,n,r,a,s){var c=r&&r.charAt(0)||"";return"!"===c||"="===c?"":(s=s.split(/\s+/),"-section-"===a?(a=l(s[1]),a.section=s[0],i.push(a),o):("*"===a&&(a+=s.shift()),i.push(d(e,s,l(a),"{{{"===n,c)),o))}).split(o),r=l(r).name,function(o){return m(e,o,t,n,r,i)}}function m(e,n,r,o,a,l){for(var c="",d="",f=null,h={},m={},g={},y=0,b=r.length;y<b;y++)if((g=l[y])!==t)if(c+=r[y],g.section)c=p(e,g,n,f=o[g.section],c,f(n),a);else if(g.isInline)c=u(e,e.decorators[g.name||g.vars[0]],g.name,g.vars,n,g,c)||c,N(c)&&(c=c());else{if(g.partial){m={};for(var x in n.path[0])m[x]=n.path[0][x];for(var C in g.parts)h=g.parts[C],m[C]=h.isString?h.value:s(n,h.value,h.keys,h.depth);(m=i(m)).helpers=[n.helpers[0]],m.extra=[n.extra[0]],d=g.partial(m)}else d=(f=v(e,g))(n);c=p(e,g,n,f,c,d,a)}else c=a?p(e,{},n,f,c,r[y],a):c+r[y];return c}function v(e,t){return function(n){var r=s(n,t.name,t.keys,t.depth),i=!t.strict&&e.helpers[t.name]||N(r)&&r;return r=i?u(e,i,t.name,t.vars,n,t):r&&(t.isUnescaped?r:c(r,e))}}function g(e,t,n,r,i,o){var a=n;return n=l(!r.length||"if"!==n&&"each"!==n&&"with"!==n&&"unless"!==n?n:r.shift()),r=d(e,r,l(n.name),i,""),function(i){return y(e,i,t,n,r,o,a)}}function y(e,n,r,o,a,l,c){var p=s(n,o.name,o.keys,o.depth),d=!o.strict&&(e.helpers[o.name]||N(p)&&p),h=d&&u(e,d,o.name,a.vars,n,a,r[0],r[1]),m=E(p),v="each"===c&&!m&&"object"==typeof p&&p,g="";if(d){if(n.helpers[0]=f(h,o.name,a.helpers),"if"===c)return h?r[0](n):r[1]&&r[1](n);if("unless"===c)return h?r[1]&&r[1](n):r[0](n);m=E(p=h)}if("unless"===c?p=!p:v&&(p=A(p,[])),m||v){if(l)return p.length?"":r[0](p);n.path.unshift({}),n.helpers.unshift({});for(var y=0,b=p.length;y<b;y++)n.path[0]=m?p[y]:v[p[y]],n.helpers[0]=f(n.path[0],m?y:p[y],a.helpers,b,y),g+=r[0](n);return n.path.shift(),n.helpers.shift(),g}return l&&!p||!l&&p?d&&"string"==typeof p?p:r[0]("unless"===c||"if"===c?n:i(n,t,p,f(p,o.name,a.helpers))):r[1]&&r[1](n)}function b(e,t){for(var n="",r=[],o=e.options.tags;n!==t&&(n=t);)t=t.replace(e.sectionRegExp,function(t,n,i,a,s,l,c){return"#*"===i?(e.registerPartial(s.replace(/(?:^['"]|['"]$)/g,""),c),""):(c=c.split(e.elseSplitter),r.push(g(e,[h(e,c[0],r,a),c[1]&&h(e,c[1],r,a)],a,s&&s.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===n,"^"===i)),o[0]+"-section- "+(r.length-1)+" "+(s||a)+o[1])});return t=h(e,t,r),function(e,n){return t(i(e,n&&(E(n)&&n||[n])))}}var x=function(e,n){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:t,render:t},C(this,n||{},e)},C=function(e,t,r){for(var i in t)e.options[i]=t[i];t=e.options,e.entityRegExp=new RegExp("["+A(t.entityMap,[]).join("")+"]","g"),n(e,t.tags),e.helpers=t.helpers,e.decorators=t.decorators,e.partials={};for(var o in t.partials)e.registerPartial(o,t.partials[o]);r&&e.registerPartial(t.recursion,r)},E=Array.isArray||function(e){return e&&e.constructor===Array},N=function(e){return e&&"function"==typeof e},A=Object.keys||function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return x.prototype={render:function(e,t){return this.partials[this.options.recursion](e,t)},parse:function(e){return this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerDecorator:function(e,t){this.decorators[e]=t},unregisterDecorator:function(e,t){delete this.decorators[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||b(this,t)},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){n(this,e)}},x}),function(e,t){"object"==typeof exports?module.exports=t(e,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(n){return t(e,n)}):e.Blick=t(e,e.Schnauzer)}(this,function(e,t){"use strict";function n(e,t){return document.evaluate('//text()[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue||document.evaluate('//@*[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function r(e){var t=d.length;return e.fn&&e.name&&e.isActive&&!e.partial&&"decorator"!==e.type&&"helper"!==e.type&&"@"!==e.name.charAt(0)&&"."!==e.name&&"this"!==e.name?(e.isSection=o(e),d[t]=e,e.text+"{{#"+t+"}}"+e.value+"{{/"+t+"}}"):e.text+e.value}function i(e,t,n){return e.splitText(e.textContent.lastIndexOf(n)+n.length).textContent,e.splitText(e.textContent.indexOf(t))}function o(e,t){return e.section&&!e.type&&(-1!==e.value.indexOf("{{#")||t&&-1!==t.textContent.indexOf("{{#"))}function a(e){for(var t=!0,n={replacer:t,lastNode:t,fn:t,children:t,unregister:t,data:t},r=e.length;r--;){for(var i in e[r])n[i]||delete e[r][i];e[r]=null}return null}function s(e,t,n,r){for(;n.childNodes.length;)r.appendChild(n.childNodes[0]);if(!t)return r;t.nextSibling?t.parentNode.insertBefore(r,t.nextSibling):t.parentNode.appendChild(r)}function l(e,t,n,r){if(e&&0!==n.length)for(var i=n.length;i--;)n[i].children.push({unregister:function(e){return function(){r.unregisterProperty(e.name,e)}}(t)}),-1!==e.textContent.indexOf(n[i].search)&&(e.textContent=e.textContent.replace(n[i].search,""),n.pop());return n}function c(e,t,r,u,p){var f,h=new RegExp("{{#\\d+}}[\\S\\s]*{{/\\d+}}"),m=document.createElement("tbody"),v="",g="",y={},b={},x={},C=e.options,E=C.registerProperty,N=[],A=[];m.innerHTML=r||"";for(var _=t.length;_--;)v="{{#"+_+"}}",g="{{/"+_+"}}",y=t[_],(b=n(m,v))?b.ownerElement?(y.replacer=function(e,t,n,r,i,o){return function(){var a=o.fn(o.data);void 0===a&&(a=""),C.attributes[n]?(e=null,C.attributes[n](t,n,a)):void 0!==a&&(e.textContent=i.replace(r,a))}}(b,b.ownerElement,b.name,h,b.textContent,y),E(y.name,y.replacer,y.data.path[0],b),A=l(b.ownerElement.previousSibling,y,A,C),y.replacer()):o(y,b)?((A=l(b,y,A,C)).push({search:v,children:y.children=[]}),x=n(b.parentNode,g),y.lastNode=x=x.splitText(x.textContent.lastIndexOf(g)),x.textContent=x.textContent.replace(g,""),(b=b.splitText(b.textContent.indexOf(v))).textContent=b.textContent.replace(v,""),y.replacer=function(t,n){return function(){for(;n.lastNode.previousSibling&&n.lastNode.previousSibling!==t;)t.parentNode.removeChild(n.lastNode.previousSibling);if(n.children)for(var r=n.children.length;r--;)n.children[r].unregister();t.textContent="",N=c(e,d,n.fn(n.data),t,p),n.children=a(N)}}(b,y),E(y.name,y.replacer,y.data.path[0],b)):(b=i(b,v,g),y.replacer=function(e,t){return function(){e.textContent=t.fn(t.data)}}(b,y),b.textContent=y.value,E(y.name,y.replacer,y.data.path[0],b),A=l(b,y,A,C)):window.console&&console.warn("There might be an error in the SCHNAUZER template");return f=s(e,u,m,p),u||(t=a(t)),d=[],u?t:f}var u=function(e,t){this.version="0.0.1",this.options={registerProperty:f,unregisterProperty:f,attributes:{value:m,disabled:h,checked:h,autocomplete:h,contenteditable:h,readonly:h,required:h,selected:h}},p(this,t||{},e)},p=function(e,n,i){for(var o in n)if("attributes"===o)for(var a in n[o])e.options[o][a]=n[o][a];else e.options[o]=n[o];n.render=r,e.schnauzer=new t(i,n)},d=[],f=function(){},h=function(e,t,n){!0===n||"true"===n?e.setAttribute(t,""):e.removeAttribute(t)},m=function(e,t,n){e.setAttribute("value",n),e.value=n};return u.prototype={render:function(e,t){var n=document.createDocumentFragment(),r=this.schnauzer.render(e,t);return c(this,d,r,null,n)}},u}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(e){"use strict";function t(e,n){for(var r=n.length;r--;)n[r][e.options.childNodes]&&t(e,n[r][e.options.childNodes]),delete m[e.id][n[r][e.options.idProperty]],n.pop();return n}function n(e,t){return(t.parentNode?r(t.parentNode,e.options.childNodes):e.model).indexOf(t)}function r(e,t){return e[t]=e[t]||[],e[t]}function i(e,t,n,i,l,c){return e.options.moveCallback.call(e,t,l,c),t.parentNode?e.options.parentCheck&&a(e,t,n):s([t],e,n,l,c),e.type=l,e.sibling=c,t.parentNode===n&&i>t.index&&-1!==t.index&&i--,t=-1!==t.index&&t.parentNode&&o(e,t,!0)||t,r(n,e.options.childNodes).splice(i||0,0,t),t.parentNode=n,t}function o(e,n,i){return!i&&t(e,[n]),r(n.parentNode,e.options.childNodes).splice(n.index,1)[0]||n}function a(e,t,n){var r=n;for(t===n&&d("ERROR: can't move element inside itself",e.options);r=r.parentNode;)r===t&&d("ERROR: can't move parent inside it's own child",e.options)}function s(e,t,n,r,i){t.options;for(var o=!1,a=!0,c=t.options.idProperty,u={},p=0,d=e.length;p<d;p++)o=!(u=e[p]).parentNode,u[c]||(u[c]="vom_"+v++,a=!1),m[t.id][u[c]]=u,u.parentNode=n||t.model.root,u.index=0,o&&(u=l(t,u,a)),t.options.preRecursionCallback.call(t,u,r,i),u[t.options.childNodes]&&s(u[t.options.childNodes],t,u),t.options.enrichModelCallback.call(t,u,r,i);return e}function l(e,t,n){var r=!1,i=e.options.listeners,o=0,a=0,s="",l="",u="",p="",d={},f={},h=[];for(var m in t)if(o=i[m]&&i[m].length-1){a=i[m].indexOf("*"),d=y(t,i[m],a>-1?o-a+1:1),h=(s=(p=i[m].join(".")).split("*")[1]||"").split(".").splice(1);for(var v in d)f=s?y(d[v],h,1):d,l=p.replace("*",v),u=h[h.length-1]||v,e.addProperty(u,[f,t],l)}else r="parentNode"===m||m===g,m===e.options.idProperty?c(t,m,t[m],n):(i[m]||i["*"]||r)&&e.addProperty(m,t,null,r);return t}function c(e,t,n,r,i){return delete e[t],Object.defineProperty(e,t,{enumerable:!!i,configurable:!1,writable:!!r,value:n})}function u(e,t,r,i,o,a,s){return Object.defineProperty(t[0]||t,e,{get:function(){return e===o?n(i,t[0]||t):r[s||e]},set:function(n){var a=r[s||e];r[s||e]=n,p(s||e,t,n,a,r,i,o)},enumerable:a})}function p(e,t,n,r,i,o,a){(e===o.options.idProperty||e===a||o.options.subscribe.call(o,o.type||e,t[1]||t,n,r,o.sibling))&&(i[e]=r,d("ERROR: Cannot set property '"+e+"' to '"+n+"'",o.options)),delete o.type,delete o.sibling}function d(t,n){if(!n.throwErrors&&void 0!==e&&e.console)return console.warn?console.warn(t):console.log(t);throw t}var f=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],childNodes:"childNodes",throwErrors:!1},this.model=e||[],h(this,t||{})},h=function(e,t){var n="",r={};m.push({}),c(e,"id",m.length-1);for(var i in t)e.options[i]=t[i];for(;n=e.options.listeners.shift();)n=n.split("."),e.options.listeners[n[0]]=n;r[e.options.childNodes]=e.model,c(e.model,"root",r),s(e.model,e)},m=[],v=0,g="index",y=function(e,t,n){for(var r=0,i=t.length-(n||0);r<i;r++)e=e&&e[t[r]];return e};return f.prototype={getElementById:function(e){return m[this.id][e]},getElementsByProperty:function(e,t){var n=[],r=void 0!==t,i=void 0!==e,o=[],a=null;for(var s in m[this.id])a=void 0!==m[this.id][s][e]?m[this.id][s][e]:y(m[this.id][s],o[0]?o:o=i&&e.split(".")),(r&&a===t||!r&&void 0!==a||!r&&!i)&&n.push(m[this.id][s]);return n},appendChild:function(e,t){return t=t||this.model.root,i(this,e,t,r(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return t=t||this.model.root,i(this,e,t,0,"prependChild",t)},insertBefore:function(e,t){return i(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return i(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&o(this,t),i(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return o(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},reinforceProperty:c,addProperty:function(e,t,n,r){var i={};i[n||e]=(t[0]||t)[e],u(e,t,i,this,g,!r,n)},getProperty:function(e,t){return y(t,e.split("."))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return t(this,this.model)}},f}),function(e,t){"object"==typeof exports?module.exports=t(e,require("toolbox"),require("blick"),require("VOM")):"function"==typeof define&&define.amd?define("circular",["toolbox","blick","VOM"],function(n,r,i){return t(e,n,r,i)}):e.Circular=t(e,e.Toolbox,e.Blick,e.VOM)}(this,function(e,t,n,r){"use strict";function i(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r].call(e,n)}function o(n,r,o){var s=void 0!==e.onpopstate?"popstate":"hashchange";t.addEvent(e,s,function(e){var t={};for(var s in n)(t=c(n[s],a(o)))&&i(r,n[s],t)},r.id)}function a(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function s(e){var t=[];return e=e.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,n){return t.push(e.substr(1)),n?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$"),names:t}}function l(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}function c(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=l(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function u(e){for(var t=[].slice.call(e.container.childNodes),n=0,r=t.length;n<r;n++)T[e.previousName].cache.appendChild(t[n])}function p(e,t,n,r,i,o,a){var s="prependChild"===n,l={};"string"==typeof t?(e.innerHTML=t,(l=e.children[0])&&l.setAttribute(o,a)):l=11===t.nodeType?t.children[0]:t;return l&&((s||"insertAfter"===n)&&(i=i&&i.nextSibling||s&&r.children[0],n=i?"insertBefore":"appendChild"),(r||l.parentElement)[n](l,i)),l}function d(e,t,n){for(var r=A(g(e.viewAttr),n),i="",o=(r=[n].concat([].slice.call(r))).length;o--;)(i=r[o].getAttribute(e.viewAttr))&&(t[i]=r[o])}function f(e,t,n,r,i){for(var o in e.prototype)r[o]||(i[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));return i}function h(e,t,n){var r=[],i=h.tempContainer=h.tempContainer||document.createDocumentFragment(),o=[],a={};if(n)for(s=n.length;s--;)(a=n[s])[2][a[1]?"insertBefore":"appendChild"](a[0],a[1]),n[s]=null;else if(e&&t){if(0!==(r=A(g(t),e)).length)for(var s=0,l=r.length;s<l;s++)a=r[s],o.push([a,a.nextElementSibling,a.parentNode]),i.appendChild(a);return o}}function m(e,t){var n="";return"script"===e.tagName.toLowerCase()?e.innerHTML:(e.removeAttribute(t.templateAttr),n=e.outerHTML,e.parentNode.removeChild(e),n)}function v(e,t,r,i){for(var o,a=r||document.body,s=e.containerAttr,l=r.hasAttribute(s)?r:N(g(s,i),r)||N(g(s),r),c=N(g(e.templateAttr,i),a),u=A(g(e.templatesAttr,i),a)||[],p={},d=u.length;d--;)o=m(u[d],e),p[u[d].id||u[d].getAttribute("name")]=new n(o,{doEscape:!1,helpers:t.helpers||e.helpers||{}});return{element:r,template:c?m(c,e):c,templates:p,container:l}}function g(e,t){return"["+e+(t?'="'+t+'"]':"]")}function y(e,n,r,i){var o,a=(t.closest(e.target,g(n))||r.element).getAttribute(n),s="elements.element",l=r.getElementById(a)||r.getElementsByProperty(s,r.element)[0]||r.getElementsByProperty(s,e.target)[0]||r.model[0],c=l&&l.events[e.type],u={},p=!1;for(var d in c)if(o=i.options.eventListeners[d])for(var f=c[d].length;f--;)u=c[d][f],p||u!==e.target&&!u.contains(e.target)||(p=!1===o.call(r,e,u,l))&&e.stopPropagation()}var b=function(e,t){this.options={componentAttr:"cr-component",containerAttr:"cr-container",templateAttr:"cr-template-for",templatesAttr:"cr-template",eventAttribute:"cr-event",viewAttr:"cr-view",devAttribute:"cr-dev",mountAttribute:"cr-mount",elements:"elements",events:"events",views:"views",hash:"#"},x(this,e,t)},x=function(e,n,r){var i="string"==typeof n;i||(r=n);for(var o in r)e.options[o]=r[o];e.version="0.1.0",e.components={},e.data={},e.id="cr_"+_++,e.Toolbox=t,e.name=i?n:e.id},C=function(e){this.options={appElement:document.body,eventAttribute:"cr-event"},E(this,e)},E=function(e,t){for(var n in t)e.options[n]=t[n];e.events={}},N=(e.requestAnimationFrame||e.webkitRequestAnimationFrame,t.$),A=t.$$,_=0,w={},R={},P=null,k={},T={};return b.prototype.component=function(e,i){if(this.components[e])return this.components[e].reset(i.model,i.extraModel);this.data[e]={};var o=this,a={},s={},l=this.options,c=l.elements,u=l.componentAttr,m=g(u,e),y=i.componentElement||N(m,i.componentWrapper||document);if(y){var b=h(y,u),x=y&&y.getAttribute("name"),E=v(l,i,y,x||e),A=this.components[e]={name:e,model:i.model||[],element:E.element,container:E.container,templates:E.templates},_=i.storage,P=_||{},T=t.storageHelper,M=_&&T.fetch(P.name)||{},O=P.category,S=P.listeners||i.listeners,L=P.storeAll||S&&-1!==S.indexOf("*"),q=i.mountSelector||g(l.mountAttribute),D=i.template;if(this.data[e].extraModel=i.extraModel||l.extraModel,k[this.name]=k[this.name]||{},k[this.name][e]={},w[this.id]=w[this.id]||{},a=w[this.id][e]={},a.helper=document.createElement("tbody"),i.onBeforeInit&&i.onBeforeInit(A),a.controller=i.eventListeners&&new C({appElement:E.element,eventAttribute:l.eventAttribute,eventListeners:i.eventListeners,instanceID:o.id}),a.collector={},a.template=D&&D.version?D:R[e]?R[e]:E.template?new n(D||E.template,{doEscape:!1,helpers:i.helpers||l.helpers||{},registerProperty:function(e,t,n){a.collector[e]=a.collector[e]||[],a.collector[e].push({item:n,fn:t})}}):null,a.template&&(R[e]=a.template),_){var j=M[O]||M;for(var I in A.model[0])j&&void 0!==j[I]&&(A.model[0][I]=j[I])}return a.vom=new r(A.model,{idProperty:o.options.idProperty||"cr-id",preRecursionCallback:function(t,n,r){var s=this.options.idProperty,u=t[s],f=a.template&&a.template.schnauzer.partials.self&&a.template.render(t,o.data[e].extraModel),h="replaceChild"===n&&r[c].element,m=t.parentNode[c]&&t.parentNode[c].container,v=f&&g||m||A.container,g=v?h||void 0:r&&r[c].element,y=f&&p(a.helper,f,n||"appendChild",v,g,s,u)||A.element;this.reinforceProperty(t,c,{element:y,container:N(q,y)},!0),this.reinforceProperty(t,l.events,{},!0),a.controller&&a.controller.getEventListeners(t[c].element||A.element,t[l.events],A,s),this.reinforceProperty(t,l.views,{},!0),d(l,t[l.views],t[c].element||A.element),i.preRecursionCallback&&i.preRecursionCallback.call(this,t)},enrichModelCallback:this.options.enrichModelCallback||i.enrichModelCallback||function(){},listeners:this.options.listeners||i.listeners||[],subscribe:function(t,n,r,s,u){var f=this.options.idProperty,h=(n[f],n[c]&&n[c].element),m=n.parentNode&&n.parentNode[c]?n.parentNode[c].container||n.parentNode[c].element:A.container;"removeChild"===t?p(a.helper,h,t,h.parentElement):"sortChildren"===t?p(a.helper,h,"appendChild",m):this[t]?n===u?(h=p(a.helper,a.template.render(n,o.data[e].extraModel),t,m,u[c].element,f,n[f]),n[c].element=h,n[c].container=N(q,h),n[l.events]={},a.controller&&a.controller.getEventListeners(n[c].element||A.element,n[l.events],A,this.options.idProperty),n[l.views]={},d(l,n[l.views],n[c].element||A.element)):"replaceChild"!==t&&p(a.helper,h,t,m,u[c]&&u[c].element):_&&(L||-1!==S.indexOf(t))&&(M=T.fetch(P.name)||{},L?M[O]=A.model[0]:(M[O]=M[O]||{},M[O][t]=r),T[!1===P.saveLazy?"save":"saveLazy"](O?M:M[O],P.name,this));var v=a.collector[t];if(v)for(var g=v.length;g--;)v[g].item===n&&r!==s&&v[g].fn();i.subscribe&&i.subscribe.call(this,t,n,r,s),o.publish(A,e,t,{property:t,item:n,value:r,oldValue:s})}}),h(null,null,b),s=f(r,a.vom,0,this,s),s.uncloak=function(e){var e=e&&e.element||A.element;t.removeClass(e,"cr-cloak"),e.removeAttribute("cr-cloak")},s.reset=function(e,t){t&&(o.data[A.name].extraModel=t),a.vom.destroy(),this.container&&(this.container.innerHTML="");for(var n=0,r=e.length;n<r;n++)this.appendChild(e[n]);return A},A.__proto__=s,i.onInit&&i.onInit(A),A}},b.prototype.destroy=function(e){var t=w[this.id],n={};for(var r in t)if(!e||e===r)for(var i in t[r])(n=t[r][i])&&n.destroy&&n.destroy(r)},b.prototype.model=function(e,t){return new r(e,t)},b.prototype.template=function(e,t){return new n(e,t)},b.Toolbox=t,b.prototype.subscribe=function(e,t,n,r,i){if(e=e?e.name||e.components&&e.components[t]||e:this.name,k[e]=k[e]||{},(t=k[e][t]=k[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),r.callback||r;delete k[e]},b.prototype.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,k[e]=k[e]||{},k[e]&&((t=k[e][t]=k[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&i(this,t[n],r))},b.prototype.unsubscribe=function(e,t,n,r){var i=-1,o={};return e=e||this.name,k[e]&&k[e][t]&&k[e][t][n]&&-1!==(i=(o=k[e][t][n]).indexOf(r.callback||r))&&o.splice(i,1),r.callback||r},b.prototype.addRoute=function(e,t,n){var r="object"==typeof e.path?{regexp:e.path}:s(e.path),i=n||this.options.hash,l=c(r,a(i)),u=k[this.name]&&k[this.name].__router;return this.subscribe(null,"__router",e.path,{callback:e.callback,names:r.names,regexp:r.regexp||r},t),t&&l&&e.callback.call(this,l),!u&&o(k[this.name].__router,this,i),e},b.prototype.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},b.prototype.toggleRoute=function(e,t){var n=k[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},b.prototype.loadResource=function(e,n){var r=this,i=function(e){return!e.hasAttribute(r.options.devAttribute)};return t.ajax(e,{cache:n}).then(function(t){var n=[],r=e.split("/").slice(0,-1);return P=P||document.implementation.createHTMLDocument(""),P.documentElement.innerHTML=t,n=[].slice.call(A("script",P)||[]).filter(function(e){return"text/javascript"===e.getAttribute("type")&&(e.parentNode.removeChild(e),i(e))}),{links:[].slice.call(A("link",P)||[]).filter(i),styles:[].slice.call(A("style",P)||[]).filter(i),scripts:n,body:N("body",P),head:N("head",P),path:r.join("/")}}).catch()},b.prototype.insertResources=function(e,n){var r=N(g(this.options.devAttribute,"container"),n.body)||n.body;for(t.requireResources(n,"styles",e);r.childNodes[0];)e.appendChild(r.childNodes[0]);return t.requireResources(n,"scripts",e)},b.prototype.insertModule=function(e,t){var n=this;return this.loadResource(e,!0).then(function(e){return n.insertResources(t,e).then(function(){return e.path})})},b.prototype.renderModule=function(e){var n=null,r=null,i=e.container,o=T,a=e.name;return o[e.previousName]&&u(e),a&&o[a]?(e.container.appendChild(o[a].cache),o[a].init&&!1!==e.init&&o[a].init(e.data,o[a].path),new t.Promise(function(e){e(o[a].init)})):(n=document.createDocumentFragment(),i||((r=document.createElement("div")).style.display="none",document.body.appendChild(r)),a?this.insertModule(e.path,e.container||r).then(function(s){return new t.Promise(function(t){var l=!0===e.require?a:!1===e.require?"":e.require;o[a]={path:s,cache:n},l?require([l],function(n){o[a].init=n,!1!==e.init&&n(e.data,s),i||(e.container=r,u(e),r.parentElement.removeChild(r)),t(n)}):r&&(u(e),r.parentElement.removeChild(r),t())})}).catch():new t.Promise(function(e){e()}))},C.prototype={getEventListeners:function(e,t,n,r){for(var i=this.options.eventAttribute,o=e.querySelectorAll(g(i)),a="",s="",l="",c="",u=[],p={},d=e!==n.element?n.element:[],f=(o=[e].concat([].slice.call(o),d)).length;f--;)if(a=o[f].getAttribute(i))for(var h=(u=a.split(/\s*;+\s*/)).length;h--;)l=(s=u[h].split(/\s*:+\s*/))[0],c=s[1],void 0===(p=t[l]=t[l]||{})[c]&&(p[c]=[]),p[c].push(o[f]),this.events[l]||(this.events[l]=!0);this.installed||this.installEventListeners(n,r)},installEventListeners:function(e,n){var r=this;for(var i in this.events)t.addEvent(this.options.appElement,i,function(t){y(t,n,e,r)},!!/(?:focus|blur)/.test(i),this.options.instanceID+"_"+e.name);this.installed=!0},destroy:function(e){t.removeEvent(this.options.instanceID+"_"+e.name)}},b});