!function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,t){"use strict";function n(e){var t=document.cookie.split(e+"=")[1];return t&&t.split(";")[0]}function r(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(200===e.status)return e["xml"===t?"responseXML":"responseText"];n("There was a problem with the xhr request.")}}catch(e){n("Caught Exception: "+e.stack)}}var o={closest:function(e,t,n){return e&&e.closest(t)},$:function(e,t){return e.querySelector(t)},$$:function(e,t){return e.querySelectorAll(t)},addClass:function(e,t){e.classList.add(t)},removeClass:function(e,t){e.classList.remove(t)},toggleClass:function(e,t,n){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)},hasClass:function(e,t){return e.classList.contains(t)},addEvents:function(e,t,n,r,i){for(var s=e.length;s--;)o.addEvent(e[s],t,n,r,i)},removeEvents:function(e,t,n){for(var r=t.length;r--;)o.removeEvent(e,t[r],n)},addEvent:function(e,t,n,r,i){o.addEvent.events=o.addEvent.events||[],o.addEvent.events.push({e:e,t:t,f:n,c:r,i:i||o}),e.addEventListener(t,n,r)},removeEvent:function(e,t,n){var r={},i=!1,s=0;for(s=(o.addEvent.events||[]).length;s--;)r=o.addEvent.events[s],i=!t||r.e===t&&(!n||n===r.t),r.i===(e||o)&&i&&(r.e.removeEventListener(r.t,r.f,r.c),o.addEvent.events.splice(s,1))},storageHelper:{fetch:function(e){return JSON.parse(localStorage.getItem(e)||"[]")},save:function(e,t){o.lazy(function(){localStorage.setItem(t,JSON.stringify(e))},o.storageHelper)}},lazy:function(e,t){clearTimeout(t.timer),t.timer=setTimeout(e,0)},itemsSorter:function(e,t,n,r){var o=e[n].toUpperCase(),i=t[n].toUpperCase();return r?o<i?1:o>i?-1:0:o<i?-1:o>i?1:0},ajax:function(e,i){return new o.Promise(function(o,s){var a=new XMLHttpRequest,l=(i.method||i.type||"GET").toUpperCase();if(a||s("Giving up :( Cannot create an XMLHTTP instance"),i||(e=(i=e).url),a.onreadystatechange=function(){var e=r(this,i.dataType,s);if(e!==t){if("json"===i.dataType)try{e=JSON.parse(e)}catch(e){return void s("Caught Exception: "+e.stack)}o(e)}},a.open(l,e),"xml"===i.dataType&&a.setRequestHeader("Content-Type","text/xml"),"GET"!==l&&i.csrf&&a.setRequestHeader("X-CSRF-Token",n(i.csrf)),i.headers)for(var c in i.headers)a.setRequestHeader(c,i.headers[c]);a.send(i.data)})},Promise:function(e){function n(e){e&&"function"==typeof e.then?e.then(n,r):(p=l,s=e,u&&i(u))}function r(e){p=c,s=e,u&&i(u)}function i(e){p!==a?setTimeout(function(){var t,n=p===l?e.onResolved:e.onRejected;if(n){try{t=n(s)}catch(t){return void e.reject(t)}e.resolve(t)}else e[p===l?"resolve":"reject"](s)},0):u=e}var s,a=t,l=!0,c=!1,p=a,u=null;this.then=function(e,t){return new o.Promise(function(n,r){i({onResolved:e,onRejected:t,resolve:n,reject:r})})},e(n,r)}};return o}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,t){"use strict";function n(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t;e.options.tags=n,e.variableRegExp=new RegExp("("+n[0]+")([>!&=]\\s*)*([\\w\\"+e.options.characters+"\\.\\s*]+)*"+n[1],"g"),e.sectionRegExp=new RegExp(n[0]+"(#|\\^)([\\w\\.]*)\\s*(.*?)"+n[1]+"([\\S\\s]*?)("+n[0]+")\\/\\2("+n[1]+")","g")}function r(e){return e&&e.constructor===Array}function o(e){return e&&"function"==typeof e}function i(e,t){for(var n=0,r=t.length;n<r;n++)e=e&&e[t[n]];return e}function s(e,n,r){if("string"==typeof r){var o=[],s=e[r]!==t?e[r]:i(e,o=r.split("."));if(s!==t)return s;for(var a=n.length;a--;){if(n[a][r]!==t)return n[a][r];if(s=i(n[a],o))return s}}}function a(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function l(e,t,n){return{getData:function(e){return s(t,n,e)},escapeHtml:function(t){return a(t,e)}}}function c(e,n){var r=[],i=e.options;return n=n.replace(e.variableRegExp,function(t,n,o,s){var a=o&&("!"===o[0]||"="===o[0]),l=!i.doEscape||"{{{"===n||o&&"&"===o[0],c=o&&">"===o[0],p=!1,u="",d={};if(a)return"";if(s=s.split(/\s+/),u=s.shift(s),c)for(var f=s.length,h=[];f--;)d[(h=s[f].split("="))[1]?h[0]:"$"+f]=(h[1]?h[1]:h[0]).replace(/"/g,"");return p=u===i.recursion,r.push(c&&(e.partials[u]||p)?[e.partials[u],d,c,l,p]:[u,s,null,l]),i.splitter}).split(i.splitter),function(c,p,u){u&&(p=[u].concat(p));for(var d,f,h=0,v=n.length,m="";h<v;h++)m+=n[h],r[h]!==t&&(f=r[h][0],!0===r[h][2]?d=(f||e.partials[i.recursion])(c,r[h][4]?null:p,r[h][1]):(d=c[f]!==t?c[f]:s(c,p,f),d=i.helpers[f]?i.helpers[f].apply(l(e,c,p),[""].concat(r[h][1])):o(d)?d.apply(l(e,c,p),[""].concat(r[h][1])):"executor"===f.name?f(c,p):d&&(r[h][3]?d:a(d,e))),d!==t&&(m+=d));return m}}function p(e,t,n,i,a){return function(c,p,u){var d=s(c,p,n);if(r(d)){if(a)return d.length?"":t(d,p);for(var f=0,h=d.length,v="";f<h;f++)v+="object"==typeof d[f]?t(d[f],[d[f]].concat(p)):t({".":d[f]},p);return v}return e.options.helpers[n]?e.options.helpers[n].apply(l(e,c,p),[t(c,p)].concat(i.split(/\s+/))):(u=c[n]||d)&&o(u)?u.apply(l(e,c,p),[t(c,p)].concat(i.split(/\s+/))):a&&!u||!a&&u?t(c,p):void 0}}function u(e,t){for(var n=e.options,r=[],i=[],s=[],a=-1,l=n.stopper,d=l+"\\d+"+l,f=t.replace(e.sectionRegExp,function(t,o,i,f,v,m,g){var y=m+o+i+f+g,b=v.lastIndexOf(y);return a++,-1!==b?(s.push(a--),y+v.substring(0,b)+m+o+i+l+h+l+g+v.substring(b+y.length)+m+"/"+i+l+h+++l+g):(i=i.replace(new RegExp(d),""),r.push(new RegExp(n.tags[0]+"[#^]").test(v)?p(e,u(e,v),i,f,"^"===o):p(e,c(e,v),i,f,"^"===o)),n.splitter)}).split(n.splitter),v=0,m=s.length;v<m;v++)f[s[v]]=u(e,f[s[v]]);for(var v=0,m=f.length;v<m;v++)i.push(o(f[v])?f[v]:c(e,f[v])),r[v]&&i.push(r[v]);return function(e,t,n){for(var r=0,o=i.length,s="";r<o;r++)s+=i[r](e,t||[e],n)||"";return s}}var d=function(e,t){this.version="0.1.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},partials:{},recursion:"self",characters:'$"<>%=@',splitter:"|##|",stopper:"__"},f(this,t||{},e)},f=function(e,t,r){for(var o in t)e.options[o]=t[o];t=e.options,e.entityRegExp=function(e,t){for(var n in e)t+=n;return new RegExp("["+t+"]","g")}(t.entityMap,[]),n(e,t.tags),e.partials={};for(var i in t.partials)e.registerPartial(i,t.partials[i]);r&&e.registerPartial(t.recursion,r)},h=0;return d.prototype={render:function(e,t){return t=t&&(r(t)&&t||[t]),this.partials[this.options.recursion](e,t)},parse:function(e){this.partials[this.options.recursion]||this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.options.helpers[e]=t},unregisterHelper:function(e){delete this.options.helpers[e]},registerPartial:function(e,t){return this.partials[e]=u(this,t)},unregisterPartial:function(e){delete this.options.partials[e]},setTags:function(e){n(this,e)}},d}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(e){"use strict";function t(e,n){for(var r=n.length;r--;)n[r][e.options.childNodes]&&t(e,n[r][e.options.childNodes]),delete v[e.id][n[r][e.options.idProperty]];return n}function n(e,t){return(t.parentNode?r(t.parentNode,e.options.childNodes):e.model).indexOf(t)}function r(e,t){return e[t]=e[t]||[],e[t]}function o(e,t,n,o,l,c){return e.options.moveCallback.call(e,t,l,c),t.parentNode?e.options.parentCheck&&s(e,t,n):a([t],e,n,l,c),e.type=l,e.sibling=c,t.parentNode===n&&o>t.index&&-1!==t.index&&o--,t=-1!==t.index&&t.parentNode&&i(e,t,!0)||t,r(n,e.options.childNodes).splice(o||0,0,t),t.parentNode=n,t}function i(e,n,o){return!o&&t(e,[n]),r(n.parentNode,e.options.childNodes).splice(n.index,1)[0]||n}function s(e,t,n){var r=n;for(t===n&&d("ERROR: can't move element inside itself",e.options);r=r.parentNode;)r===t&&d("ERROR: can't move parent inside it's own child",e.options)}function a(e,t,n,r,o){t.options;for(var i=!1,s=!0,c=t.options.idProperty,p={},u=0,d=e.length;u<d;u++)i=!(p=e[u]).parentNode,p[c]||(p[c]="vom_"+m++,s=!1),v[t.id][p[c]]=p,p.parentNode=n||t.model.root,p.index=0,i&&(p=l(t,p,s)),t.options.preRecursionCallback.call(t,p,r,o),p[t.options.childNodes]&&a(p[t.options.childNodes],t,p),t.options.enrichModelCallback.call(t,p,r,o);return e}function l(e,t,n){var r=!1,o=e.options.enhanceMap,i=0,s=0,a="",l="",p="",u="",d={},f={},h=[];for(var v in t)if(i=o[v]&&o[v].length-1){s=o[v].indexOf("*"),d=y(t,o[v],s>-1?i-s+1:1),h=(a=(u=o[v].join(".")).split("*")[1]||"").split(".").splice(1);for(var m in d)f=a?y(d[m],h,1):d,l=u.replace("*",m),p=h[h.length-1]||m,e.addProperty(p,[f,t],l)}else r="parentNode"===v||v===g,v===e.options.idProperty?c(t,v,t[v],n):(o[v]||o["*"]||r)&&e.addProperty(v,t,null,r);return t}function c(e,t,n,r,o){return delete e[t],Object.defineProperty(e,t,{enumerable:!!o,configurable:!1,writable:!!r,value:n})}function p(e,t,r,o,i,s,a){return Object.defineProperty(t[0]||t,e,{get:function(){return e===i?n(o,t[0]||t):r[a||e]},set:function(n){var s=r[a||e];r[a||e]=n,u(a||e,t,n,s,r,o,i)},enumerable:s})}function u(e,t,n,r,o,i,s){(e===i.options.idProperty||e===s||i.options.setterCallback.call(i,i.type||e,t[1]||t,n,r,i.sibling))&&(o[e]=r,d("ERROR: Cannot set property '"+e+"' to '"+n+"'",i.options)),delete i.type,delete i.sibling}function d(t,n){if(!n.throwErrors&&void 0!==e&&e.console)return console.warn?console.warn(t):console.log(t);throw t}var f=function(e,t){this.options={parentCheck:!1,idProperty:"id",setterCallback:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},enhanceMap:[],childNodes:"childNodes",throwErrors:!1},this.model=e||[],h(this,t||{})},h=function(e,t){var n="",r={};v.push({}),c(e,"id",v.length-1);for(var o in t)e.options[o]=t[o];for(;n=e.options.enhanceMap.shift();)n=n.split("."),e.options.enhanceMap[n[0]]=n;r[e.options.childNodes]=e.model,c(e.model,"root",r),a(e.model,e)},v=[],m=0,g="index",y=function(e,t,n){for(var r=0,o=t.length-(n||0);r<o;r++)e=e&&e[t[r]];return e};return f.prototype={getElementById:function(e){return v[this.id][e]},getElementsByProperty:function(e,t){var n=[],r=void 0!==t,o=void 0!==e,i=[],s=null;for(var a in v[this.id])s=void 0!==v[this.id][a][e]?v[this.id][a][e]:y(v[this.id][a],i[0]?i:i=o&&e.split(".")),(r&&s===t||!r&&void 0!==s||!r&&!o)&&n.push(v[this.id][a]);return n},appendChild:function(e,t){return t=t||this.model.root,o(this,e,t,r(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return t=t||this.model.root,o(this,e,t,0,"prependChild",t)},insertBefore:function(e,t){return o(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return o(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&i(this,t),o(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return i(this,e),this.options.setterCallback.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,o=(t=(t||this.model).sort(e)).length;r<o;r++)this.options.setterCallback.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},reinforceProperty:c,addProperty:function(e,t,n,r){var o={};o[n||e]=(t[0]||t)[e],p(e,t,o,this,g,!r,n)},getProperty:function(e,t){return y(t,e.split("."))},getCleanModel:function(){return JSON.parse(JSON.stringify(this.model))},destroy:function(){return t(this,this.model)}},f}),function(e,t){"object"==typeof exports?module.exports=t(e,require("toolbox"),require("schnauzer"),require("VOM")):"function"==typeof define&&define.amd?define("circular",["toolbox","schnauzer","VOM"],function(n,r,o){return t(e,n,r,o)}):e.Circular=t(e,e.Toolbox,e.Schnauzer,e.VOM)}(this,function(e,t,n,r){"use strict";function o(e,t,n){for(var r=0,o=t.length;r<o;r++)t[r].call(e,n)}function i(n,r){var i=void 0!==e.onpopstate?"popstate":"hashchange",a=r.options.hash;t.addEvent(e,i,function(e){var t={};for(var i in n)(t=c(n[i],s(a)))&&o(r,n[i],t)},r)}function s(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function a(e){var t=[];return e=e.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,n){return t.push(e.substr(1)),n?e:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),{regexp:new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$"),names:t}}function l(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},o=[];t<n;t++)r[(o=e[t].split("="))[0]]=o[1];return r}function c(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var o=0,i=(n=n.slice(1)).length;o<i;o++)n[o]=n[o]?o===i-1?n[o]:decodeURIComponent(n[o]):null,e.names[o]&&(r[e.names[o]]=n[o]);return n.parameters=r,n.queries=l(n[i-1]),n}function p(e,t,n,r,o){var i="prependChild"===n,s={};return"string"==typeof t?(e.innerHTML=t,s=e.children[0]):s=t,x(function(){(i||"insertAfter"===n)&&(o=o&&o.nextSibling||i&&r.children[0],n=o?"insertBefore":"appendChild"),(r||s.parentElement)[n](s,o)}),s}function u(e,t,n){for(var r=C(n,"["+e.viewAttr+"]"),o="",i=(r=[n].concat([].slice.call(r))).length;i--;)(o=r[i].getAttribute(e.viewAttr))&&(t[o]=r[i])}function d(e,t,n,r,o){for(var i in e.prototype)r[i]||(o[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return o}function f(e,t,n){var r={},o={};if(n)n[0]?n[1].insertBefore(n[2],n[0]):n[1].appendChild(n[2]);else if(e&&t)return(r=E(e,"["+t+"]"))&&(o=document.createDocumentFragment(),n=[r.nextSibling,r.parentNode,o],o.appendChild(r)),n}function h(e,t,r,o){for(var i=e.containerAttr,s=r.hasAttribute(i)?r:E(r,"["+i+'="'+o+'"]')||E(r,"["+i+"]"),a=E(document.body,"["+e.templateAttr+'="'+o+'"]'),l=C(document.body,"["+e.templatesAttr+'="'+o+'"]')||[],c={},p=l.length;p--;)c[l[p].id||l[p].getAttribute("name")]=new(e.Template||n)(l[p].innerHTML,{doEscape:!1,helpers:t.helpers||e.helpers||{}});return{element:r,template:a?a.innerHTML:a,templates:c,container:s}}function v(e,n,r,o){var i=(t.closest(e.target,"["+n+"]")||r.element).getAttribute(n),s=r.getElementById(i)||r.getElementsByProperty("elements.element",r.element)[0];s||(s=r.getElementsByProperty("elements.element",e.target)[0]);var a=s&&s.events[e.type],l=!1,c={};for(var p in a)for(var u=a[p].length;u--;)c=a[p][u],l||c!==e.target&&!c.contains(e.target)||!o.options.eventListeners[p]||(l=!1===o.options.eventListeners[p].call(r,e,c,s))&&e.stopPropagation()}var m=function(e,t){this.options={componentAttr:"cr-component",containerAttr:"cr-container",templateAttr:"cr-template-for",templatesAttr:"cr-template",eventAttribute:"cr-event",viewAttr:"cr-view",elements:"elements",events:"events",views:"views",hash:"#"},g(this,e,t)},g=function(e,t,n){var r="string"==typeof t;r||(n=t);for(var o in n)e.options[o]=n[o];e.version="0.1.0",e.components={},e.id="cr_"+R++,e.name=r?t:e.id,w[e.name]={}},y=function(e){this.options={appElement:document.body,eventAttribute:"cr-event"},b(this,e)},b=function(e,t){for(var n in t)e.options[n]=t[n];e.events={}},x=e.requestAnimationFrame||e.webkitRequestAnimationFrame||function(e){e()},E=t.$,C=t.$$,R=0,N={},w={};return m.prototype.component=function(e,t){var o=this,i={},s={},a=this.options,l=a.elements,c=t.extraModel||a.extraModel,v=a.componentAttr,m="["+v+'="'+e+'"]',g=E(document.body,m),b=f(g,v),x=h(a,t,g,e),C=this.components[e]={name:e,model:t.model||[],element:x.element,container:x.container};return w[this.name][e]={},C.templates=x.templates,N[this.id]=N[this.id]||{},i=N[this.id][e]={},i.helper=document.createElement("div"),i.controller=t.eventListeners&&new y({appElement:x.element,eventAttribute:a.eventAttribute,eventListeners:t.eventListeners}),i.template=x.template?new(a.Template||n)(t.template||x.template,{doEscape:!1,helpers:t.helpers||a.helpers||{}}):null,i.vom=new r(C.model,{preRecursionCallback:function(e,n,r){var o=i.template&&i.template.partials.self&&i.template.render(e,c),s=n||"appendChild",d="replaceChild"===n&&r[l].element,f=e.parentNode[l]&&e.parentNode[l].container,h=o&&v||f||C.container,v=h?d||void 0:r&&r[l].element,m=o&&p(i.helper,o,s,h,v)||C.element;this.reinforceProperty(e,l,{element:m,container:t.mountSelector&&E(m,t.mountSelector)},!0),this.reinforceProperty(e,a.events,{},!0),i.controller&&i.controller.getEventListeners(e[l].element||C.element,e[a.events],C,this.options.idProperty),this.reinforceProperty(e,a.views,{},!0),u(a,e[a.views],e[l].element||C.element),t.preRecursionCallback&&t.preRecursionCallback.call(this,e)},enrichModelCallback:this.options.enrichModelCallback||t.enrichModelCallback||function(){},enhanceMap:this.options.listeners||t.listeners||[],setterCallback:function(n,r,s,d,f){var h=r[l]&&r[l].element,v=r.parentNode&&r.parentNode[l]?r.parentNode[l].element:C.container;"removeChild"===n?p(i.helper,h,n,h.parentElement):"sortChildren"===n?p(i.helper,h,"appendChild",v):this[n]&&(r===f?(h=p(i.helper,i.template.render(r,c),n,v,f[l].element),r[l].element=h,r[l].container=t.mountSelector&&E(h,t.mountSelector),r[a.events]={},i.controller&&i.controller.getEventListeners(r[l].element||C.element,r[a.events],C,this.options.idProperty),r[a.views]={},u(a,r[a.views],r[l].element||C.element)):"replaceChild"!==n&&p(i.helper,h,n,v,f[l]&&f[l].element)),t.subscribe&&t.subscribe.call(this,n,r,s,d),o.publish(o.name,e,n,{property:n,item:r,value:s,oldValue:d})}}),f(null,null,b),s=d(n,i.template,0,this,s),s=d(r,i.vom,0,this,{render:s.render}),C.__proto__=s,C},m.prototype.destroy=function(){var e=N[this.id];for(var t in e)for(var n in e[t])e[t][n]&&e[t][n].destroy&&e[t][n].destroy()},m.Toolbox=t,m.prototype.subscribe=function(e,t,n,r,o){return e=e||this.name,t=w[e][t]=w[e][t]||{},t[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),o&&void 0!==t[n].value&&(r.callback||r).call(this,t[n].value),r.callback||r},m.prototype.publish=function(e,t,n,r){e=e||this.name,w[e]&&((t=w[e][t]=w[e][t]||{})[n]=t[n]||[],t[n].value=r,o(this,t[n],r))},m.prototype.unsubscribe=function(e,t,n,r){var o=-1,i={};return e=e||this.name,w[e]&&w[e][t]&&w[e][t][n]&&-1!==(o=(i=w[e][t][n]).indexOf(r.callback||r))&&i.splice(o,1),r.callback||r},m.prototype.addRoute=function(e,t){var n="object"==typeof e.path?e.path:a(e.path),r=c(n,s(this.options.hash)),o=w[this.name].__router;return this.subscribe(null,"__router",e.path,{callback:e.callback,names:n.names,regexp:n.regexp||n},t),t&&r&&e.callback.call(this,r),!o&&i(w[this.name].__router,this),e},m.prototype.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},m.prototype.toggleRoute=function(e,t){var n=w[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},y.prototype={getEventListeners:function(e,t,n,r){for(var o=this.options.eventAttribute,i=e.querySelectorAll("["+o+"]"),s="",a="",l="",c="",p=[],u=(i=[e].concat([].slice.call(i))).length;u--;)if(s=i[u].getAttribute(o))for(var d=(p=s.split(/\s*;+\s*/)).length;d--;)l=(a=p[d].split(/\s*:+\s*/))[0],c=a[1],void 0===t[l]&&(t[l]={}),void 0===t[l][c]&&(t[l][c]=[]),t[l][c].push(i[u]),this.events[l]||(this.events[l]=!0);this.installed||this.events==={}||this.installEventListeners(n,r)},installEventListeners:function(e,n){var r=this;for(var o in this.events)t.addEvent(this.options.appElement,o,function(t){v(t,n,e,r)},!!/(?:focus|blur)/.test(o),this);this.installed=!0},destroy:function(){t.removeEvent(this)}},m});