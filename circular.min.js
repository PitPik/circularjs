!function(u,e){"use strict";var t=u.require||{},r=u.Math.random,p=null,d=0,n=document.createElement("a"),i=function(e,t){if("object"!=typeof t||!t)return t;for(var n in e=e||{},t)e[n]=t[n].constructor===Array?t[n]:"object"==typeof t[n]?i(e[n],t[n]):t[n];return e},f=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1},h=function(e){return(-1!==(n.href=e).indexOf(n.host)?n.origin:"")+n.pathname+n.search},m=function(t,e){var n=u.document.createElement("script");return n.type="text/javascript",n.async=n.defer=!e,n.charset="utf-8",n.onload=n.onreadystatechange=function(e){"load"!==e.type&&"complete"!==(e.currentTarget||e.srcElement).readyState||(t.factory||y(t),n.onload=n.onreadystatechange=null)},n.src=t.path,n},v=function(e){for(var t=0,n=e.resolvedDeps.length;n--;)void 0!==e.resolvedDeps[n]&&t++;e.deps.length===t&&y(e)},g=function(e){for(var t=null,n=0,r=0,i=e.parentNames.length;r<i;r++)t=C[e.parentNames[r]],n=f(t.deps,e.name),t.resolvedDeps[n]=e.done,!t.done&&v(t);e.parentNames=[]},y=function(e){e.done||(e.done=(e.factory||function(){}).apply(null,e.resolvedDeps)),g(e),x.options.debug||(delete e.factory,e.name.indexOf("_mod"))},b=function(e){var t=x.lookaheadMap[e];if(t&&-1===(x.paths[e]||"").indexOf(x.options.minifyPrefix)){x(t);for(var n=0,r=t.length;n<r;n++)x.lookaheadMap[t[n]]&&!C[t[n]]&&b(t[n])}};if(!u.define||!u.define.amd){var o=u.define=function(e,t,n,r){var i,o,a,s=[];if("string"!=typeof e)return x(e,t,n);if(C[e]){if(C[e].done)return g(C[e]),C[e].done;C[e].deps=t,C[e].factory=n}else C[e]={name:e,deps:t,factory:n,resolvedDeps:[],parentNames:[]};for(var l=0,c=t.length;l<c;l++)s=C[t[l]]&&C[t[l]].parentNames,C[t[l]]?-1===f(s,e)&&s.push(e):(C[t[l]]={name:t[l],isFile:"!"===t[l].substr(0,1),path:(o=t[l],a=void 0,a=/(?:^\!|^http[s]*:|.*\.js$)/.test(o)?"":".js",o=(x.paths[o]||o).replace(/^\!/,""),h((x.baseUrl||".")+"/"+o+a).replace(/^.\//,"")),resolvedDeps:[],parentNames:[e]},C[t[l]].isFile?x.getFile(C[t[l]],y):(i=m(C[t[l]],r),(p=p||u.document.createDocumentFragment()).appendChild(i),clearTimeout(d),d=setTimeout(function(){document.head.appendChild(p)},0),b(t[l]))),C[t[l]].done&&g(C[t[l]]);return v(C[e]),C[e]},x=u.require=function(e,t,n){return e.constructor===Array?o("_mod"+(r()+r()),e,t,n):o("_mod"+(r()+r()),[],e,t)},C=x.modules={},a=x.config=function(e){!function(e){for(var t=["lookaheadMap","paths","options","baseUrl"],n=t.length;n--;)x[t[n]]=i(x[t[n]],e[t[n]])||x[t[n]]||""}(t=e)};x.getFile=function(e,t){return e},o.amd={},a(t)}}(this),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("toolbox",[],function(){return t(e)}):e.Toolbox=t(e)}(this,function(e,c){"use strict";var p=null,t=document.createElement("a"),d={closest:function(e,t,n){for(;e!==n&&e.parentNode;){if(e.matches(t))return e;e=e.parentNode}},$:function(e,t){return(t||document.body).querySelector(e)},$$:function(e,t){return(t||document.body).querySelectorAll(e)},parentsIndexOf:function(e,t){for(var n=e.length;n--;)if(e[n].contains(t))return n;return-1},addClass:function(e,t){e&&e.classList.add(t)},removeClass:function(e,t){e&&e.classList.remove(t)},toggleClass:function(e,t,n){if(e){var r=e.classList.contains(t);r&&!n?e.classList.remove(t):r||!1===n||e.classList.add(t)}},hasClass:function(e,t){return e&&e.classList.contains(t)},toggleClasses:function(e,t,n,r){e&&n&&d.removeClass(e,n),t&&d.addClass(t,r||n)},addEvents:function(e,t,n,r,i){for(var o=e.length;o--;)d.addEvent(e[o],t,n,r,i)},removeEvents:function(e,t,n){for(var r=t.length;r--;)d.removeEvent(e,t[r],n)},addEvent:function(e,t,n,r,i){d.addEvent.events=d.addEvent.events||[],d.addEvent.events.push({e:e,t:t,f:n,c:r,i:i||d}),e.addEventListener(t,n,r)},removeEvent:function(e,t,n){var r={},i=!1,o=0;for(o=(d.addEvent.events||[]).length;o--;)r=d.addEvent.events[o],i=!t||r.e===t&&(!n||n===r.t),r.i===(e||d)&&i&&(r.e.removeEventListener(r.t,r.f,r.c),d.addEvent.events.splice(o,1))},storageHelper:{fetch:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},saveLazy:function(e,t,n){d.lazy(function(){d.storageHelper.save(e,t)},n||d.storageHelper)},save:function(e,t){localStorage.setItem(t,JSON.stringify(e))}},lazy:function(e,t,n){clearTimeout(t._timer),t._timer=setTimeout(e,0,n)},itemsSorter:function(e,t,n,r){var i=e[n].toUpperCase(),o=t[n].toUpperCase();return r?i<o?1:o<i?-1:0:i<o?-1:o<i?1:0},normalizePath:function(e){return(-1!==(t.href=e).indexOf(t.host)?t.origin:"")+t.pathname+t.search},ajax:function(s,l){var e,t,n=null,r=(new Date).getTime();return l=l||{},s=d.normalizePath(s),t=i[s]&&i[s].time||0,n=(n=(e=!0===l.cache?r+1e8:l.cache?r<t?t:r+l.cache:0)&&!l.resetCache&&r<t?i[s]:null)||new d.Promise(function(t,n){var e,r,i=new XMLHttpRequest,o=(l.method||l.type||"GET").toUpperCase();if(i||n("Giving up :( Cannot create an XMLHTTP instance"),l||(s=(l=s).url),i.onreadystatechange=function(){var e=function(e,t,n){try{if(e.readyState===XMLHttpRequest.DONE){if(!(e.status<200||299<e.status))return e["xml"===t?"responseXML":"responseText"];var r=new Error(e.statusText);r.response=e.response,n(r)}}catch(e){n("Caught Exception: "+e.stack)}}(this,l.dataType,n);if(e!==c){if("json"===l.dataType)try{e=JSON.parse(e)}catch(e){return void n("Caught Exception: "+e.stack)}t(e)}},i.open(o,s,l.async||!0,l.username,l.password),"xml"===l.dataType&&i.setRequestHeader("Content-Type","text/xml"),"GET"!==o&&l.csrf&&i.setRequestHeader("X-CSRF-Token",(e=l.csrf,(r=document.cookie.split(e+"=")[1])&&r.split(";")[0])),l.headers)for(var a in l.headers)i.setRequestHeader(a,l.headers[a]);i.send(l.data)}),e?(i[s]=n,i[s].time=e):delete i[s],n},errorHandler:function(e){console.error(e)},Promise:r,requireResources:function(e,t,n){var r=[],i=null,o="",a="",s="",l="styles"===t,c=l?"href":"src",u=l?e.links.concat(e.styles):e.scripts;for(p=p||d.captureResources();u.length;)i=u.shift(),o=i.getAttribute(c),a=d.normalizePath(e.path?e.path+"/"+o:""+o),o&&p[a]||(l||(s=i.text,(i=document.createElement("script")).setAttribute("type","text/javascript"),i.async=!0,o||(i.text=s),r.push(new d.Promise(function(e){o?i.onload=function(){e(this)}:(n&&n.appendChild(i),e(i))}))),o?(i[c]=a,document.head.appendChild(i),p[a]=i):n&&l&&n.appendChild(i));return 0===r.length&&r.push(new d.Promise(function(e){e(function(){})})),d.Promise.all(r)},captureResources:function(){for(var e={},t=[].slice.call(d.$$("script",document)).concat([].slice.call(d.$$("link",document))),n="",r=t.length;r--;)(n=t[r].getAttribute("src")||t[r].getAttribute("href"))&&(e[n=d.normalizePath(n)]=t[r]);return e}};e.Event=e.Event||function(e,t){var n=document.createEvent("CustomEvent");return t=t||{},n.initCustomEvent(e,t.bubbles||!1,t.cancelable||!1,t.detail),n};var i={};function r(e){this._state=0,this._handled=!1,this._value=c,this._deferreds=[],u(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,setTimeout(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void s(r.promise,e)}a(r.promise,e)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(t,e){try{if(e){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void u(n.bind(e),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||console.warn("Possible Unhandled Promise Rejection:",e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t){var n=!1,r=function(e){n||(n=!0,s(t,e))};try{e(function(e){n||(n=!0,a(t,e))},r)}catch(e){r(e)}}return r._cache={},r.prototype.catch=function(e){return this.then(null,e||function(e){console.error(e)})},r.prototype.then=function(e,t){var n=new r(function(){});return o(this,{onFulfilled:e||null,onRejected:t||null,promise:n}),n},r.prototype.cancel=function(e){var t=r._cache[e];return t&&(t._deferreds=[],t.then=t.catch=function(){},t._handled=!0),r._cache[e]=this},r.all=function(e){var n=[];return e.reduce(function(e,t){return e.then(function(){return t}).then(function(e){return n.push(e)})},new r(function(e,t){e(null)})).then(function(){return n})},e.require&&(require.getFile=function(t,n){d.ajax(t.path,{cache:"!!"!==t.name.substr(0,2)}).then(function(e){t.done=e,n(t)})}),d}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("schnauzer",[],function(){return t(e)}):e.Schnauzer=t(e)}(this,function(e,v){"use strict";var t=function(e,t){this.version="1.3.0",this.options={tags:["{{","}}"],entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},doEscape:!0,helpers:{},decorators:{},partials:{},recursion:"self",characters:'$"<>%-=@',splitter:"|##|",tools:v,render:v},n(this,t||{},e)},n=function(e,t,n){for(var r in t)e.options[r]=t[r];for(var i in t=e.options,e.entityRegExp=new RegExp("["+y(t.entityMap,[]).join("")+"]","g"),o(e,t.tags),e.helpers=t.helpers,e.decorators=t.decorators,e.partials={},t.partials)e.registerPartial(i,t.partials[i]);n&&e.registerPartial(t.recursion,n)},m=Array.isArray||function(e){return e&&e.constructor===Array},g=function(e){return e&&"function"==typeof e},y=Object.keys||function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return t.prototype={render:function(e,t){return this.partials[this.options.recursion](e,t)},parse:function(e){return this.registerPartial(this.options.recursion,e)},registerHelper:function(e,t){this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerDecorator:function(e,t){this.decorators[e]=t},unregisterDecorator:function(e,t){delete this.decorators[e]},registerPartial:function(e,t){return this.partials[e]=this.partials[e]||function(s,n){var e="",l=[],c=s.options.tags;for(;e!==n&&(e=n);)n=n.replace(s.sectionRegExp,function(e,t,n,r,i,o,a){return"#*"===n?(s.registerPartial(i.replace(/(?:^['"]|['"]$)/g,""),a),""):(a=a.split(s.elseSplitter),l.push(h(s,[f(s,a[0],l,r),a[1]&&f(s,a[1],l,r)],r,i&&i.replace(/[(|)]/g,"").split(/\s+/)||[],"{{{"===t,"^"===n)),c[0]+"-section- "+(l.length-1)+" "+(i||r)+c[1])});return n=f(s,n,l),function(e,t){return n(b(e,t&&(m(t)&&t||[t])))}}(this,t)},unregisterPartial:function(e){delete this.partials[e]},setTags:function(e){o(this,e)}},t;function o(e,t){var n="{{"===t[0]?["{{2,3}","}{2,3}"]:t,r=e.options.characters+"\\][";e.inlineRegExp=new RegExp("("+n[0]+")([>!&=])*\\s*([\\w\\"+r+"\\.]+)\\s*([\\w"+r+"|\\.\\s]*)"+n[1],"g"),e.sectionRegExp=new RegExp("("+n[0]+")([#^][*%]*)\\s*([\\w"+r+"]*)(?:\\s+([\\w$\\s|./"+r+"]*))*("+n[1]+")((?:(?!\\1[#^])[\\S\\s])*?)\\1\\/\\3\\5","g"),e.elseSplitter=new RegExp(n[0]+"else"+n[1])}function l(e,t){for(var n=0,r=e.length;n<r;n++)t[t.length]=e[n];return t}function b(e,t,n,r){var i=n!==v,o=!e.__schnauzerData,a=i&&!o&&e.extra||[],s=!o&&e.helpers||[];return{extra:t?l(t,a):a,path:o?[e]:i?l(e.path,[n]):e.path,helpers:r?l(s,i&&[r]||[{}]):s,__schnauzerData:!0}}function x(e,t){for(var n=0,r=t.length;n<r;n++)"./"!==t[n]&&(e=e&&e[t[n]]);return e}function c(e,t){return e!==v?e:t}function C(e,t,n,r){if(n){var i=e.path[r]||{},o=e.helpers[r]||{},a=c(o[t],x(o,n));if(a!==v&&"./"!==n[0]||(a=c(i[t],x(i,n))),a!==v)return a;for(var s=e.extra.length;s--;)if((a=c(e.extra[s][t],x(e.extra[s],n)))!==v)return a}}function p(e){if(!e)return{};var t=e.split("="),n=1<t.length?t[1]:t[0],r='"'===n.charAt(0)||"'"===n.charAt(0),i=!1,o=0,a=[],s=[],l=!1,c="%"===n.charAt(1)?2:"%"===n.charAt(0)?1:0;return r?n=n.replace(/(?:^['"]|['"]$)/g,""):(1<(s=(n=c?n.substr(c):n).split("../")).length&&(n=("@"===s[0]?"@":"")+s.pop(),o=s.length),name=name.replace(/^(?:\.|this)\//,function(){return l=!0,""}),a=n.split(/[\.\/]/),n=n.replace(/^(\.\/|this\.|this\/|\*)/,function(e,t){return"*"===t?i=!0:(l=!0,a[0]="./"),""}).replace(/(?:^\[|\]$)/g,"")),{name:1<t.length?t[0]:n,value:n,isActive:c,isString:r,isInline:i,strict:l,keys:a,depth:o}}function u(e,t){return String(e).replace(t.entityRegExp,function(e){return t.options.entityMap[e]})}function E(t,e,n,r,i,o,a,s){return t.options.tools?t.options.tools(t,C,b,e,n,r,i,o,a,s):e[m(r)||o.isInline?"apply":"call"]({getData:function(e){return(e=o.rawParts[e]||{value:e,keys:[e],depth:0}).isString?e.value:C(i,e.value,e.keys,e.depth)},escapeHtml:function(e){return u(e,t)},getBody:function(){return a&&a(i)||""},gatAltBody:function(){return s&&s(i)||""}},o.isInline?[function(){return a||""},o.parts,t]:r)}function N(e,t,n,r,i,o,a){var s=t.name;return o=c(o,""),e.options.render?E(e,e.options.render,s,{name:s,data:n,section:!!t.section,partial:!!t.partial,isActive:t.isActive,fn:r,text:i,value:o,parent:t.parent,type:(t.isInline&&e.decorators[s]?"decorator":t.partial&&e.partials[s]&&"partial")||e.helpers[s]&&"helper"||a||""},n,t,r):i+o}function d(e,t,n,r,i){for(var o={},a={},s=[],l=0,c=t.length,u={};l<c;l++)if(""!==t[l]){if("as"===t[l]){t.splice(l,1),s=[t.splice(l,1)[l],t.splice(l,1)[l]];break}o[(u=p(t[l])).name]=u,a[t[l]]=u}return{name:n.name,vars:t,parts:o,rawParts:a,partial:">"===i&&(e.partials[n.name]||e.partials[e.options.recursion]),isInline:n.isInline,isUnescaped:!e.options.doEscape||"&"===i||r,isActive:n.isActive,depth:n.depth,strict:n.strict,keys:n.keys,helpers:s}}function A(e,t,n,r,i,o){var a=i?{"@index":o,"@last":o===i-1,"@first":0===o,_parent:n&&[n.name,o]}:{};return a["@key"]=t,a["."]=a.this=e,0!==r.length&&(a[r[0]]=e,a[r[1]]=t),a}function f(a,t,n,r){var s=[],l=a.options.splitter;return t=t.replace(a.inlineRegExp,function(e,t,n,r,i){var o=n&&n.charAt(0)||"";return"!"===o||"="===o?"":(i=i.split(/\s+/),"-section-"===r?((r=p(i[1])).section=i[0],s.push(r)):("*"===r&&(r+=i.shift()),s.push(d(a,i,p(r),"{{{"===t,o))),l)}).split(l),r=p(r).name,function(e){return function(e,t,n,r,i,o){for(var a="",s="",l=null,c={},u={},p={},d=0,f=n.length;d<f;d++)if((p=o[d])!==v)if(a+=n[d],p.section)a=N(e,p,t,l=r[p.section],a,l(t),i);else if(p.isInline)a=E(e,e.decorators[p.name||p.vars[0]],p.name,p.vars,t,p,a)||a,g(a)&&(a=a());else{if(p.partial){for(var h in u={},t.path[0])u[h]=t.path[0][h];for(var m in p.parts)c=p.parts[m],u[m]=c.isString?c.value:C(t,c.value,c.keys,c.depth);(u=b(u)).helpers=[t.helpers[0]],u.extra=[t.extra[0]],s=p.partial(u)}else p.parent=x(t.helpers,[0,"_parent"]),l=_(e,p),s=l(t);a=N(e,p,t,l,a,s,i)}else a=i?N(e,{},t,l,a,n[d],i):a+n[d];return a}(a,e,t,n,r,s)}}function _(i,o){return function(e,t){var n=C(e,o.name,t||o.keys,o.depth),r=!o.strict&&i.helpers[o.name]||g(n)&&n;return n=r?E(i,r,o.name,o.vars,e,o):n&&(o.isUnescaped?n:u(n,i))}}function h(t,n,r,i,e,o){var a=r;return r=p(!i.length||"if"!==r&&"each"!==r&&"with"!==r&&"unless"!==r?r:i.shift()),i=d(t,i,p(r.name),e,""),function(e){return function(e,t,n,r,i,o,a){var s=C(t,r.name,r.keys,r.depth),l=!r.strict&&(e.helpers[r.name]||g(s)&&s),c=l&&E(e,l,r.name,i.vars,t,i,n[0],n[1]),u=m(s),p="each"===a&&!u&&"object"==typeof s&&s,d="";if(l){if(t.helpers[0]=A(c,r.name,v,i.helpers),"if"===a)return c?n[0](t):n[1]&&n[1](t);if("unless"===a)return c?n[1]&&n[1](t):n[0](t);u=m(s=c)}"unless"===a?s=!s:p&&(s=y(s,[]));if(u||p){if(o)return s.length?"":n[0](s);t.path.unshift({}),t.helpers.unshift({});for(var f=0,h=s.length;f<h;f++)t.path[0]=u?s[f]:p[s[f]],t.helpers[0]=A(t.path[0],u?f:s[f],r,i.helpers,h,f),d+=n[0](t);return t.path.shift(),t.helpers.shift(),d}if(o&&!s||!o&&s)return l&&"string"==typeof s?s:n[0]("unless"===a||"if"===a?t:b(t,v,s,A(s,r.name,v,i.helpers)));return n[1]&&n[1](t)}(t,e,n,r,i,o,a)}}}),function(t,n){"object"==typeof exports?module.exports=n(t,require("schnauzer")):"function"==typeof define&&define.amd?define("blick",["schnauzer"],function(e){return n(t,e)}):t.Blick=n(t,t.Schnauzer)}(this,function(e,a,b){"use strict";var t=function(e,t){this.version="0.0.1",this.options={registerProperty:r,unregisterProperty:r,attributes:{value:o,disabled:i,checked:i,autocomplete:i,contenteditable:i,readonly:i,required:i,selected:i}},n(this,t||{},e)},n=function(e,t,n){for(var r in t)if("attributes"===r)for(var i in t[r])e.options[r][i]=t[r][i];else e.options[r]=t[r];var o=e.options.registerProperty;e.options.registerProperty=function(e,t){o(e.name,e.replacer,e.data.path[0],e.isActive,e.parent,t)},t.render=s,e.schnauzer=new a(n,t)},x=[],r=function(){},i=function(e,t,n){!0===n||"true"===n||!n&&!1!==n?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1,"focus"===n&&e.focus())},o=function(e,t,n){e.setAttribute("value",n),e.value=n};return t.prototype={render:function(e,t){return this.schnauzer.render(e,t)},renderHTML:function(e,t){var n=document.createDocumentFragment(),r=this.schnauzer.render(e,t);return function a(s,e,t,n,l){var r=new RegExp("{{#\\d+}}[\\S\\s]*{{/\\d+}}");var i=document.createElement("tbody");var o="";var c="";var u={};var p={};var d={};var f=s.options;var h=f.registerProperty;var m=[];var v=[];var g;i.innerHTML=t||"";for(var y=e.length;y--;)o="{{#"+y+"}}",c="{{/"+y+"}}",u=e[y],(p=C(i,o))?p.ownerElement?(u.replacer=function(r,i,o,a,s,l){return function(e,t){var n=t||l.fn(l.data,e);n===b&&(n=""),f.attributes[o]?(r=null,f.attributes[o](i,o,n)):n!==b&&(r.textContent=s.replace(a,n))}}(p,p.ownerElement,p.name,r,p.textContent,u),h(u,p),v=_(p.ownerElement.previousSibling,u,v,f),u.replacer(null,u.value)):N(u,p)?((v=_(p,u,v,f)).push({search:o,children:u.children=[]}),d=C(p.parentNode,c),u.lastNode=d=d.splitText(d.textContent.lastIndexOf(c)),d.textContent=d.textContent.replace(c,""),(p=p.splitText(p.textContent.indexOf(o))).textContent=p.textContent.replace(o,""),u.replacer=function(i,o){return function(e){for(;o.lastNode.previousSibling&&o.lastNode.previousSibling!==i;)i.parentNode.removeChild(o.lastNode.previousSibling);if(o.children)for(var t=o.children.length;t--;)o.children[t].unregister();i.textContent="",m=a(s,x,o.fn(o.data,e),i,l),o.children=A(m);for(var n=[],r=o.lastNode;r!==i&&(r=r.previousSibling);)1===r.nodeType&&n.push(r);return n}}(p,u),h(u,p)):(p=E(p,o,c),u.replacer=function(t,n){return function(e){t.textContent=n.fn(n.data,e)}}(p,u),p.textContent=u.value,h(u,p),v=_(p,u,v,f)):window.console&&console.warn("There might be an error in the SCHNAUZER template");g=function(e,t,n){for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);{if(!e)return n;e.parentNode.insertBefore(n,e.nextSibling)}}(n,i,l);n||(e=A(e));x=[];return n?e:g}(this,x,r,null,n)}},t;function C(e,t){return document.evaluate('//text()[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue||document.evaluate('//@*[contains(., "'+t+'")]',e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function s(e){var t=x.length;return e.fn&&e.name&&e.isActive&&!e.partial&&"decorator"!==e.type&&"helper"!==e.type&&"@"!==e.name.charAt(0)?(e.isSection=N(e),(x[t]=e).text+"{{#"+t+"}}"+e.value+"{{/"+t+"}}"):e.text+e.value}function E(e,t,n){return e.splitText(e.textContent.lastIndexOf(n)+n.length).textContent,e.splitText(e.textContent.indexOf(t))}function N(e,t){return e.section&&!e.type&&(-1!==e.value.indexOf("{{#")||t&&-1!==t.textContent.indexOf("{{#"))}function A(e){for(var t={replacer:!0,lastNode:!0,fn:!0,children:!0,unregister:!0,data:!0},n=e.length;n--;){for(var r in e[n])t[r]||delete e[n][r];e[n]=null}return null}function _(e,t,n,r){if(e&&0!==n.length)for(var i=n.length;i--;)n[i].children.push({unregister:function(e){return function(){r.unregisterProperty(e.name,e)}}(t)}),-1!==e.textContent.indexOf(n[i].search)&&(e.textContent=e.textContent.replace(n[i].search,""),n.pop());return n}}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define("VOM",[],function(){return t(e)}):e.VOM=t(e)}(this,function(n,l){"use strict";var e=function(e,t){this.options={parentCheck:!1,idProperty:"id",subscribe:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},listeners:[],childNodes:"childNodes",throwErrors:!1},this.model=e||[],r(this,t||{})},r=function(e,t){var n={},r=[],i="",o=[],a=e.options;for(var s in d.push({}),y(e,"id",d.length-1),t)a[s]=t[s];for(r=a.listeners;i=r.shift();)(r[(o=i.split(c))[0]]=r[o[0]]||[]).push(o);n[a.childNodes]=e.model,y(e.model,"root",n),h(e,e.model)},c=/\.|\//,d=[],f=0;return e.prototype={getElementById:function(e){return d[this.id][e]},getElementsByProperty:function(e,t){var n=[],r=l!==t,i=l!==e,o=[],a=null;for(var s in d[this.id])a=l!==d[this.id][s][e]?d[this.id][s][e]:m(d[this.id][s],o[0]?o:o=i&&e.split(c)),(r&&a===t||!r&&l!==a||!r&&!i)&&n.push(d[this.id][s]);return n},appendChild:function(e,t){return o(this,e,t=t||this.model.root,s(t,this.options.childNodes).length,"appendChild",t)},prependChild:function(e,t){return o(this,e,t=t||this.model.root,0,"prependChild",t)},insertBefore:function(e,t){return o(this,e,t.parentNode,t.index,"insertBefore",t)},insertAfter:function(e,t){return o(this,e,t.parentNode,t.index+1,"insertAfter",t)},replaceChild:function(e,t){var n=t.index,r=t.parentNode;return e!==t&&u(this,t),o(this,e,r,n,"replaceChild",t),t},removeChild:function(e){return u(this,e),this.options.subscribe.call(this,"removeChild",e),e},sortChildren:function(e,t,n){for(var r=0,i=(t=(t||this.model).sort(e)).length;r<i;r++)this.options.subscribe.call(this,"sortChildren",t[r]),n&&t[r][this.options.childNodes]&&this.sort(e,t[r][this.options.childNodes],n)},addProperty:function(e,t,n){return v(_this,e.split(c)[0],{current:t,root:t},e,n)},reinforceProperty:y,getProperty:function(e,t){return m(t,e.split(c))},getCleanModel:function(e){return JSON.parse(JSON.stringify(e||this.model))},destroy:function(){return i(this,this.model)}},e;function m(e,t){for(var n=0,r=t.length;n<r;n++){if("*"===t[n])return e;e=e&&e[t[n]]}return e}function i(e,t){for(var n=t.length;n--;)t[n][e.options.childNodes]&&i(e,t[n][e.options.childNodes]),delete d[e.id][t[n][e.options.idProperty]],t.pop();return t}function s(e,t){return e[t]=e[t]||[],e[t]}function o(e,t,n,r,i,o){var a=e.options;return a.moveCallback.call(e,t,i,o),t.parentNode?a.parentCheck&&function(e,t,n){var r=t;e===t&&b("ERROR: can't move element inside itself",n);for(;r=r.parentNode;)r===e&&b("ERROR: can't move parent inside it's own child",n)}(t,n,a):h(e,[t],n,i,o),e.type=i,e.sibling=o,t.parentNode===n&&r>t.index&&-1!==t.index&&r--,t=-1!==t.index&&t.parentNode&&u(e,t,!0)||t,s(n,a.childNodes).splice(r||0,0,t),t.parentNode=n,t}function u(e,t,n){return!n&&i(e,[t]),s(t.parentNode,e.options.childNodes).splice(t.index,1)[0]||t}function h(e,t,n,r,i){for(var o=e.options,a=!1,s=!0,l=o.idProperty,c={},u=0,p=t.length;u<p;u++)(c=t[u])[l]||(c[l]="vom_"+f++,s=!1),a=!(d[e.id][c[l]]=c).parentNode,c.parentNode=n||e.model.root,c.index=0,a&&(y(c,l,c[l],s),v(e,"index",{current:c},null,!0),v(e,"parentNode",{current:c},null,!0),g(e,c,e.options.listeners)),o.preRecursionCallback.call(e,c,r,i),c[o.childNodes]&&h(e,c[o.childNodes],c),o.enrichModelCallback.call(e,c,r,i);return t}function v(e,t,n,r,i){var l,c,u,p,o,d,a={};return a[t]=n.current[t],l=e,c=t,u=n,p=a,o=!i,d=r,Object.defineProperty(u.current,c,{get:function(){return"index"===c?(e=l,((t=u.current).parentNode?s(t.parentNode,e.options.childNodes):e.model).indexOf(t)):p[c];var e,t},set:function(e){var t,n,r,i,o,a,s=p[c];p[c]=e,n=u,r=e,i=s,o=p,((t=d||c)===(a=l).options.idProperty||"index"===t||a.options.subscribe.call(a,a.type||t,n.root||n.current,r,i,a.sibling))&&(o[t]=i,b("ERROR: Cannot set property '"+t+"' to '"+r+"'",a.options)),delete a.type,delete a.sibling},enumerable:o})}function g(e,t,n){var r=[],i=0,o=!1,a=!1,s="",l=[],c=[],u={},p={};for(var d in n)for(var f=n[d].length;f--;)if(a=0===(i=(r=n[d][f]).indexOf("*"))&&1===r.length,o=i===r.length-1,s=r.join("."),u=!a&&m(t,r),a)for(var h in t)v(e,h,{current:t});else if(0<i&&1<r.length)for(var h in u)o?v(e,h,{current:u,root:t},s.replace("*",h)):(c=(l=r.slice(i+1)).slice(0,l.length-1),p=m(u[h],c),v(e,l[l.length-1],{current:p,root:t},s.replace("*",h)));else if(o)for(var h in u)v(e,h,{current:u,root:t},s.replace("*",h));else v(e,r[r.length-1],{current:t},s);return t}function y(e,t,n,r,i){return delete e[t],Object.defineProperty(e,t,{enumerable:!!i,configurable:!1,writable:!!r,value:n})}function b(e,t){if(!t.throwErrors&&n!==l&&n.console)return console.warn?console.warn(e):console.log(e);throw e}}),function(r,i){"object"==typeof exports?module.exports=i(r,require("toolbox"),require("blick"),require("VOM")):"function"==typeof define&&define.amd?define("circular",["toolbox","blick","VOM"],function(e,t,n){return i(r,e,t,n)}):r.Circular=i(r,r.Toolbox,r.Blick,r.VOM)}(this,function(f,P,k,c,T){"use strict";var e=function(e,t){this.options={componentAttr:"cr-component",containerAttr:"cr-container",templateAttr:"cr-template-for",templatesAttr:"cr-template",eventAttribute:"cr-event",viewAttr:"cr-view",devAttribute:"cr-dev",mountAttribute:"cr-mount",elements:"elements",events:"events",views:"views",hash:"#"},n(this,e,t)},n=function(e,t,n){var r="string"==typeof t;for(var i in r||(n=t),n)e.options[i]=n[i];e.version="0.1.0",e.components={},e.data={},e.id="cr_"+o++,e.Toolbox=P,e.name=r?t:e.id},u=function(e){this.options={appElement:document.body,eventAttribute:"cr-event"},t(this,e)},t=function(e,t){for(var n in t)e.options[n]=t[n];e.events={}},M=(f.requestAnimationFrame||f.webkitRequestAnimationFrame,P.$),O=P.$$,o=0,d={},S={},a=null,L={},p={};function h(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r].call(e,n)}function m(e){return decodeURI(e?location.hash.substr(e.length):location.pathname+location.search)}function v(e,t){var n=e.regexp&&e.regexp.exec(t),r={};if(!n)return null;for(var i=0,o=(n=n.slice(1)).length;i<o;i++)n[i]=n[i]?i===o-1?n[i]:decodeURIComponent(n[i]):null,e.names[i]&&(r[e.names[i]]=n[i]);return n.parameters=r,n.queries=function(e){for(var t=0,n=(e=e?e.split("&"):[]).length,r={},i=[];t<n;t++)r[(i=e[t].split("="))[0]]=i[1];return r}(n[o-1]),n.path=t.replace(/^\//,"").split("/"),n}function g(e){for(var t=[].slice.call(e.container.childNodes),n=0,r=t.length;n<r;n++)p[e.previousName].cache.appendChild(t[n])}return e.prototype.component=function(f,h){if(this.components[f])return this.components[f].reset(h.model,h.extraModel);this.data[f]={};var m=this,v={},e={},g=this.options,y=g.elements,t=g.componentAttr,n=H(t,f),r=h.componentElement||M(n,h.componentWrapper||document);if(r){var i=q(r,t),o=r&&r.getAttribute("name"),p=function(e,t,n,r){for(var i,o=n||document.body,a=e.containerAttr,s=n.hasAttribute(a)?n:M(H(a,r),n)||M(H(a),n),l=s&&s.getAttribute(e.containerAttr),c=M(H(e.templateAttr,r),o),u=O(H(e.templatesAttr,r),o)||[],p={},d=u.length;d--;)i=I(u[d],e),p[u[d].id||u[d].getAttribute("name")]=new k(i,{doEscape:!1,helpers:t.helpers||e.helpers||{}});return{element:n,template:c?I(c,e):c,templates:p,container:s,type:l?l+"Child":""}}(g,h,r,o||f),b=this.components[f]={name:f,model:h.model||[],element:p.element,container:p.container,templates:p.templates},x=h.storage,C=x||{},E=P.storageHelper,N=x&&E.fetch(C.name)||{},A=C.category,_=C.listeners||h.listeners,w=C.storeAll||_&&-1!==_.indexOf("*"),R=h.mountSelector||H(g.mountAttribute),a=h.template;if(this.data[f].extraModel=h.extraModel||g.extraModel,L[this.name]=L[this.name]||{},L[this.name][f]={},d[this.id]=d[this.id]||{},(v=d[this.id][f]={}).helper=document.createElement("tbody"),h.onBeforeInit&&h.onBeforeInit(b),v.controller=h.eventListeners&&new u({appElement:p.element,eventAttribute:g.eventAttribute,eventListeners:h.eventListeners,instanceID:m.id}),v.collector={},v.template=a&&a.version?a:S[f]?S[f]:p.template?new k(a||p.template,{doEscape:!1,helpers:h.helpers||g.helpers||{},decorators:h.decorators||g.decorators||{},attributes:h.attributes||g.attributes||{},registerProperty:function(e,t,n,r,i){var o=i&&n[i[0]]&&!Object.getOwnPropertyDescriptor(n[i[0]],"0").get,a=i?i.slice(0):i;i&&o&&a.push(e);var s=v.collector[n["cr-id"]]=v.collector[n["cr-id"]]||{},l=a&&a.join(".")||e;s[l]=s[l]||[],s[l].push({item:n,fn:t,forceUpdate:2===r,parent:i&&("this"!==e&&"."!==e?i.concat(e.split(".")):i)})}}):null,v.template&&(S[f]=v.template),x){var s=N[A]||N;for(var l in b.model[0])s&&s[l]!==T&&(b.model[0][l]=s[l])}return v.vom=new c(b.model,{idProperty:m.options.idProperty||"cr-id",preRecursionCallback:function(e,t,n){var r=this.options.idProperty,i=e[r],o=v.template&&v.template.schnauzer.partials.self&&v.template.renderHTML(e,m.data[f].extraModel),a="replaceChild"===t&&n[y].element,s=e.parentNode[y]&&e.parentNode[y].container,l=o&&c||s||b.container,c=l?a||T:n&&n[y].element,u=o&&j(v.helper,o,t||p.type||"appendChild",l,c,r,i)||b.element;this.reinforceProperty(e,y,{element:u,container:M(R,u)},!0),this.reinforceProperty(e,g.events,{},!0),v.controller&&v.controller.getEventListeners(e[y].element||b.element,e[g.events],b,r),this.reinforceProperty(e,g.views,{},!0),D(g,e[g.views],e[y].element||b.element),h.preRecursionCallback&&h.preRecursionCallback.call(this,e)},enrichModelCallback:this.options.enrichModelCallback||h.enrichModelCallback||function(){},listeners:this.options.listeners||h.listeners||[],subscribe:function(e,t,n,r,i){var o=this.options.idProperty,a=t[o],s=t[y]&&t[y].element,l=t.parentNode&&t.parentNode[y]?t.parentNode[y].container||t.parentNode[y].element:b.container;"removeChild"===e?(j(v.helper,s,e,s.parentElement),delete v.collector[a]):"sortChildren"===e?j(v.helper,s,"appendChild",l):this[e]?t===i?(s=j(v.helper,v.template.renderHTML(t,m.data[f].extraModel),e,l,i[y].element,o,t[o]),t[y].element=s,t[y].container=M(R,s),t[g.events]={},v.controller&&v.controller.getEventListeners(t[y].element||b.element,t[g.events],b,this.options.idProperty),t[g.views]={},D(g,t[g.views],t[y].element||b.element)):"replaceChild"!==e&&j(v.helper,s,e,l,i[y]&&i[y].element):x&&(w||-1!==_.indexOf(e))&&(N=E.fetch(C.name)||{},w?N[A]=b.model[0]:(N[A]=N[A]||{},N[A][e]=n),E[!1===C.saveLazy?"save":"saveLazy"](A?N:N[A],C.name,this));var c=v.collector[a]&&v.collector[a][e];if(c)for(var u,p=c.length;p--;)if((c[p].forceUpdate||n!==r)&&(u=c[p].fn(c[p].parent),v.controller&&u))for(var d=u.length;d--;)v.controller.getEventListeners(u[d],t[g.events],b,o,!0);h.subscribe&&h.subscribe.call(this,e,t,n,r),m.publish(b,f,e,{property:e,item:t,value:n,oldValue:r})}}),q(null,null,i),(e=function(e,t,n,r,i){for(var o in e.prototype)r[o]||(i[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));return i}(c,v.vom,0,this,e)).uncloak=function(e){e=e&&e.element||b.element;P.removeClass(e,"cr-cloak"),e.removeAttribute("cr-cloak")},e.reset=function(e,t){t&&(m.data[b.name].extraModel=t),v.vom.destroy(),this.container&&(this.container.innerHTML="");for(var n=0,r=e.length;n<r;n++)this.appendChild(e[n]);return b},b.__proto__=e,h.onInit&&h.onInit(b),b}},e.prototype.destroy=function(e){var t=d[this.id],n={};for(var r in t)if(!e||e===r)for(var i in t[r])(n=t[r][i])&&n.destroy&&n.destroy(r)},e.prototype.model=function(e,t){return new c(e,t)},e.prototype.template=function(e,t){return new k(e,t)},e.Toolbox=P,e.prototype.subscribe=function(e,t,n,r,i){if(e=e?e.name||e.components&&e.components[t]||e:this.name,L[e]=L[e]||{},(t=L[e][t]=L[e][t]||{})[n]=t[n]||[],r&&(t[n].push(r.callback||r),r.regexp&&!t[n].regexp&&(t[n].regexp=r.regexp,t[n].names=r.names)),n&&t[n])return i&&t[n].value!==T&&(r.callback||r).call(this,t[n].value),r.callback||r;delete L[e]},e.prototype.publish=function(e,t,n,r){e="string"==typeof e?e:this.name,L[e]=L[e]||{},L[e]&&((t=L[e][t]=L[e][t]||{})[n]=t[n]||[],t[n].value=r,t[n][0]&&h(this,t[n],r))},e.prototype.unsubscribe=function(e,t,n,r){var i=-1,o={};return e=e||this.name,L[e]&&L[e][t]&&L[e][t][n]&&-1!==(i=(o=L[e][t][n]).indexOf(r.callback||r))&&o.splice(i,1),r.callback||r},e.prototype.addRoute=function(e,t,n){var r,i,o,a,s,l,c="object"==typeof e.path?{regexp:e.path}:(r=e.path,i=[],r=r.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return i.push(e.substr(1)),t?e:"([^/?]+)"}).replace(/\*/g,"([^?]*?)"),{regexp:new RegExp("^"+r+"(?:\\?([\\s\\S]*))?$"),names:i}),u=n||this.options.hash,p=v(c,m(u)),d=L[this.name]&&L[this.name].__router;return this.subscribe(null,"__router",e.path,{callback:e.callback,names:c.names,regexp:c.regexp||c},t),t&&p&&e.callback.call(this,p),!d&&(o=L[this.name].__router,a=this,s=u,l=f.onpopstate!==T?"popstate":"hashchange",P.addEvent(f,l,function(e){var t={};for(var n in o)(t=v(o[n],m(s)))&&h(a,o[n],t)},a.id)),e},e.prototype.removedRoute=function(e){return this.unsubscribe(null,"__router",e.path,e.callback)},e.prototype.toggleRoute=function(e,t){var n=L[this.name].__router,r=n[e.path].paused||n[e.path];n[e.path]=t?r:[],n[e.path].paused=t?null:r},e.prototype.loadResource=function(r,e){var t=this,i=function(e){return!e.hasAttribute(t.options.devAttribute)};return P.ajax(r,{cache:e}).then(function(e){var t,n=r.split("/").slice(0,-1);return(a=a||document.implementation.createHTMLDocument("")).documentElement.innerHTML=e,t=[].slice.call(O("script",a)||[]).filter(function(e){return"text/javascript"===e.getAttribute("type")&&(e.parentNode.removeChild(e),i(e))}),{links:[].slice.call(O("link",a)||[]).filter(i),styles:[].slice.call(O("style",a)||[]).filter(i),scripts:t,body:M("body",a),head:M("head",a),path:n.join("/")}}).catch()},e.prototype.insertResources=function(e,t){var n=M(H(this.options.devAttribute,"container"),t.body)||t.body;for(P.requireResources(t,"styles",e);n.childNodes[0];)e.appendChild(n.childNodes[0]);return P.requireResources(t,"scripts",e)},e.prototype.insertModule=function(e,t){var n=this;return this.loadResource(e,!0).then(function(e){return n.insertResources(t,e).then(function(){return e.path})})},e.prototype.renderModule=function(r){var i,o=null,a=r.container,s=p,l=r.name;return s[r.previousName]&&g(r),l&&s[l]?(r.container.appendChild(s[l].cache),s[l].init&&!1!==r.init&&s[l].init(r.data,s[l].path),new P.Promise(function(e){e(s[l].init)})):(i=document.createDocumentFragment(),a||((o=document.createElement("div")).style.display="none",document.body.appendChild(o)),l?this.insertModule(r.path,r.container||o).then(function(n){return new P.Promise(function(t){var e=!0===r.require?l:!1===r.require?"":r.require;s[l]={path:n,cache:i},e?require([e],function(e){s[l].init=e,!1!==r.init&&e(r.data,n),a||(r.container=o,g(r),o.parentElement.removeChild(o)),t(e)}):o&&(g(r),o.parentElement.removeChild(o),t())})}).catch():new P.Promise(function(e){e()}))},u.prototype={getEventListeners:function(e,t,n,r,i){for(var o=this.options.eventAttribute,a=e.querySelectorAll(H(o)),s="",l="",c="",u="",p=[],d={},f=e!==n.element?n.element:[],h=(a=[e].concat([].slice.call(a),f)).length;h--;)if(s=a[h].getAttribute(o))for(var m=(p=s.split(/\s*;+\s*/)).length;m--;)c=(l=p[m].split(/\s*:+\s*/))[0],u=l[1],(d=t[c]=t[c]||{})[u]===T&&(d[u]=[]),d[u].push(a[h]),this.events[c]||(this.events[c]=!0);this.installed&&!i||this.installEventListeners(n,r)},installEventListeners:function(t,n){var r=this;for(var e in this.installed=this.installed||{},this.events)this.installed[e]||(P.addEvent(this.options.appElement,e,function(e){i(e,n,t,r)},!!/(?:focus|blur|mouseenter|mouseleave)/.test(e),this.options.instanceID+"_"+t.name),this.installed[e]=!0)},destroy:function(e){P.removeEvent(this.options.instanceID+"_"+e.name)}},e;function j(e,t,n,r,i,o,a){var s="prependChild"===n,l={};11===t.nodeType?(l=t.children[0]).setAttribute(o,a):l=t;return l&&((s||"insertAfter"===n)&&(i=i&&i.nextSibling||s&&r.children[0],n=i?"insertBefore":"appendChild"),(r||l.parentElement)[n](l,i)),l}function D(e,t,n){for(var r=O(H(e.viewAttr),n),i="",o=(r=[n].concat([].slice.call(r))).length;o--;)(i=r[o].getAttribute(e.viewAttr))&&(t[i]=r[o])}function q(e,t,n){var r=[],i=q.tempContainer=q.tempContainer||document.createDocumentFragment(),o=[],a={};if(n)for(var s=n.length;s--;)(a=n[s])[2][a[1]?"insertBefore":"appendChild"](a[0],a[1]),n[s]=null;else if(e&&t){if(0!==(r=O(H(t),e)).length){s=0;for(var l=r.length;s<l;s++)a=r[s],o.push([a,a.nextElementSibling,a.parentNode]),i.appendChild(a)}return o}}function I(e,t){var n="";return"script"===e.tagName.toLowerCase()?e.innerHTML:(e.removeAttribute(t.templateAttr),n=e.outerHTML,e.parentNode.removeChild(e),n)}function H(e,t){return"["+e+(t?'="'+t+'"]':"]")}function i(e,t,n,r){var i,o,a=(P.closest(e.target,H(t))||n.element).getAttribute(t),s="elements.element",l=n.getElementById(a)||n.getElementsByProperty(s,n.element)[0]||n.getElementsByProperty(s,e.target)[0]||n.model[0],c=l&&l.events[e.type],u={},p=!1;for(var d in c)if(i=r.options.eventListeners[d])for(var f=c[d].length;f--;)u=c[d][f],o=u,r.options.appElement,(o.isConnected!==T?o.isConnected:_this.options.appElement.contains(eventElement))?p||u!==e.target&&!u.contains(e.target)||(p=!1===i.call(n,e,u,l))&&e.stopPropagation():c[d].splice(f,1)}});
//# sourceMappingURL=circular.min.js.map
