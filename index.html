<!doctype html>
<html lang="en" data-framework="circularJS">
	<head>
		<meta charset="utf-8">
		<title>Circular.js â€¢ Demo</title>

		<script type="text/javascript" src="toolbox.js"></script>
		<script type="text/javascript" src="VOM.js"></script>
		<script type="text/javascript" src="DOMinator.js"></script>
		<script type="text/javascript" src="controller.js"></script>
		<script type="text/javascript" src="schnauzer.js"></script>
		<script type="text/javascript" src="circular.js"></script>

 		<!-- <script type="text/javascript" src="circular.min.js"></script> -->
	</head>
	<body>
		<section cr-component="app" cr-view="app" cr-container>
			<script type="text/template" cr-template-for="app">
				<p cr-event="click: clicker; mousedown: preventSelect">
					Clicks{{#maxClicks}} (max {{maxClicks}}){{/maxClicks}}:
					<span cr-view="clickCounter">{{clicks}}</span> so far
				</p>
			</script>
		</section>
	</body>

	<script type="text/javascript">
		(function(window, undefined){
			'use strict';

			var demo = window.demo = new Circular();

			var paragraphs = demo.component('app', {
				model: [{
					clicks: 0,
					maxClicks: 10
				}, {
					clicks: 0,
					maxClicks: 2
				}, {
					clicks: 0,
					maxClicks: 1
				}],
				enhanceMap: ['clicks'],
				setterCallback: function(property, item, value, oldValue, type) {
					if (property === 'clicks') {
						if (value <= item.maxClicks || !item.maxClicks) {
							item.views.clickCounter.textContent = value;
						} else {
							this.removeChild(item);
						}
					}
				},
				eventListeners: {
					clicker: function(e, element, item) {
						item.clicks++;
					},
					preventSelect: function(e, element, item) {
						e.preventDefault();
					}
				}
			});

			var more = [{ // test prependChild order
					clicks: 0,
					maxClicks: 8
				}, {
					clicks: 0
				}];

			for (var n = 0, l = more.length; n < l; n++) {
				paragraphs.prependChild(more[n]);
			}
		})(this);
	</script>
</html>